{"version":3,"sources":["node_modules/browser-pack/_prelude.js","index.js","source/assets/js/helpers/cookies.js","source/assets/js/helpers/cssControlCode.js","source/assets/js/helpers/getElementOuterHtml.js","source/assets/js/helpers/getHandlebarTemplate.js","source/assets/js/helpers/jQueryExtend.js","source/assets/js/helpers/jQueryExtend_ajaxPattern.js","source/assets/js/helpers/listing.js","source/assets/js/helpers/sticky.js","source/assets/js/helpers/truncateBodyText.js","source/assets/js/helpers/twiggy.js","source/assets/js/index.js","source/assets/js/modules/accordions.js","source/assets/js/modules/activateBodyTextTruncation.js","source/assets/js/modules/ajaxPattern.js","source/assets/js/modules/ajaxPatternOverride.js","source/assets/js/modules/back2top.js","source/assets/js/modules/clickable.js","source/assets/js/modules/contactAccordion.js","source/assets/js/modules/dropdown.js","source/assets/js/modules/emergencyAlerts.js","source/assets/js/modules/eventFilters.js","source/assets/js/modules/eventListingInteractive.js","source/assets/js/modules/feedbackForm.js","source/assets/js/modules/footnote.js","source/assets/js/modules/formInputs.js","source/assets/js/modules/formValidation.js","source/assets/js/modules/googleMap.js","source/assets/js/modules/headerTags.js","source/assets/js/modules/hideAlert.js","source/assets/js/modules/imageFill.js","source/assets/js/modules/inlineOverlay.js","source/assets/js/modules/inpageAlert.js","source/assets/js/modules/keywordSearch.js","source/assets/js/modules/linkListToggle.js","source/assets/js/modules/locationFilters.js","source/assets/js/modules/locationListing.js","source/assets/js/modules/mainNav.js","source/assets/js/modules/orgSelector.js","source/assets/js/modules/organizationNavigation.js","source/assets/js/modules/pagination.js","source/assets/js/modules/pikaday.js","source/assets/js/modules/preventHorizontalListWidows.js","source/assets/js/modules/relatedOrgsAndTopics.js","source/assets/js/modules/responsiveTable.js","source/assets/js/modules/responsiveVideo.js","source/assets/js/modules/resultsHeading.js","source/assets/js/modules/scrollAnchors.js","source/assets/js/modules/stickyTOC.js","source/assets/js/modules/teaserListingGroup.js","source/assets/js/modules/truncateTitle.js","source/assets/js/modules/utilNav.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Object","defineProperty","value","default","window","document","undefined","setCookie","name","expires","d","Date","setTime","getTime","toUTCString","cookie","getCookie","parts","split","pop","shift","2","$el","getComputedStyle","getPropertyValue","replace","err","3","el","outerHTML","container","createElement","appendChild","cloneNode","innerHTML","4","Handlebars","templates","jQuery","ajax","url","ma","themePath","success","data","compile","async","5","$","extend","expr","focusable","index","selector","is","6","obj","_twiggy","_twiggy2","__esModule","ajaxCache","ajaxPattern","element","options","endpoint","pattern","renderPattern","patternTransform","transform","self","this","$element","updatePattern","getPatternData","then","patternData","isEmptyObject","console","error","fail","template","renderAsync","markup","html","trigger","getPatternPath","pathParts","namespace","patternPath","join","patternPaths","type","cache","dataType","jqXHR","textStatus","errorThrown","fn","MassAjaxPattern","each","defaults","./twiggy","7","_getHandlebarTemplate2","_interopRequireDefault","_sticky2","_getElementOuterHtml2","moment","transformTag","tag","label","svg","getSvgFromTag","id","find","siblings","hasFilter","filters","some","filter","hasOwnProperty","getFilterValues","map","transformActiveTagsData","args","filterData","clearedFilter","resultsHeading","tags","formData","paginateItems","items","max","page","pageTotal","item","isActive","totalPages","clearListingPage","listing","parent","makeAllActive","filterDataByTags","haystack","every","v","Boolean","keys","indexOf","filterDataByDateTags","filterStart","filterEnd","start","end","isSameOrAfter","isSameOrBefore","isSame","isEventInDateRange","paginated","maxItems","renderListingPage","warn","selectors","forEach","append","focus","row","first","eq","init","transformPaginationData","targetPage","pages","push","text","toString","active","pagination","prev","disabled","next","currentPage","transformResultsHeading","totalActive","firstItem","Number","lastItem","totalResults","numResults","filterListingData","sortDataAlphabetically","sort","b","nameA","title","toUpperCase","nameB","sortDataByDate","dateType","dateA","dateB","isBefore","isAfter","geocodeAddressString","address","callback","geocoder","geocode","results","status","google","maps","GeocoderStatus","OK","place","geocodePlaceId","place_id","placeId","calculateDistance","lat1","lon1","lat2","lon2","unit","radlat1","Math","PI","radlat2","theta","radtheta","dist","sin","cos","acos","transformListing","compiledTemplate","listingMarkup","itemData","val","tagsData","tagsFormatted","assign","itemTransform","makeMoment","startTimestamp","endTimestamp","../helpers/getElementOuterHtml.js","../helpers/getHandlebarTemplate.js","../helpers/sticky.js","8","_cssControlCode","_cssControlCode2","$elParent","elWidth","lowerLimit","upperLimit","runCode","updateData","newRunCode","removeAttr","height","width","offset","top","outerHeight","setPosition","attr","windowTop","scrollTop","middle","bottom","css","offsetParent","setTimeout","resize","scroll","../helpers/cssControlCode.js","9","calculateTruncation","get","getBoundingClientRect","$p","style","lineHeight","parseInt","paddingTop","lineLimit","matchMedia","matches","thresholdHeight","truncatedHeight","intrinsicHeight","children","$button","$fadeOverlay","$focusableEls","truncationPreviouslyCalculated","toggleText","toggleLabel","bind","toggleTabindexes","expanded","enableTruncation","addClass","$contents","prepend","on","toggleClass","hasClass","oldText","trim","oldLabel","one","wrapInner","initTruncation","resizeTimeout","truncateResize","removeClass","detach","off","removeTruncation","clearTimeout","10","Twig","resolveTwigPath","patternName","getIconPath","iconPath","extendFunction","twig","href","render","Promise","resolve","reject","allowInlineIncludes","namespaces","base","atoms","molecules","organisms","meta","load","11","./helpers/jQueryExtend.js","./helpers/jQueryExtend_ajaxPattern.js","./modules/accordions.js","./modules/activateBodyTextTruncation.js","./modules/ajaxPattern.js","./modules/ajaxPatternOverride.js","./modules/back2top.js","./modules/clickable.js","./modules/contactAccordion.js","./modules/dropdown.js","./modules/emergencyAlerts.js","./modules/eventFilters","./modules/eventListingInteractive","./modules/feedbackForm.js","./modules/footnote.js","./modules/formInputs.js","./modules/formValidation.js","./modules/googleMap.js","./modules/headerTags.js","./modules/hideAlert.js","./modules/imageFill.js","./modules/inlineOverlay.js","./modules/inpageAlert.js","./modules/keywordSearch.js","./modules/linkListToggle.js","./modules/locationFilters.js","./modules/locationListing.js","./modules/mainNav.js","./modules/orgSelector.js","./modules/organizationNavigation.js","./modules/pagination.js","./modules/pikaday.js","./modules/preventHorizontalListWidows.js","./modules/relatedOrgsAndTopics.js","./modules/responsiveTable.js","./modules/responsiveVideo.js","./modules/resultsHeading.js","./modules/scrollAnchors.js","./modules/stickyTOC.js","./modules/teaserListingGroup","./modules/truncateTitle.js","./modules/utilNav.js","12","$link","$content","$status","open","stop","slideDown","preventDefault","slideUp","temp","apply","$context","offsetIndex","13","_truncateBodyText","_truncateBodyText2","../helpers/truncateBodyText","14","15","ajaxData","emergencyAlerts","alerts","these","are","16","animate","17","click","event","dest","location","18","$columns","$sets","19","dropdownMenu","querySelectorAll","_loop","parentEl","selectEl","querySelector","link","onchange","elem","selectedIndex","srcElement","innerText","20","_cookies","_cookies2","cookieName","cookieValue","../helpers/cookies.js","21","$locationFilterParent","$locationFilter","locationInput","getElementById","swLat","swLng","neLat","neLng","bounds","LatLngBounds","LatLng","strictBounds","types","componentRestrictions","country","fields","autocomplete","places","Autocomplete","$form","$place","$dateStart","$dateEnd","$tags","prop","clearForm","clearDeactivatedFilter","submit","$location","dateRange","startDate","endDate","useToday","format","getFormData","22","_listing","_listing2","transformData","transformation","promise","Deferred","transformReturn","filteredData","sortedData","autocompletePlace","getPlace","Geocoder","result","sortDataAroundPlace","lat","geometry","lng","key","distance","position","$resultsHeading","$pagination","$eventFilter","rawData","eventListingInteractive","masterData","handlePagination","target","nextPage","updateChildComponents","listArray","eventListing","events","masterListing","masterListingMarkup","date","endDay","ceil","getMasterListingWithMarkup","populateMasterDataSource","formValues","done","defaultPage","params","URLSearchParams","search","history","state","../helpers/listing.js","23","$feedbackForm","$fields","$textArea","$contactForm","$loadRadios","$contactRadios","$Response","$noResponseLink","$alertToggle","foundIndicator","contactGroup","$submitButton","closest","24","$messageLink","clone","$rtelink","isMobile","getPosition","$target","pos","headerHeight","navHeight","scrollTo","25","maxlength","remaining","message","wrap","inArray","keyCode","ctrlKey","metaKey","shiftKey","$plus","$minus","26","validate","arguments","valid","match","requiredFields","$errorList","$field","submitForm","addError","27","_getHandlebarTemplate","googleMapData","mapsInitialized","checkForGoogleMaps","setInterval","clearInterval","stopChecking","markers","mapData","scrollwheel","Map","initializedMarkers","markerData","infoWindow","sanitizeText","marker","Marker","infoData","phoneFormatted","formatPhone","phone","faxFormatted","fax","infoTransform","InfoWindow","content","markerBouncing","addListener","hideInfo","showInfo","close","bounce","setAnimation","Animation","BOUNCE","initMarkers","addMarkersToMap","addListenerOnce","role","tabindex","aria-label","ev","which","markerIndex","_i","_i2","setMap","removeMarkersFromMap","dataMarkers","setZoom","updateMapByMarkers","potentialHTML","substring","fitBounds","28","$showHideButton","$dynamicItems","$focusItem","show","hide","$tagWrapper","$buttonCounter","$hiddenTag","$focusTag","tagCount","$tagState","toggle","$tagStateText","_","windowWidth","29","fadeIn","fadeOut","30","sidebarHeight","debounceTimer","mediaWidth","wrapperWidth","$thisMedia","31","feedbackButton","toggleOverlay","$containerEl","isOpen","parents","floor","random","initialize","keydown","32","$pageAlert","33","34","$thisList","$thisToggle","$thisToggleLabel","$listItem","listItems","showToggle","thisToggleText","$item","35","populateFormData","isFormSubmit","getParameterFromUrl","pageNum","set","delete","tagFilters","pushState","origin","pathname","pushFilterState","param","$resultHeading","36","reasonable_formatted_location","getActiveMarkers","spherical","computeDistanceBetween","$mapCol","$map","locationListing","promosArray","imagePromos","getMasterListingWithMarkupAndMarkers","getPage","stopImmediatePropagation","currentTarget","resetValues","37","body","clientWidth","menuButton","menuButtonText","textContent","menuItems","menuOverlay","searchForm","closeMenu","classList","remove","setAttribute","openMenu","add","closeSubMenus","thisSibling","parentNode","firstChild","nodeType","Node","ELEMENT_NODE","nextElementSibling","nextSibling","contains","opacity","addEventListener","innerWidth","itemButton","subMenu","subItems","subMenuItems","pointerEvents","removeAttribute","clientHeight","getElementsByTagName","parentElement","subItem","prevSib","previousElementSibling","nextSib","debouncer","onresize","38","orgSelector","$select","$placeholder","renderTemplate","organizations","change","39","$orgNav","$orgNavItems","$menuWrapper","$pageWrapper","$newsLink","$eventsLink","$locationsLink","$relatedOrgs","$mobileToggle","$orgNavSearchForm","$orgNavSearchInput","$searchToggle","$menuButton","$sectionButton","bannerBottom","menuHeight","orgWindowTop","$buttonLabel","searchAction","searchParams","$buttonParent","$thisMenu","$otherMenus","not","keyup","$buttonClone","prependTo","$seeAll","appendTo","$contactGroups","slice","wrapAll","unwrap","40","targetPageNumber","has","pushPaginationState","onpopstate","truncatedPagination","current","last","delta","left","right","range","rangeWithEllipsis","l","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","return","truncatePaginationDisplay","unwrapperMarkup","parseHTML","renderPagination","replaceState","../helpers/twiggy","41","restrict","picker","Pikaday","field","setMaxDate","setMinDate","42","preventWidows","$list","$items","Array","from","childNodes","node","itemCount","itemStyle","itemWidth","parseFloat","marginLeft","paddingLeft","paddingRight","marginRight","listStyle","listWidth","borderLeft","borderRight","itemsPerRow","preventWidowsForever","timeout","$horizontalLists","43","$thisWrapper","$toggleButton","44","$window","responsiveTables","setWidths","rt","$table","$stickyHeader","initializeTable","reset","$thead","hasThead","theadHeight","isNestedThead","hasTh","canScroll","offsetHeight","after","tableLeft","getAdditionalOffset","scrollLeft","margin","$root","headerStuck","scrollStuck","recalcScrollbar","handleTableScroll","checkVisibility","tableWrapper","getElementsByClassName","scrollbar","scrollWidth","offsetWidth","additionalOffset","documentElement","$jsStickyHeader","elementTop","windowBottom","elementBottom","tableBottom","stuckTop","stuckBottom","headerBottom","handleScrollerClick","$scrollContainer","posX","midpoint","clickpoint","pageX","abs","handleScrollerInteraction","initialPosition","pageY","handleMouseMove","newPosition","handleMouseUp","tableWidth","tableContainerWidth","scrollbarContainerWidth","scrollbarWidth","buttonWidth","$scrollbar","$scrollbarIndicator","skip","_this","scrollPercent","scrollable","className","elements","currentScrollLeft","stopPropagation","45","fitvids","46","renderResultsHeading","47","$titleLink","$links","elHeight","headerBuffer","activeAnchorIndex","anchors","numAnchors","linkScrolling","setVariables","topOffset","hasAttribute","mobileTitleOn","mobileTitleOff","hash","activateLink","innerHeight","currentAnchor","48","toc","tocContent","tocParent","dataset","tocSections","headings","sections","links","tocSectionCount","additionalCount","totalSections","toLowerCase","tocColumn","stickyToc","minSectionsToShow","stuckOverlay","stuckNav","stuckMenu","pauseScroll","handleResize","heading","display","menuToggle","focusSwitch","section","sectionId","sectionTitle","tocLink","insertBefore","tocButton","popupLabel","getAttribute","button","pageYOffset","docHeight","scrollHeight","stickyNavDemensions","stickyNavActive","stuckNavDemensions","stuckNavBottom","lastHeading","reverse","behavior","menuCopy","lastChild","49","$toggle","$sections","hiddenClass","ready","totalShown","teaserItems","$section","totalTeaserItems","hiddenItems","50","$this","$thisParent","thisTitle","truncatedTitle","substr","min","lastIndexOf","51","resize_timeout","$panels","$mobileLogins","$utilityButtons","$mobileUtilityNav","$mobileLanguageSelect","$stateOrgs","$logInto","$panel","$closeButton","$loopStart","log","$thisButton","$thisPanel"],"mappings":"CAAA,SAAAA,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,IAAAE,EAAA,mBAAAC,SAAAA,QAAA,IAAAF,GAAAC,EAAA,OAAAA,EAAAF,GAAA,GAAA,GAAAI,EAAA,OAAAA,EAAAJ,GAAA,GAAA,IAAAK,EAAA,IAAAC,MAAA,uBAAAN,EAAA,KAAA,MAAAK,EAAAE,KAAA,mBAAAF,EAAA,IAAAG,EAAAX,EAAAG,GAAA,CAAAS,QAAA,IAAAb,EAAAI,GAAA,GAAAU,KAAAF,EAAAC,SAAA,SAAAd,GAAA,OAAAI,EAAAH,EAAAI,GAAA,GAAAL,IAAAA,KAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,OAAAD,EAAAG,GAAAS,QAAA,IAAA,IAAAL,EAAA,mBAAAD,SAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,IAAA,OAAAD,EAAA,CAAA,CAAAa,EAAA,CAAA,SAAAT,EAAAU,EAAAJ,GCCA,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,QCPQ,SAASC,EAAQC,EAAUC,GAqBzC,MAAO,CACLC,UAnBF,SAAmBC,EAAMN,EAAOO,GAC9B,GAAuB,iBAAbA,EAAuB,CAC/B,IAAIC,EAAI,IAAIC,KACZD,EAAEE,QAAQF,EAAEG,UAAqB,GAARJ,EAAW,GAAG,GAAG,KACtCA,EAAU,WAAWC,EAAEI,cAC3BT,EAASU,OAASP,EAAO,IAAMN,EAAQ,KAAOO,EAAU,gBAExDJ,EAASU,OAASP,EAAO,IAAMN,EAAQ,YAazCc,UARF,SAAmBR,GACjB,IACIS,GADQ,KAAOZ,EAASU,QACVG,MAAM,KAAOV,EAAO,KACtC,GAAoB,GAAhBS,EAAMpB,OAAa,OAAOoB,EAAME,MAAMD,MAAM,KAAKE,UAlBzC,CA0BbhB,OAAQC,WDOT,IAAIgB,EAAE,CAAC,SAAShC,EAAQU,EAAOJ,GACjC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAMTP,EAAQQ,QExCO,SAACmB,GACd,IAAIpB,EAAQ,OACZ,IACEA,EAAQE,OAAOmB,iBAAiBD,EAAI,GAAI,WAAWE,iBAAiB,WAAWC,QAAQ,MAAO,IAC9F,MAAMC,IACR,MAAiB,UAAVxB,IF2CP,IAAIyB,EAAE,CAAC,SAAStC,EAAQU,EAAOJ,GACjC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,QGlDO,SAAUyB,GACvB,GAAIA,EAAGC,UACL,OAAOD,EAAGC,UAGV,IAAIC,EAAYzB,SAAS0B,cAAc,OAEvC,OADID,EAAUE,YAAYJ,EAAGK,WAAU,IAChCH,EAAUI,YHqDnB,IAAIC,EAAE,CAAC,SAAS9C,EAAQU,EAAOJ,GACjC,aIrEAI,EAAOJ,QAAU,SAASa,GAaxB,YAZ6BF,IAAzB8B,WAAWC,gBAA0D/B,IAA/B8B,WAAWC,UAAU7B,IAC3D8B,OAAOC,KAAK,CACRC,IAAMC,GAAGC,UAAY,iBAAmBlC,EAAO,QAC/CmC,QAAU,SAASC,QACctC,IAAzB8B,WAAWC,YACXD,WAAWC,UAAY,IAE3BD,WAAWC,UAAU7B,GAAQ4B,WAAWS,QAAQD,IAEpDE,OAAQ,IAGTV,WAAWC,UAAU7B,KJ0E5B,IAAIuC,EAAE,CAAC,SAAS1D,EAAQU,EAAOJ,GACjC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,QK9FQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAC1C0C,EAAEC,OAAOD,EAAEE,KAAK,KAAM,CAGpBC,UAAW,SAASvB,EAAIwB,EAAOC,GAC7B,OAAOL,EAAEpB,GAAI0B,GAAG,oCALN,CAQblD,OAAOC,SAASiC,SLgGjB,IAAIiB,EAAE,CAAC,SAASlE,EAAQU,EAAOJ,GACjC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IM5GT,INmHgCsD,EMnHhCC,EAAApE,EAAA,YNiHIqE,GAE4BF,EAFMC,IAEeD,EAAIG,WAAaH,EAAM,CAAErD,QAASqD,GAEvF7D,EAAQQ,QMnHQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAM1C,IAAIsD,EAAY,GAIZC,EAAc,SAASC,EAASC,GAClC,IAAIC,EAAWD,EAAQC,SACjBC,EAAUF,EAAQG,cACpBC,EAAmBJ,EAAQK,UAC3BC,EAAOC,KACPC,EAAWvB,EAAEc,GA+FjB,OA1FAO,EAAKG,cAAgB,WACnBH,EAAKI,iBACFC,MAAK,SAAUC,GASd,GAPIR,GAAgD,mBAArBA,IAC7BQ,EAAcR,EAAiBQ,KAM7B3B,EAAE4B,cAAcD,GAIpB,IACEN,EAAKH,cAAcD,EAAQU,GAE7B,MAAO7F,GACL+F,QAAQC,MAAMhG,OAGjBiG,MAAK,WACJF,QAAQC,MAAM,mDAAoDd,OAYxEK,EAAKH,cAAgB,SAASD,EAAQrB,GACpC,OAAO,EAAAc,EAAAvD,SAAO8D,GACTS,MAAK,SAAAM,GAAA,OAAYA,EAASC,YAAYrC,MACtC8B,MAAK,SAAAQ,GACJX,EAASY,KAAKD,GACZlC,EAAE3C,GAAU+E,QAAQ,wBAAyB,CAAC,CAACxD,GAAM2C,SAa/DF,EAAKgB,eAAiB,SAASpB,GAC7B,IAAIqB,EAAYrB,EAAQ/C,MAAM,KAC1BqE,EAAYD,EAAUlE,QACtBoE,EAAcF,EAAUG,KAAK,KAEjC,OAAOhD,GAAGiD,aAAaH,GAAaC,GAStCnB,EAAKI,eAAiB,WACpB,IAAKT,EAEH,MAAM,IAAIxE,MAAM,sDAIlB,OAAIoE,EAAUI,GACLJ,EAAUI,GAIZJ,EAAUI,GAAYhB,EAAET,KAAK,CAChCoD,KAAM,MACNnD,IAAKwB,EACL4B,OAAO,EACPC,SAAU,SACXd,MAAK,SAASe,EAAOC,EAAYC,GAChCnB,QAAQC,MAAM,gCAAiCkB,OAIrD3B,EAAKG,iBACE,GAOTxB,EAAEiD,GAAGC,gBAAkB,SAASnC,GAE9B,OAAOO,KAAK6B,MAAK,SAASjH,EAAG0C,GAC3B,IAAI2C,EAAWvB,EAAEpB,GAEjB,IAAI2C,EAAS3B,KAAK,kBAAlB,CAGA,IAAIA,EAAO,IAAIiB,EAAYS,KAAMP,GACjCQ,EAAS3B,KAAK,iBAAkBA,QAMpCI,EAAEiD,GAAGC,gBAAgBE,SAAW,CAC9BpC,SAAU,GACVC,QAAS,GACTG,eAvIY,GAAA,CAyIbhE,OAAOC,SAASiC,SNiHjB,CAAC+D,WAAW,KAAKC,EAAE,CAAC,SAASjH,EAAQU,EAAOJ,GAC9C,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IOhQT,IPqQIqG,EAAyBC,EOrQ7BnH,EAAA,uCPyQIoH,EAAWD,EOxQfnH,EAAA,yBP4QIqH,EAAwBF,EO3Q5BnH,EAAA,sCP6QA,SAASmH,EAAuBhD,GAAO,OAAOA,GAAOA,EAAIG,WAAaH,EAAM,CAAErD,QAASqD,GAEvF7D,EAAQQ,QO7QQ,SAASC,EAAQC,EAAUC,EAAW0C,EAAG2D,GA2LvD,SAASC,EAAaC,GACpB,MAAO,CACLC,MAAOD,EAAIC,MACXC,IAAKC,EAAcH,EAAII,KAa3B,SAASD,EAAcH,GAKrB,OAAO,EAAAH,EAAAvG,SAAa6C,EAAE,sBAAsBkE,KAAK,IAAML,GAAKM,SAAS,OAAO,IAa9E,SAASC,EAAUC,EAAS1B,GAC1B,OAAO0B,EAAQC,MAAK,SAAUC,GAC5B,OAAOA,EAAOC,eAAe,SAAWD,EAAA,OAAmB5B,KAe/D,SAAS8B,EAAgBJ,EAAS1B,GAChC,OAAO0B,EAAQE,QAAO,SAAS3E,GAC7B,OAAOA,EAAK+C,OAASA,KACpB+B,KAAI,SAAS9E,GACd,OAAOA,EAAK1C,SAiChB,SAASyH,EAAwBC,GAC/B,OAAIA,EAAKC,WAAWL,eAAe,kBAgCX5E,EA/BEgF,EAAKhF,KAiCE,SAFHiF,EA/BOD,EAAKC,YAiC3BC,cACClF,EAAKmF,eAAeC,KAEnBT,QAAO,SAAUV,GAC9B,OAAOA,EAAI3G,QAAU2H,EAAWC,cAAc5H,SAKzC,IAvCA0H,EAAKC,WAAWI,SA4B3B,IAA0BrF,EAAMiF,EA4BhC,SAASK,EAAcC,EAAOC,GAC5B,IAAIC,EAAO,EACPC,EAAY,EAgBhB,MAAO,CACLH,MAhBmBA,EAAMT,KAAI,SAASa,GAYtC,OAXIA,EAAKC,WACHF,EAAYF,EACdG,EAAKF,KAAOA,GAGZA,GAAQ,EACRC,EAAY,EACZC,EAAKF,KAAOA,GAEdC,GAAa,GAERC,KAKPE,WAAYJ,GAKhB,SAASK,EAAiBC,EAASC,GACjC5F,EAAE2F,GAASzB,KAAK0B,GAAQzD,KAAK,IA+H/B,SAAS0D,EAAcjG,GAKrB,OAJAA,EAAKuF,MAAQvF,EAAKuF,MAAMT,KAAI,SAASa,GAEnC,OADAA,EAAKC,UAAW,EACTD,KAEF3F,EAeT,SAASkG,EAAiBd,EAAMpF,GAO9B,OALAA,EAAKuF,MAAQvF,EAAKuF,MAAMT,KAAI,SAASa,GAuBvC,IAA6BQ,EArBzB,OADAR,EAAKC,UAsBoBO,EAtBWR,EAAK3F,KAAKoF,KAAMA,EAuBxCgB,OAAM,SAASC,GAC3B,OAAOC,QAAQH,EAASxB,QAAO,SAASgB,GAItC,OAA8E,IAAvEvI,OAAOmJ,KAAKZ,GAAMb,KAAI,SAASxI,GAAK,OAAOqJ,EAAKrJ,MAAOkK,QAAQH,MACrEpJ,YA5BI0I,KAGF3F,EA4JT,SAASyG,EAAqBrB,EAAMpF,GAClCA,EAAKuF,MAAQvF,EAAKuF,MAAMT,KAAI,SAASa,GAEnC,OADAA,EAAKC,SAqBT,SAA4BD,EAAMP,GAChC,IAAIsB,EAAc,GACdC,EAAY,GAOhB,OALAvB,EAAKN,KAAI,SAASb,GACA,aAAZA,EAAIlB,OAAuB2D,EAAc3C,EAAOE,EAAI2C,MAAO,cAC/C,aAAZ3C,EAAIlB,OAAuB4D,EAAY5C,EAAOE,EAAI4C,IAAK,iBAGzDF,GAAaD,KACRf,EAAKiB,MAAME,cAAcJ,EAAa,SAAUf,EAAKiB,MAAMG,eAAeJ,EAAW,UAGrFhB,EAAKiB,MAAMI,OAAON,EAAa,OAlCtBO,CAAmBtB,EAAMP,GAClCO,KAET,IAAIuB,EAAY5B,EAActF,EAAKuF,MAAOvF,EAAKmH,UAG/C,OAFAnH,EAAKuF,MAAQ2B,EAAU3B,MACvBvF,EAAK6F,WAAaqB,EAAUrB,WACrB7F,EAgCT,MAAO,CACLoH,kBAvrBF,SAA2BpC,GACzB,IAAIA,EAAKhF,KAAK4E,eAAe,aAyB3B,OADA3C,QAAQoF,KAAK,uDACN,EAxBPvB,EAAiBd,EAAKhF,KAAKsH,UAAUpI,UAAW8F,EAAKhF,KAAKsH,UAAUtB,QACpE,IAAItH,EAAM0B,EAAE4E,EAAKhF,KAAKsH,UAAUpI,WAAWoF,KAAKU,EAAKhF,KAAKsH,UAAUtB,QAChEP,EAAOT,EAAKS,KAAOT,EAAKS,KAAO,EAEnCT,EAAKhF,KAAKuF,MAAMgC,SAAQ,SAAU5B,GAC5BA,EAAKC,UAAYD,EAAKF,OAASA,GACjC/G,EAAI8I,OAAO7B,EAAKrD,WAIhB0C,EAAKyC,OAEa/I,EAAI4F,KAAKU,EAAKhF,KAAKsH,UAAUI,KAAKC,QAEtBrD,KAAK,cAAcsD,GAAG,GAC1CH,QAGVzC,EAAKhF,KAAKsH,UAAU1C,eAAe,QAAUI,EAAKhF,KAAKsH,UAAUxC,KACnEjB,EAAAtG,QAAOsK,KAAKzH,EAAE4E,EAAKhF,KAAKsH,UAAUxC,OAmqBtCgD,wBA5oBF,SAAiC9C,GAM/B,IALA,IAAIhF,EAAOgF,EAAKhF,KACZ+H,EAAa/C,EAAK+C,WAAa/C,EAAK+C,WAAa,EACjDlC,EAAa7F,EAAK6F,WAClBmC,EAAQ,GAEH1L,EAAI,EAAGA,GAAKuJ,EAAYvJ,IAC/B0L,EAAMC,KAAK,CACTC,KAAM5L,EAAE6L,WACRC,OAAQ9L,IAAMyL,IAkBlB,OAdA/H,EAAKqI,WAAWC,KAAO,CACrBJ,KAAM,WACNK,SAAyB,IAAfR,GAGZ/H,EAAKqI,WAAWG,KAAO,CACrBN,KAAM,OACNK,SAAUR,IAAelC,GAG3B7F,EAAKqI,WAAWL,MAAQA,EACxBhI,EAAKqI,WAAWI,YAAcV,EAC9B/H,EAAKqI,WAAWxC,WAAaA,EAEtB7F,EAAKqI,YAknBZK,wBAnmBF,SAAiC1D,GAC/B,IAAIU,EAAY,EACZiD,EAAc,EACdlD,EAAOT,EAAKS,KAAOT,EAAKS,KAAO,EAC/BzF,EAAOgF,EAAKhF,KACZmF,EAAiBnF,EAAKmF,eAG1BnF,EAAKuF,MAAMT,KAAI,SAASa,GAClBA,EAAKC,WACP+C,GAAe,EACXhD,EAAKF,OAASA,IAChBC,GAAa,OAMnB,IAAIkD,EAAaC,OAAO7I,EAAKmH,UAAY0B,OAAOpD,IAAUoD,OAAO7I,EAAKmH,UAAY,GAC9E2B,EAAWF,GAAaC,OAAOnD,GAAa,GAKhD,OAHAP,EAAe4D,aAAeJ,EAC9BxD,EAAe6D,WAAaJ,EAAY,MAAQE,EAEzC3D,GA4kBP8D,kBAtVF,SAA2BjJ,EAAMiF,GAE/B,IAAIR,EAAUM,EAAwB,CAAC/E,KAAMA,EAAMiF,WAAYA,IAK/D,OAHAjF,EAAKmF,eAAeC,KAAOX,EAGvBD,EAAUC,EAAS,OAIdyB,EAFIrB,EAAgBJ,EAAS,OAENzE,GAI5BwE,EAAUC,EAAS,aACdgC,EAAqBhC,EAASzE,GAKhCiG,EAAcjG,IAkUrBwE,UAAAA,EACAK,gBAAAA,EACAqB,iBAAAA,EACAO,qBAAAA,EACA1B,wBAAAA,EACAO,cAAAA,EACAQ,iBAAAA,EACAoD,uBA7TF,SAAgClJ,GAC9B,IAQIkH,EAAY5B,EARJtF,EAAKuF,MAAM4D,MAAK,SAASxM,EAAGyM,GACtC,IAAIC,EAAQ1M,EAAEqD,KAAKsJ,MAAMpB,KAAKqB,cAC1BC,EAAQJ,EAAEpJ,KAAKsJ,MAAMpB,KAAKqB,cAG9B,OAAQF,EAAQG,GAAU,EAAKH,EAAQG,EAAS,EAAI,KAGjBxJ,EAAKmH,UAG1C,OAFAnH,EAAKuF,MAAQ2B,EAAU3B,MACvBvF,EAAK6F,WAAaqB,EAAUrB,WACrB7F,GAkTPyJ,eA7FF,SAAwBzJ,EAAM0J,GAC5B,IAAI3G,EAAO2G,GAAsB,QAC7BC,EAAQ,GACRC,EAAQ,GAmBR1C,EAAY5B,EAlBJtF,EAAKuF,MAAM4D,MAAK,SAASxM,EAAGyM,GACzB,QAATrG,GACF4G,EAAQhN,EAAEiK,MACVgD,EAAQR,EAAExC,QAGV+C,EAAQhN,EAAEkK,IACV+C,EAAQR,EAAEvC,KAGZ,IAAIwC,EAAQ1M,EAAEqD,KAAKsJ,MAAMpB,KAAKqB,cAC1BC,EAAQJ,EAAEpJ,KAAKsJ,MAAMpB,KAAKqB,cAI9B,OAAQI,EAAME,SAASD,EAAO,WAAc,EAAKD,EAAMG,QAAQF,EAAO,UAAa,EAAKP,EAAQG,GAAU,EAAKH,EAAQG,EAAS,EAAI,KAGjGxJ,EAAKmH,UAG1C,OAFAnH,EAAKuF,MAAQ2B,EAAU3B,MACvBvF,EAAK6F,WAAaqB,EAAUrB,WACrB7F,GAqEP+J,qBArSF,SAA8BC,EAASC,QAEV,IAAhBpK,GAAGqK,UAKdrK,GAAGqK,SAASC,QAAQ,CAACH,QAASA,IAAU,SAAUI,EAASC,GACzD,GAAIA,IAAWC,OAAOC,KAAKC,eAAeC,GAAI,CAC5C,IAAIC,EAASN,EAAQ,GACrB,OAAOH,EAASS,GAGhBzI,QAAQoF,KAAK,wDAA0DgD,OAyR3EM,eAzQF,SAAwBC,EAAUX,QAEL,IAAhBpK,GAAGqK,UAKdrK,GAAGqK,SAASC,QAAQ,CAAEU,QAAWD,IAAW,SAASR,EAASC,GAC5D,GAAIA,IAAWC,OAAOC,KAAKC,eAAeC,GAAI,CAC5C,IAAIC,EAASN,EAAQ,GACrB,OAAOH,EAASS,GAGhBzI,QAAQoF,KAAK,wDAA0DgD,OA6P3EpE,cAAAA,EACA6E,kBApKF,SAA2BC,EAAMC,EAAMC,EAAMC,EAAMC,GACjD,IAAIC,EAAUC,KAAKC,GAAKP,EAAK,IACzBQ,EAAUF,KAAKC,GAAKL,EAAK,IAGzBO,GAFUH,KAAKC,GACLD,KAAKC,GACPN,EAAKE,GACbO,EAAWJ,KAAKC,GAAKE,EAAM,IAC3BE,EAAOL,KAAKM,IAAIP,GAAWC,KAAKM,IAAIJ,GAAWF,KAAKO,IAAIR,GAAWC,KAAKO,IAAIL,GAAWF,KAAKO,IAAIH,GAWpG,OARAC,EAAc,IADdA,EAAc,KADdA,EAAOL,KAAKQ,KAAKH,IACCL,KAAKC,IACJ,OAEN,MAATH,IACFO,GAAc,UAEH,MAATP,IACFO,GAAc,OAETA,GAmJPI,iBA5kBF,SAA0B/F,EAAS3D,GAEjC,IAAI2J,GAAmB,EAAApI,EAAApG,SAAY6E,GAC/B4J,EAAgB,GAKpB,OAJAjG,EAAQwB,SAAQ,SAAUvH,EAAMQ,GAC9B,IAAIyL,EAgBR,SAAuBtG,GAErB,IAAIP,EAAO,GAEXhF,EAAE0E,IAAIa,EAAKP,MAAM,SAAS8G,EAAK1L,GAC7B4E,EAAK5E,GAAS0L,KAGhBvG,EAAKP,KAAOA,EAEZ,IAAI+G,EAAW,CACbC,cAAezG,EAAKP,KAAKN,IAAId,IAE/B,OAAO5G,OAAOiP,OAAO,GAAI1G,EAAMwG,GA7BdG,CAActM,GAC7BgM,EAAcxL,GAASuL,EAAiBE,MAEnCD,GAqkBPO,WAxIF,SAAoBvH,GAgBlB,OAAIA,EAAKJ,eAAe,SAAyB,UAAdI,EAAKjC,KAC/BgB,EAAOiB,EAAKhF,KAAKwM,eAAgB,gBAGtCxH,EAAKJ,eAAe,SAAyB,QAAdI,EAAKjC,QAC/BiC,EAAKhF,KAAKyM,aAAe1I,EAAOiB,EAAKhF,KAAKyM,aAAc,aAAe,MAxmBpE,CA8tBbjP,OAAQC,SAAUC,EAAWgC,OAAQqE,SPwQtC,CAAC2I,oCAAoC,EAAEC,qCAAqC,EAAEC,uBAAuB,IAAIC,EAAE,CAAC,SAASpQ,EAAQU,EAAOJ,GACtI,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IQ9+BT,IRq/BgCsD,EQr/BhCkM,EAAArQ,EAAA,gCRm/BIsQ,GAE4BnM,EAFckM,IAEOlM,EAAIG,WAAaH,EAAM,CAAErD,QAASqD,GAEvF7D,EAAQQ,QQr/BQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAC1C,IAAIgB,OAAA,EACFsO,OAAA,EAEAC,OAAA,EACAC,OAAA,EACAC,OAAA,EAEAC,GAAU,EA2BZ,SAASC,IACP,IAAIC,GAAa,EAAAP,EAAAxP,SAAYmB,GAE1B0O,IAAYE,GACb5O,EAAI6O,WAAW,UAGjBH,EAAUE,KAMVF,EAAUE,EACC5O,EAAI8O,SACfP,EAAUD,EAAUS,QACpBN,EAAaH,EAAUU,SAASC,IAChCT,EAAaC,EAAaH,EAAUY,aAAY,GAAQlP,EAAI8O,SAE5D9O,EAAI+O,MAAMR,IAGZ,SAASY,IACP,IAAIT,EAEF,OADA1O,EAAIoP,KAAK,cAAc,QAChB,EAGT,IAAIC,EAAY3N,EAAE5C,GAAQwQ,YACtBF,EAAOpP,EAAIoP,KAAK,eAEhBG,EAAkB,WAATH,GAAqBC,EAAYb,GAAca,EAAYZ,EACpEe,EAAkB,WAATJ,GAAqBC,GAAab,EAF5B,QAATY,GAAkBC,GAAaZ,EAKvCzO,EAAIoP,KAAK,cAAc,OAEhBG,EACPvP,EAAIoP,KAAK,cAAc,UAEhBI,GACPxP,EAAIoP,KAAK,cAAc,UAI3B,MAAO,CAACjG,KAtER,SAAc3G,GAEZ8L,EAA6C,cAD7CtO,EAAMwC,GACU8E,SAASmI,IAAI,YAA6BzP,EAAIsH,SAAWtH,EAAIsH,SAASoI,eAGtF1P,EAAIoP,KAAK,cAAc,OAEvBT,IAGA7P,EAAO6Q,YAAW,WAChBhB,MACA,KAEFjN,EAAE5C,GAAQ8Q,QAAO,WACfjB,IACAQ,OAIFzN,EAAE5C,GAAQ+Q,QAAO,WACfV,SA/BU,CAkFbrQ,OAAOC,SAASiC,SRo/BjB,CAAC8O,+BAA+B,IAAIC,EAAE,CAAC,SAAShS,EAAQU,EAAOJ,GACjE,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,ISpkCT,IAAIoR,EAAuB,SAAStO,EAAG1B,GAErCA,EAAIiQ,IAAI,GAAGC,wBAGX,IAAIC,EAAKnQ,EAAI4F,KAAK,KAElBuK,EAAKA,EAAG5R,OAAS4R,EAAKnQ,EAGtB,IAAMoQ,EAAQtR,OAAOmB,iBAAiBkQ,EAAGF,IAAI,IACvCI,EAAaC,SAASF,EAAMC,YAC5BE,EAAaD,SAASF,EAAMG,YAI5BC,EAAY1R,OAAO2R,WAAW,sBAAsBC,QAAU,EAAI,EAExE1Q,EAAIsB,KAAK,CACPqP,gBAAkBN,EAAaG,EAAaD,EAC5CK,gBAAkBP,GAAcG,EAAY,GAAMD,EAClDM,gBAAiB7Q,EAAI8Q,SAAS,OAAOhC,WAInC9O,EAAIsB,KAAK,oCACXtB,EAAIsB,KAAK,CACPyP,QAASrP,EAAE,qGACXsP,aAActP,EAAE,4DAChBuP,cAAejR,EAAI4F,KAAK,iGACxBsL,gCAAgC,IAGlClR,EAAIsB,KAAK,WAAWA,KAAK,CACvB6P,WAAY,YACZC,YAAa,yBAGhBC,UAAKrS,EAAWgC,QAyBfsQ,EAAmB,SAASL,EAAeM,GAC1CA,EACDN,EAAcpM,MAAK,SAASjH,EAAG0C,GAC7B,IAAIN,EAAM0B,EAAEpB,GAITN,EAAIsB,KAAK,oBACVtB,EAAIoP,KAAK,WAAYpP,EAAIsB,KAAK,qBAE9BtB,EAAI6O,WAAW,eAInBoC,EAAcpM,MAAK,SAASjH,EAAG0C,GAC7B,IAAIN,EAAM0B,EAAEpB,GAGTN,EAAIoP,KAAK,aACVpP,EAAIsB,KAAK,mBAAoBtB,EAAIoP,KAAK,aAGxCpP,EAAIoP,KAAK,WAAY,UAQvBoC,EAAmB,SAASxR,GAI9B,GAHAgQ,EAAoBhQ,KAGjBA,EAAIsB,KAAK,mBAAqBtB,EAAIsB,KAAK,oBAA1C,CAKAtB,EAAIyR,SAAS,0BACbzR,EAAI8Q,SAAS,OAAOW,SAAS,oCAE7B,IAAMV,EAAU/Q,EAAIsB,KAAK,WAGnBoQ,EAAY1R,EAAI8Q,SAAS,OAG/B9Q,EAAI2R,QAAQZ,GACZW,EAAU5I,OAAO9I,EAAIsB,KAAK,iBAK1BgQ,EAAiBtR,EAAIsB,KAAK,kBAG1BoQ,EAAUjC,IAAI,SAAUzP,EAAIsB,KAAK,mBAAqB,MAEtDyP,EAAQa,GAAG,0BAA0B,WACnC5R,EAAI6R,YAAY,YAGhBH,EAAUjC,IAAI,SAAUzP,EAAIsB,KAAKtB,EAAI8R,SAAS,YAAc,kBAAmB,oBAG/E,IAAIC,EAAUhB,EAAQvH,OAAOwI,OAC7BjB,EAAQvH,KAAKuH,EAAQzP,KAAK,eAC1ByP,EAAQzP,KAAK,aAAcyQ,GAE3B,IAAIE,EAAWlB,EAAQ3B,KAAK,cAC5B2B,EAAQ3B,KAAK,aAAc2B,EAAQzP,KAAK,gBACxCyP,EAAQzP,KAAK,cAAe2Q,GAG5BX,EAAiBtR,EAAIsB,KAAK,iBAAkBtB,EAAI8R,SAAS,aAGtD9R,EAAI8R,SAAS,aACdJ,EAAUQ,IAAI,iBAAiB,WAC7BlS,EAAIsB,KAAK,iBAAiB4H,GAAG,GAAGpF,QAAQ,SACxC4N,EAAUzB,IAAI,GAAGX,UAAY,UT4lCrCjR,EAAQQ,QS7kCQ,SAAUC,EAAOC,EAAS2C,EAAE1B,IANvB,SAASA,GAC5BA,EAAImS,UAAU,eAEdX,EAAiBxR,GAIjBoS,CAAepS,GAEf,IAAIqS,GAAgB,EAChBC,EAAkB,SAAStS,IA3HV,SAASA,GAC5BA,EAAIuS,YAAY,mCAChBvS,EAAI8Q,SAAS,OAAOyB,YAAY,oCAAoC9C,IAAI,SAAU,QAE/EzP,EAAIsB,KAAK,oCACVtB,EAAIsB,KAAK,WAAWkR,SACpBxS,EAAIsB,KAAK,WAAWA,KAAK,CACvB6P,WAAY,YACZC,YAAa,uBAEfpR,EAAIsB,KAAK,WAAWkI,KAAK,aACzBxJ,EAAIsB,KAAK,WAAW8N,KAAK,aAAc,sBACvCpP,EAAIsB,KAAK,gBAAgBkR,SACzBlB,EAAiBtR,EAAIsB,KAAK,kBAAkB,IAG9CtB,EAAIsB,KAAK,WAAWmR,IAAI,qBA4GxBC,CAAiB1S,GACjBwR,EAAiBxR,IAChBqR,UAAKrS,EAAWgB,GAEnB0B,EAAE5C,GAAQ8S,GAAG,UAAU,WACrB9S,EAAO6T,aAAaN,GACpBA,EAAgBvT,EAAO6Q,WAAW2C,EAAgB,SAGnDjB,UAAKrS,EAAUF,OAAOC,SAASiC,ST8kChC,IAAI4R,GAAG,CAAC,SAAS7U,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CACzCO,OAAO,IAGXP,EAAQQ,QUzwCQ,SAASgU,EAAM1R,GAY3B,SAAS2R,EAAgBC,GACrB,IAAI/O,EAAY+O,EAAYnT,MAAM,KAC9BqE,EAAYD,EAAUlE,QACtBoE,EAAcF,EAAUG,KAAK,KAEjC,OAAOhD,EAAGiD,aAAaH,GAAaC,EAYxC,SAAS8O,EAAY9T,GACjB,OAAOiC,EAAG8R,SAAW,IAAM/T,EAAO,OAyBtC,OAnBA2T,EAAKK,eAAe,QAAQ,SAAShU,GAEjC,IAAIuG,EAAMoN,EAAKM,KAAK,CAChBC,KAAMJ,EAAY9T,GAClBsC,OAAO,IAGX,OAAOiE,EAAMA,EAAI4N,SAAW,MAYzB,SAAgBN,GACnB,OAAO,IAAIO,SAAQ,SAASC,EAASC,GACjCX,EAAKM,KAAK,CACNC,KAAMN,EAAgBC,GACtBU,qBAAqB,EACrBC,WAAY,CACRC,KAAQxS,EAAGiD,aAAa,SACxBwP,MAASzS,EAAGiD,aAAa,UACzByP,UAAa1S,EAAGiD,aAAa,cAC7B0P,UAAa3S,EAAGiD,aAAa,cAC7BrD,UAAaI,EAAGiD,aAAa,cAC7BkF,MAASnI,EAAGiD,aAAa,UACzB2P,KAAQ5S,EAAGiD,aAAa,UAE5B5C,OAAO,EACPwS,KAAMT,QAtEN,CA2EdV,KAAM1R,KV2wCN,IAAI8S,GAAG,CAAC,SAASlW,EAAQU,EAAOJ,GAClC,aWx1CAN,EAAA,6BACAA,EAAA,yCX+1CoBmH,EW91CpBnH,EAAA,6BXk2C4BmH,EWj2C5BnH,EAAA,qCXq2CmBmH,EWp2CnBnH,EAAA,4BXw2CmCmH,EWv2CnCnH,EAAA,4CX22CkBmH,EW12ClBnH,EAAA,2BX82CiBmH,EW72CjBnH,EAAA,0BXi3CkBmH,EWh3ClBnH,EAAA,2BXo3CyBmH,EWn3CzBnH,EAAA,kCXu3CiBmH,EWt3CjBnH,EAAA,0BX03CwBmH,EWz3CxBnH,EAAA,iCX63CqBmH,EW53CrBnH,EAAA,2BXg4CgCmH,EW/3ChCnH,EAAA,sCXm4CqBmH,EWl4CrBnH,EAAA,8BXs4CiBmH,EWr4CjBnH,EAAA,0BXy4CuBmH,EWx4CvBnH,EAAA,gCX44CmBmH,EW34CnBnH,EAAA,4BX+4CkBmH,EW94ClBnH,EAAA,2BXk5CsBmH,EWj5CtBnH,EAAA,+BXq5CkBmH,EWp5ClBnH,EAAA,2BXw5CoBmH,EWv5CpBnH,EAAA,6BX25CsBmH,EW15CtBnH,EAAA,+BX85CuBmH,EW75CvBnH,EAAA,gCXi6CwBmH,EWh6CxBnH,EAAA,iCXo6CwBmH,EWn6CxBnH,EAAA,iCXu6CgBmH,EWt6ChBnH,EAAA,yBX06CoBmH,EWz6CpBnH,EAAA,6BX66C+BmH,EW56C/BnH,EAAA,wCXg7CmBmH,EW/6CnBnH,EAAA,4BXm7CgBmH,EWl7ChBnH,EAAA,yBXs7CoCmH,EWr7CpCnH,EAAA,6CXy7CkBmH,EWv7ClBnH,EAAA,2BX27C6BmH,EW17C7BnH,EAAA,sCX87CwBmH,EW77CxBnH,EAAA,iCXi8CwBmH,EWh8CxBnH,EAAA,iCXo8CuBmH,EWn8CvBnH,EAAA,gCXu8CsBmH,EWt8CtBnH,EAAA,+BX08C2BmH,EWz8C3BnH,EAAA,iCX68CsBmH,EW58CtBnH,EAAA,+BXg9CmBmH,EW/8CnBnH,EAAA,4BXm9CgBmH,EWl9ChBnH,EAAA,yBXo9CA,SAASmH,EAAuBhD,GAAO,OAAOA,GAAOA,EAAIG,WAAaH,EAAM,CAAErD,QAASqD,KAErF,CAACgS,4BAA4B,EAAEC,wCAAwC,EAAEC,0BAA0B,GAAGC,0CAA0C,GAAGC,2BAA2B,GAAGC,mCAAmC,GAAGC,wBAAwB,GAAGC,yBAAyB,GAAGC,gCAAgC,GAAGC,wBAAwB,GAAGC,+BAA+B,GAAGC,yBAAyB,GAAGC,oCAAoC,GAAGC,4BAA4B,GAAGC,wBAAwB,GAAGC,0BAA0B,GAAGC,8BAA8B,GAAGC,yBAAyB,GAAGC,0BAA0B,GAAGC,yBAAyB,GAAGC,yBAAyB,GAAGC,6BAA6B,GAAGC,2BAA2B,GAAGC,6BAA6B,GAAGC,8BAA8B,GAAGC,+BAA+B,GAAGC,+BAA+B,GAAGC,uBAAuB,GAAGC,2BAA2B,GAAGC,sCAAsC,GAAGC,0BAA0B,GAAGC,uBAAuB,GAAGC,2CAA2C,GAAGC,oCAAoC,GAAGC,+BAA+B,GAAGC,+BAA+B,GAAGC,8BAA8B,GAAGC,6BAA6B,GAAGC,yBAAyB,GAAGC,+BAA+B,GAAGC,6BAA6B,GAAGC,uBAAuB,KAAKC,GAAG,CAAC,SAAS7Y,EAAQU,EAAOJ,GACv2C,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IYpgDT,IZ2gDgCsD,EY3gDhCkM,EAAArQ,EAAA,gCZygDIsQ,GAE4BnM,EAFckM,IAEOlM,EAAIG,WAAaH,EAAM,CAAErD,QAASqD,GAEvF7D,EAAQQ,QY3gDQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAkB1C,SAASmK,EAAKrH,GACZ,IAAI9B,EAAM0B,EAAEsB,MACR6T,EAAQ7W,EAAI4F,KAAK,sBACjBkR,EAAW9W,EAAI4F,KAAK,yBACpBmR,EAAU/W,EAAI4F,KAAK,wBACnBD,EAAKmR,EAAS1H,KAAK,OAAS,aAAetN,EAAQ,GACnD4H,GAAS,EAAA2E,EAAAxP,SAAYmB,GACrBgX,EAAOhX,EAAI8R,SAAS,WAExBgF,EAAS1H,KAAK,KAAMzJ,GACpBkR,EAAMzH,KAAK,gBAAgB4H,GAAM5H,KAAK,gBAAiBzJ,GAEpDqR,GAEDF,EAASG,MAAK,GAAK,GAAMC,YAG3BL,EAAMjF,GAAG,SAAQ,SAASpU,GACrBkM,IACDlM,EAAE2Z,kBACFH,EAAOhX,EAAI8R,SAAS,aAElBgF,EAASG,MAAK,GAAK,GAAMG,UACzBL,EAAQ3H,KAAK,aAAc,wBAE3B0H,EAASG,MAAK,GAAK,GAAMC,YACzBH,EAAQ3H,KAAK,aAAc,uBAE7ByH,EAAMzH,KAAK,iBAAiB4H,GAC5BhX,EAAI6R,YAAY,eAIpBnQ,EAAE5C,GAAQ8Q,QAAO,WACf,IAAIyH,GAAO,EAAAhJ,EAAAxP,SAAYmB,GAEpBqX,IAAS3N,GAAW2N,IACrBP,EAASjI,WAAW,SACpB7O,EAAIuS,YAAY,WAChBsE,EAAMzH,KAAK,gBAAgB,UAG7B1F,EAAS2N,KACRzH,SA3DLlO,EAAE,iBAAiBmD,MAAK,SAAS/C,GAC/BqH,EAAKmO,MAAMtU,KAAM,CAAClB,OAGpBJ,EAAE3C,GAAU6S,GAAG,yBAAyB,SAASpU,EAAE8D,GACjD,IAAIiW,EAAWjW,EAAKhB,GAChBiX,EAAS3R,KAAK,iBAAiBrH,QACjCgZ,EAAS3R,KAAK,iBAAiBf,MAAK,SAAS/C,GAE3C,IACI0V,EADS,IACc1V,EAC3BqH,EAAKmO,MAAMtU,KAAM,CAACwU,UAbV,CAgEb1Y,OAAOC,SAASiC,SZ4gDjB,CAAC8O,+BAA+B,IAAI2H,GAAG,CAAC,SAAS1Z,EAAQU,EAAOJ,GAClE,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IallDT,IbylDgCsD,EazlDhCwV,EAAA3Z,EAAA,+BbulDI4Z,GAE4BzV,EAFgBwV,IAEKxV,EAAIG,WAAaH,EAAM,CAAErD,QAASqD,GAOvF7D,EAAQQ,QazlDQ,SAAUC,EAAOC,EAAS2C,GACxCA,EAAE,0EAA0EmD,MAAK,SAASjH,EAAG0C,IAC3F,EAAAqX,EAAA9Y,SAAiB6C,EAAEpB,OAFP,CAIbxB,OAAOC,SAASiC,Sb2lDjB,CAAC4W,8BAA8B,IAAIC,GAAG,CAAC,SAAS9Z,EAAQU,EAAOJ,GACjE,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAQTP,EAAQQ,Qc7mDQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAE1C0C,EAAE,oBAAoBmD,MAAK,WAEzB,IAAInC,EAAWhB,EAAEsB,MAAM1B,KAAK,oBAC5B,IAAKoB,EAEH,OADAa,QAAQC,MAAM,uFACP,EAGT,IAAIZ,EAAgBlB,EAAEsB,MAAM1B,KAAK,0BACjC,IAAKsB,EAEH,OADAW,QAAQC,MAAM,wFACP,EAET,IACE9B,EAAEsB,MAAM4B,gBAAgB,CAAClC,SAAYA,EAAUE,cAAiBA,IAElE,MAAOpF,GACL+F,QAAQC,MAAMhG,OAnBJ,CAuBbsB,OAAOC,SAASiC,Sd6mDjB,IAAI8W,GAAG,CAAC,SAAS/Z,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAQTP,EAAQQ,QehpDQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAM1C0C,EAAE,6BAA6BmD,MAAK,WAElC,IAAInC,EAAWhB,EAAEsB,MAAM1B,KAAK,oBAC5B,IAAKoB,EAEH,OADAa,QAAQC,MAAM,uFACP,EAGT,IAAIZ,EAAgBlB,EAAEsB,MAAM1B,KAAK,0BACjC,IAAKsB,EAEH,OADAW,QAAQC,MAAM,wFACP,EAET,IACE9B,EAAEsB,MAAM4B,gBAAgB,CACtBlC,SAAYA,EACZE,cAAiBA,EACjBE,UAAa,SAASiV,GAGpB,IAAIzW,EAAOyW,EAEX,OADAzW,EAAK0W,gBAAgBC,OAAS3W,EAAK0W,gBAAgBE,MAAMC,IAAIF,OACtD3W,KAIb,MAAO9D,GACL+F,QAAQC,MAAMhG,OAjCJ,CAqCbsB,OAAOC,SAASiC,SfgpDjB,IAAIoX,GAAG,CAAC,SAASra,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,QgBjsDQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAC5B0C,EAAE,cAIhBA,EAAE,gBAAgBmD,MAAK,WACrB,IAAI7E,EAAM0B,EAAEsB,MAEZhD,EAAI4R,GAAG,SAAQ,SAASpU,GACtBA,EAAE2Z,iBACF,IACEzV,EAAE,cAAcuV,MAAK,GAAK,GAAMoB,QAAQ,CAAC/I,UAAU,GAAI,OAEzD,MAAM9R,GACJkE,EAAE,QAAQ4N,UAAU,GAItB,OADA5N,EAAE,iBAAiBqH,SACZ,KAGTrH,EAAE5C,GAAQ8S,GAAG,UAAU,WAGLlQ,EAAE5C,GAAQwQ,YAtBP,IAyBftP,EAAIuS,YAAY,aAEhBvS,EAAIyR,SAAS,mBA7BP,CAkCb3S,OAAOC,SAASiC,ShBisDjB,IAAIsX,GAAG,CAAC,SAASva,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,QiB1uDQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAC1C0C,EAAE,iBAAiBmD,MAAK,WAEtBnD,EAAEsB,MAAMuV,OAAM,SAASC,GACrBA,EAAMrB,iBAEN,IAAInX,EAAM0B,EAAEsB,MAAM4C,KAAK,sBAAsBqD,QAEzCwP,EAAOzY,EAAIoP,KAAK,QAEjB,WAAapP,EAAIoP,KAAK,UAEvBtQ,EAAOkY,KAAKyB,GAGZ3Z,EAAO4Z,SAAWD,QAfV,CAmBb3Z,OAAOC,SAASiC,SjB4uDjB,IAAI2X,GAAG,CAAC,SAAS5a,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,QkBtwDQ,SAAUC,EAAQC,EAAU2C,EAAG1C,GAE7C0C,EAAE,6BAA6BmD,MAAK,WAElC,IAAI+T,EAAWlX,EAAEsB,MACb6V,EAAQD,EAAShT,KAAK,oBACtBmL,EAAU6H,EAAS/S,SAAS,4BAE5BgT,EAAMta,OAAS,IACjBqa,EAASnH,SAAS,YAClBV,EAAQU,SAAS,gBAGnBV,EAAQa,GAAG,SAAS,WAClBgH,EAAS/G,YAAY,WACrBd,EAAQc,YAAY,iBAfV,CAoBb/S,OAAQC,SAAUiC,SlBswDnB,IAAI8X,GAAG,CAAC,SAAS/a,EAAQU,EAAOJ,GAClC,amB1xDA,IAAI0a,EAAeha,SAASia,iBAAiB,gBAE7C,GAAG,OAASD,EAIV,IAFA,IAAIxa,EAASwa,EAAaxa,OAFH0a,EAAA,SAIdrb,GACP,IAAIsb,EAAWH,EAAanb,GACxBub,EAAWD,EAASE,cAAc,uBAClCC,EAAOH,EAASE,cAAc,qBAElC,GAAG,OAASD,GAAY,OAASE,EAC/B,MAAA,QAGFF,EAASG,SAAW,WAClB,IAAIC,OAAsC,IAAvBvW,KAAKwW,cAAgC1a,OAAO0Z,MAAMiB,WAAazW,KAClFqW,EAAKK,UAAYH,EAAK/P,MAAQ+P,EAAK9W,QAAQ8W,EAAKC,eAAehQ,OAX1D5L,EAAI,EAAGA,EAAIW,EAAQX,IAAM,CAAA,GAAA,UAAAqb,EAAzBrb,GAML,QnB6yDJ,IAAI+b,GAAG,CAAC,SAAS5b,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IoB9zDT,IpBq0DgCsD,EoBr0DhC0X,EAAA7b,EAAA,yBpBm0DI8b,GAE4B3X,EAFO0X,IAEc1X,EAAIG,WAAaH,EAAM,CAAErD,QAASqD,GAEvF7D,EAAQQ,QoBr0DQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GA0B1C,SAASmK,IACP,IAAI6N,GAAO,EAEP8C,EAAa,mBADRpY,EAAEsB,MAAM1B,KAAK,MAElByY,EAAcF,EAAAhb,QAAOa,UAAUoa,GAC/B/I,EAAUrP,EAAEsB,MAAM4C,KAAK,sBAE3BmL,EAAQa,GAAG,SAAS,WAGlBoF,GAAQA,EAGR6C,EAAAhb,QAAOI,UAAU6a,EAAW9C,WAIH,IAAjB+C,GAAgD,UAAhBA,IACxC/C,GAAO,EAEPjG,EAAQ3B,KAAK,gBAAiB4H,IAI7BA,IACDA,GAAO,EACPjG,EAAQ9H,QAAQnF,QAAQ,UA1C5BpC,EAAE,wBAAwBmD,MAAK,WAC3BsE,EAAKmO,MAAMtU,SAGftB,EAAE3C,GAAU6S,GAAG,yBAAyB,SAASpU,EAAE8D,GACjD,IAAIiW,EAAWjW,EAAKhB,GAChBiX,EAAS3R,KAAK,wBAAwBrH,QACxCgZ,EAAS3R,KAAK,wBAAwBf,MAAK,WACzCsE,EAAKmO,MAAMtU,YAlBH,CAuDblE,OAAOC,SAASiC,SpBu0DjB,CAACgZ,wBAAwB,IAAIC,GAAG,CAAC,SAASlc,EAAQU,EAAOJ,GAC3D,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,QqBv4DQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAC1C0C,EAAE,qBAAqBmD,MAAK,WAC1B,IAAI7E,EAAM0B,EAAEsB,MAGZtB,EAAE3C,GAAU6S,GAAG,iCAAiC,WAC9C,IAAIsI,EAAwBxY,EAAE,+BAAgC1B,GAC1Dma,EAAkBD,EAAsBtU,KAAK,SACjD,GAAIuU,EAAgB5b,OAAQ,CAE1B,IAAI6b,EAAgBrb,EAASsb,eAAeF,EAAgB/K,KAAK,OAC7DkL,EAAQJ,EAAsB5Y,KAAK,sBACnCiZ,EAAQL,EAAsB5Y,KAAK,sBACnCkZ,EAAQN,EAAsB5Y,KAAK,sBACnCmZ,EAAQP,EAAsB5Y,KAAK,sBAKnCmB,EAAU,CACZiY,OAJkB,IAAI9O,OAAOC,KAAK8O,aAAa,IAAI/O,OAAOC,KAAK+O,OAAON,EAAMC,GAAQ,IAAI3O,OAAOC,KAAK+O,OAAOJ,EAAMC,IAKjHI,cAAc,EACdC,MAAO,CAAC,WACRC,sBAAuB,CAACC,QAAS,MACjCC,OAAQ,CAAC,aAEX9Z,GAAG+Z,aAAe,IAAItP,OAAOC,KAAKsP,OAAOC,aAAahB,EAAe3X,OAKzEzC,EAAI4R,GAAG,6BAA6B,SAASpU,EAAG8D,GAgBlD,IAAoBgF,EAGI,SAHJA,EAfL,CAACE,cAAelF,EAAKkF,cAAe6U,MAAOrb,IAgB/BwG,cA6G3B,SAAmBF,GACjB,IAAI+U,EAAQ3Z,EAAE4E,EAAK+U,OACjBC,EAAS5Z,EAAE,+BAAgC2Z,GAAOzV,KAAK,SACvD2V,EAAa7Z,EAAE,kCAAmC2Z,GAAOzV,KAAK,SAC9D4V,EAAW9Z,EAAE,gCAAiC2Z,GAAOzV,KAAK,SAGxD0V,EAAO/c,QACT+c,EAAO9N,IAAI,IAIT+N,EAAWhd,QACbgd,EAAW/N,IAAI,IAIbgO,EAASjd,QACXid,EAAShO,IAAI,IAIK,oBAATiO,OACTA,MAAM7V,KAAK,iBAAiB8V,KAAK,WAAW,GAjI5CC,CAAUrV,GAiFd,SAAgCA,GAC9B,IAAI+U,EAAQ3Z,EAAE4E,EAAK+U,OACjBC,EAASD,EAAMzV,KAAK,gCACpB2V,EAAaF,EAAMzV,KAAK,mCACxB4V,EAAWH,EAAMzV,KAAK,iCACtB6V,EAAQJ,EAAMzV,KAAK,sBACnBY,EAAgBF,EAAKE,cAGvB,GAA2B,aAAvBA,EAAcnC,KAKlB,MAA2B,cAAvBmC,EAAcnC,MAChBkX,EAAW3V,KAAK,SAAS4H,IAAI,SAC7BgO,EAAS5V,KAAK,SAAS4H,IAAI,UAIF,QAAvBhH,EAAcnC,MAChBoX,EAAM7V,KAAK,8BAAgCY,EAAc5H,MAAQ,KAAK8c,KAAK,WAAW,IAXtFJ,EAAO1V,KAAK,SAAS4H,IAAI,IAvFzBoO,CAAuBtV,MAnBzBtG,EAAI6b,QAAO,SAASre,GAClBA,EAAE2Z,iBAEF,IAAIxQ,EAoBR,SAAqBL,GACnB,IAAI+U,EAAQ3Z,EAAE4E,EAAK+U,OACjBS,EAAYT,EAAMzV,KAAK,gCACvB6V,EAAQJ,EAAMzV,KAAK,sBACnB2V,EAAaF,EAAMzV,KAAK,mCACxB4V,EAAWH,EAAMzV,KAAK,iCACtBe,EAAW,GAGb,GAAImV,EAAUlW,KAAK,SAASrH,OAAQ,CAClC,IAAIyN,EAAQ8P,EAAUlW,KAAK,SAAS4H,MAChCxB,GACFrF,EAAS4C,KAAK,CACZlF,KAAM,WACNmF,KAAMwC,EACNpN,MAAOoN,IAKb,IAAI+P,EAAY,GACZC,EAAY,GACZC,EAAU,GACVC,GAAW,EAGXX,EAAW3V,KAAK,SAASrH,UAC3Byd,EAAYT,EAAW3V,KAAK,SAAS4H,OAEnCuO,GAAaC,GAGbA,EAAY3W,SAAS8W,OAAO,aAC5BD,GAAW,IAKXV,EAAS5V,KAAK,SAASrH,SACzB0d,EAAUT,EAAS5V,KAAK,SAAS4H,SAE3BwO,IAAcE,EAChBH,GAAa,MAAQE,EAGrBF,EAAY,WAAaE,GAK3BF,GACFpV,EAAS4C,KAAK,CACZlF,KAAM,YACNmF,KAAMuS,EACNnd,MAAOmd,EACP7T,MAAO8T,EACP7T,IAAK8T,IAcT,OATAR,EAAM7V,KAAK,iBAAiBf,MAAK,WAC/B8B,EAAS4C,KAAK,CACZlF,KAAQ,MACRmF,KAAQ9H,EAAEsB,MAAM8G,KAAK,SAASN,OAC9B5K,MAAS8C,EAAEsB,MAAMwK,WAKd7G,EA1FUyV,CAAY,CAACf,MAAO3Z,EAAEsB,QAGrChD,EAAI8D,QAAQ,+BAAgC,CAAC,CAAC6C,SAAUA,WA1C9C,CAwLb7H,OAAOC,SAASiC,SrBq4DjB,IAAIqb,GAAG,CAAC,SAASte,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IsBjkET,ItBwkEgCsD,EsBxkEhCoa,EAAAve,EAAA,yBtBskEIwe,GAE4Bra,EAFOoa,IAEcpa,EAAIG,WAAaH,EAAM,CAAErD,QAASqD,GAEvF7D,EAAQQ,QsBxkEQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAiN1C,SAASwd,EAAclb,EAAMmb,GAI3B,IAAIC,EAAUhb,EAAEib,WACZC,EAAkB,GAGlBC,EAAeN,EAAA1d,QAAS0L,kBAAkBjJ,EAAMmb,GAChD/V,EAAOmW,EAAapW,eAAeC,KACnCoW,EAAaP,EAAA1d,QAASkM,eAAe8R,GACrC7Q,EAAQ,GAGZ,GAAIuQ,EAAA1d,QAASiH,UAAUY,EAAM,YAAa,CACxCsF,EAAQuQ,EAAA1d,QAASsH,gBAAgBO,EAAM,YAAY,GAEnD,IAAIqW,EAAoB5b,GAAG+Z,aAAa8B,WAExC7b,GAAGqK,SAAWrK,GAAGqK,SAAWrK,GAAGqK,SAAW,IAAII,OAAOC,KAAKoR,cACzB,IAAtBF,GAAqCA,EAAkB7W,eAAe,YAE/EqW,EAAA1d,QAASoN,eAAe8Q,EAAkB7Q,UAAU,SAASgR,GAC3DN,EAAgBtb,KAAO6b,EAAoBD,EAAQL,GACnDD,EAAgBnR,QAAUyR,EAE1BR,EAAQnJ,QAAQqJ,MAMlBL,EAAA1d,QAASwM,qBAAqBW,GAAO,SAASkR,GAC5CN,EAAgBtb,KAAO6b,EAAoBD,EAAQL,GACnDD,EAAgBnR,QAAUyR,EAE1BR,EAAQnJ,QAAQqJ,WAMpBF,EAAQnJ,QAAQ,CAACjS,KAAMwb,EAAY9Q,MAAOA,IAG5C,OAAO0Q,EAaT,SAASS,EAAoBnR,EAAO1K,GAClC,IAAI8b,EAAMpR,EAAMqR,SAAS3E,SAAS0E,MAC9BE,EAAMtR,EAAMqR,SAAS3E,SAAS4E,MAGlC,IAAK,IAAIC,KAAOjc,EAAKuF,MACfvF,EAAKuF,MAAMX,eAAeqX,KAC5Bjc,EAAKuF,MAAM0W,GAAKC,SAAWjB,EAAA1d,QAASuN,kBAAkB9K,EAAKuF,MAAM0W,GAAKjc,KAAKmc,SAASL,IAAK9b,EAAKuF,MAAM0W,GAAKjc,KAAKmc,SAASH,IAAKF,EAAKE,EAAK,MAK1Ihc,EAAKuF,MAAM4D,MAAK,SAAUxM,EAAGyM,GAC3B,OAAOzM,EAAEuf,SAAW9S,EAAE8S,YAIxB,IAAIhV,EAAY+T,EAAA1d,QAAS+H,cAActF,EAAKuF,MAAOvF,EAAKmH,UAKxD,OAJAnH,EAAKuF,MAAQ2B,EAAU3B,MACvBvF,EAAK6F,WAAaqB,EAAUrB,WAGrB7F,EA5RTI,EAAE,iCAAiCmD,MAAK,SAASjH,GAC/C,IAAIoC,EAAM0B,EAAEsB,MACR0a,EAAkB1d,EAAI4F,KAAK,uBAC3B+X,EAAc3d,EAAI4F,KAAK,kBACvBgY,EAAe5d,EAAI4F,KAAK,qBAGtBiY,EAAU1c,GAAG2c,wBAAwBlgB,GAEvCmgB,EAAa,GA2CjB,SAASC,EAAkBxgB,EAAGygB,GAE5B,IAAIC,EAAW5N,SAAS2N,EAAQ,IAEhCF,EAAWpU,WAAa4S,EAAA1d,QAASuK,wBAAwB,CAAE9H,KAAMyc,EAAY1U,WAAY6U,IACzFH,EAAWtX,eAAiB8V,EAAA1d,QAASmL,wBAAwB,CAAE1I,KAAMyc,EAAYhX,KAAMmX,IACvF3B,EAAA1d,QAAS6J,kBAAkB,CAAEpH,KAAMyc,EAAYhX,KAAMmX,IAGrDC,EAAsB,CAAE7c,KAAMyc,IAlDhCA,EAgGA,SAAkC1W,GAEhC,IAAI0W,EAAa,GAGbK,EAAY,GAChB1c,EAAE0E,IAAIiB,EAAQgX,aAAaC,QAAQ,SAAS9Q,EAAK1L,GAC/Csc,EAAUtc,GAAS0L,KAGrBnG,EAAQgX,aAAaC,OAASF,EAG9B,IAAI9U,EAAQ,GACZ5H,EAAE0E,IAAIiB,EAAQsC,WAAWL,OAAO,SAASkE,EAAK1L,GAASwH,EAAMxH,GAAS0L,KACtEnG,EAAQsC,WAAWL,MAAQA,EAG3B,IAAIiV,EAAgBlX,EAAQgX,aAAaC,OAGzCE,EAAsBjC,EAAA1d,QAASuO,iBAAiBmR,EAAe,mBAuB/D,OApBAR,EAAWtV,SAAWpB,EAAQoB,SAAWpB,EAAQoB,SAAW8V,EAAchgB,OAG1Ewf,EAAWtX,eAAiBY,EAAQZ,eAGpCsX,EAAWlX,MAoCb,SAAoCQ,EAASzD,EAAQkD,GACnD,IAAID,EAAQ,GAcZ,OAbAQ,EAAQwB,SAAQ,SAAU5B,EAAMnF,GAE9B,IAAIma,EAAU5U,EAAQvF,GAAO2c,KAAKC,OAAOngB,OAEzCsI,EAAM/E,GAAS,CACboF,UAAU,EACVH,KAAM4F,KAAKgS,MAAM7c,EAAM,GAAKgF,GAC5BlD,OAAQA,EAAO9B,GACfR,KAAM+F,EAAQvF,GACdoG,MAAOqU,EAAA1d,QAASgP,WAAW,CAACvM,KAAM+F,EAAQvF,GAAO2c,KAAMpa,KAAM,UAC7D8D,IAAM8T,EAAWM,EAAA1d,QAASgP,WAAW,CAACvM,KAAM+F,EAAQvF,GAAO2c,KAAMpa,KAAM,QAAU4X,MAG9EpV,EAnDY+X,CAA2BL,EAAeC,EAAqBT,EAAWtV,UAG7FsV,EAAWpU,WAAatC,EAAQsC,WAGhCoU,EAAW5W,WAAawF,KAAKgS,KAAKZ,EAAWlX,MAAMtI,OAASwf,EAAWtV,UAGvEsV,EAAWnV,UAAY,GACvBmV,EAAWnV,UAAUpI,UAvJT,gCAwJZud,EAAWnV,UAAUtB,OAvJZ,0BAwJTyW,EAAWnV,UAAUI,IAvJf,yBAyJC+U,EA5IIc,CAAyBhB,GAGtCD,EAAahM,GAAG,gCAAgC,SAAUpU,EAAGshB,GAG3DtC,EAAcuB,EAAYe,GAAYC,MAAK,SAAUtC,GACnDsB,EAAatB,EAAenb,KAE5Bmb,EAAenb,KAAKmF,eAAiB8V,EAAA1d,QAASmL,wBAAwB,CAAC1I,KAAMmb,EAAenb,OAE5Fmb,EAAenb,KAAKqI,WAAa4S,EAAA1d,QAASuK,wBAAwB,CAAC9H,KAAMmb,EAAenb,OAExFib,EAAA1d,QAAS6J,kBAAkB,CAACpH,KAAMmb,EAAenb,OAEjD6c,EAAsB1B,SAM1BiB,EAAgB9L,GAAG,sCAAsC,SAAUpU,EAAGgJ,GAGpEgW,EAAcuB,EAAYvX,GAAeuY,MAAK,SAAUtC,GACtDsB,EAAatB,EAAenb,KAC5Bmb,EAAejW,cAAgBA,EAE/BuX,EAAatB,EAAenb,KAE5Bmb,EAAenb,KAAKmF,eAAiB8V,EAAA1d,QAASmL,wBAAwB,CAAC1I,KAAMmb,EAAenb,OAE5Fmb,EAAenb,KAAKqI,WAAa4S,EAAA1d,QAASuK,wBAAwB,CAAC9H,KAAMmb,EAAenb,OAExFib,EAAA1d,QAAS6J,kBAAkB,CAACpH,KAAMmb,EAAenb,OAEjD6c,EAAsB1B,SAgB1BkB,EAAY/L,GAAG,2BAA4BoM,GAC3C,IAAIgB,EAAc,EACdC,EAAS,IAAIC,gBAAgBpgB,EAAO4Z,SAASyG,QAWjD,SAAShB,EAAsB7X,GAC7BoX,EAAgB5Z,QAAQ,gCAAiC,CAACwC,EAAKhF,KAAKmF,iBAEpEkX,EAAY7Z,QAAQ,4BAA6B,CAACwC,EAAKhF,KAAKqI,aACxDrD,EAAKE,eACPoX,EAAa9Z,QAAQ,4BAA6B,CAACwC,EAAKE,gBAfxD4Y,QAAQC,QACVL,EAAcI,QAAQC,MAAMtY,MAE1BkY,IACFD,EAAcC,EAAOhP,IAAI,SAE3B+N,EAAiB,EAAMgB,MA7EX,CAoSblgB,OAAOC,SAASiC,StBykEjB,CAACse,wBAAwB,IAAIC,GAAG,CAAC,SAASxhB,EAAQU,EAAOJ,GAC3D,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,QuBt3EQ,SAASC,EAAQC,EAAU2C,GACzC,IAAM8d,EAAgB9d,EAAE,iCAClB+d,EAAU/d,EAAE,mCACZge,EAAYD,EAAQ7Z,KAAK,YACzB+Z,EAAeH,EAAc5Z,KACjC,yCAEIga,EAAcJ,EAAc5Z,KAAK,sCACjCia,EAAiBL,EAAc5Z,KACnC,+CAEIka,EAAYpe,EAAE,gDACdqe,EAAkBD,EAAUla,KAAK,sBACjCoa,EAAete,EAAE,4BAGvBqe,EAAgBnO,GAAG,SAAS,WAC1BkO,EAAUjO,YAAY,cAIxB6N,EAAU7a,MAAK,WACb,IAAI7E,EAAM0B,EAAEsB,MAEZhD,EAAI4R,GAAG,SAAS,WACV5R,EAAI0b,KAAK,gBAAkB1b,EAAI0b,KAAK,gBACtC1b,EAAIyP,IAAI,SAAUzP,EAAI0b,KAAK,gBAAkB,MAE7C1b,EAAIyP,IAAI,SAAU,cAMxBmQ,EAAYhO,GAAG,UAAU,WACvB,IAAIqO,EAAiBL,EAAY3Z,OAAO,YAAYuH,MAE7B,QAAnByS,GACFR,EAAQhO,SAAS,oBACjBgO,EAAQlN,YAAY,aACQ,OAAnB0N,IACTR,EAAQhO,SAAS,oBACjBgO,EAAQlN,YAAY,gBAKxBsN,EAAejO,GAAG,UAAU,WAC1B,IAAIsO,EAAeL,EAAe5Z,OAAO,YAAYuH,MACjD2S,EAAgBze,EAAEsB,MACnBod,QAAQ,QACRxa,KAAK,iBAEa,QAAjBsa,GACFP,EAAalO,SAAS,WACtB0O,EAAc3S,IAAI,SACQ,OAAjB0S,IACTP,EAAapN,YAAY,WACzB4N,EAAc3S,IAAI,qBAKtBwS,EAAapO,GAAG,SAAS,SAASpU,GAChCA,EAAE2Z,oBAhEU,CAkEbrY,OAAQC,SAAUiC,SvBk3EnB,IAAIqf,GAAG,CAAC,SAAStiB,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IwBx7ET,IxB+7EgCsD,EwB/7EhCkM,EAAArQ,EAAA,gCxB67EIsQ,GAE4BnM,EAFckM,IAEOlM,EAAIG,WAAaH,EAAM,CAAErD,QAASqD,GAEvF7D,EAAQQ,QwB/7EQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAE1C0C,EAAE,gBAAgBmD,MAAK,WACrB,IAAI7E,EAAM0B,EAAEsB,MACR6T,EAAQ7W,EAAI4F,KAAK,qBACjB0a,EAAezJ,EAAM0J,QACrBC,EAAW,KACXC,GAAW,EAAApS,EAAAxP,SAAYmB,GAkC3B,SAAS0gB,EAAYC,GACnB,IAAIC,EAAMD,EAAQ3R,UAAY,EAE9B,GAAGyR,EAAU,CACX,IAAII,EAAenf,EAAE,qBAAqBoN,UAAY,EAClDgS,EAAYpf,EAAE,sBAAsBoN,UAAY,EAEpD8R,EAAI3R,IAAM2R,EAAI3R,IAAM4R,EAAeC,EAGrC,OAAOF,EAGT,SAASG,EAAStD,EAAU1U,GAC1BrH,EAAE,aAAauV,MAAK,GAAK,GAAMoB,QAAQ,CAAC/I,UAAUmO,GAAW,OAAO,WAC/D1U,GACDrH,EAAEqH,GAAOA,WAhDY,MAAvB8N,EAAMzH,KAAK,UAGboR,EAAW9e,EAAEmV,EAAMzH,KAAK,SAG1BkR,EAAa9W,KAAK,IAElBxJ,EAAI4F,KAAK,qCAAqCkD,OAAOwX,GAErD5e,EAAE5C,GAAQ8Q,QAAO,WACf6Q,GAAW,EAAApS,EAAAxP,SAAYmB,MAGzBA,EAAI4R,GAAG,QAAQ,qBAAqB,SAASpU,GAC3CA,EAAE2Z,iBAEF,IAAI8G,EAASvc,EAAEsB,MAAMoM,KAAK,QAG1B2R,EAFeL,EAAYhf,EAAEuc,GAAQ3W,UAEnB2H,IAAKgP,MAGzBuC,EAASjI,OAAM,SAAS/a,GACtBA,EAAE2Z,iBAEF,IAAI8G,EAASvc,EAAEsB,MAAMoM,KAAK,QAG1B2R,EAFeL,EAAYhf,EAAEuc,IAEXhP,IAAKgP,UAtCb,CA8Dbnf,OAAOC,SAASiC,SxBi8EjB,CAAC8O,+BAA+B,IAAIkR,GAAG,CAAC,SAASjjB,EAAQU,EAAOJ,GAClE,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,QyBxgFQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAE1C0C,EAAE,uBAAuBmD,MAAK,WAC5B,IAAM7E,EAAM0B,EAAEsB,MACRie,EAAYjhB,EAAIoP,KAAK,aAEvB8R,EAAYD,EAAYjhB,EAAIwN,MAAMjP,OAClC4iB,EAAaD,EAAb,IAA0BD,EAE9BjhB,EAAIohB,KAAK,6CAETphB,EAAIsH,SAAS8H,KAAK,iBAAiB+R,GAEnCnhB,EAAI4R,GAAG,sBAAsB,WAC3BsP,EAAYD,EAAYjhB,EAAIwN,MAAMjP,OAClC4iB,EAAaD,EAAb,IAA0BD,EAC1BjhB,EAAIsH,SAAS8H,KAAK,iBAAiB+R,SAKvCzf,EAAE,wCAAwCkQ,GAAG,WAAW,SAASpU,IAET,IAAlDkE,EAAE2f,QAAQ7jB,EAAE8jB,QAAS,CAAC,GAAI,EAAG,EAAG,GAAI,GAAI,MAE1B,IAAb9jB,EAAE8jB,WAAgC,IAAd9jB,EAAE+jB,UAAkC,IAAd/jB,EAAEgkB,UAE/B,IAAbhkB,EAAE8jB,WAAgC,IAAd9jB,EAAE+jB,UAAkC,IAAd/jB,EAAEgkB,UAE/B,IAAbhkB,EAAE8jB,WAAgC,IAAd9jB,EAAE+jB,UAAkC,IAAd/jB,EAAEgkB,UAE5ChkB,EAAE8jB,SAAW,IAAM9jB,EAAE8jB,SAAW,KAKhC9jB,EAAEikB,UAAajkB,EAAE8jB,QAAU,IAAM9jB,EAAE8jB,QAAU,MAAS9jB,EAAE8jB,QAAU,IAAM9jB,EAAE8jB,QAAU,MACrF9jB,EAAE2Z,oBAKRzV,EAAE,0CAA0CmD,MAAK,WAC/C,IAAM7E,EAAM0B,EAAEsB,MACR0e,EAAQhgB,EAAE,8FACVigB,EAASjgB,EAAE,+FAEL1B,EAAIwN,MAGQ,WAArBxN,EAAIoP,KAAK,SACVpP,EAAI4R,GAAG,WAAW,SAASpU,IAEmC,IAAxDkE,EAAE2f,QAAQ7jB,EAAE8jB,QAAS,CAAC,GAAI,EAAG,EAAG,GAAI,GAAI,IAAK,OAE/B,IAAb9jB,EAAE8jB,WAAgC,IAAd9jB,EAAE+jB,UAAkC,IAAd/jB,EAAEgkB,UAE/B,IAAbhkB,EAAE8jB,WAAgC,IAAd9jB,EAAE+jB,UAAkC,IAAd/jB,EAAEgkB,UAE/B,IAAbhkB,EAAE8jB,WAAgC,IAAd9jB,EAAE+jB,UAAkC,IAAd/jB,EAAEgkB,UAE5ChkB,EAAE8jB,SAAW,IAAM9jB,EAAE8jB,SAAW,KAKhC9jB,EAAEikB,UAAajkB,EAAE8jB,QAAU,IAAM9jB,EAAE8jB,QAAU,MAAS9jB,EAAE8jB,QAAU,IAAM9jB,EAAE8jB,QAAU,MACrF9jB,EAAE2Z,oBAKVuK,EAAM9P,GAAG,SAAS,WAChB,IAAIhT,EAAQ0R,SAAStQ,EAAIwN,MAAMwE,OAAO,IAEnCpT,GAAUA,IACXA,EAAQ,GAGVoB,EAAIwN,IAAI5O,EAAQ,MAGlB+iB,EAAO/P,GAAG,SAAS,WACjB,IAAIhT,EAAQ0R,SAAStQ,EAAIwN,MAAM,IAE5B5O,GAAUA,IACXA,EAAQ,GAGVoB,EAAIwN,IAAI5O,EAAQ,MAGlBoB,EAAIohB,KAAK,wCAETphB,EAAIsH,SAASwB,OAAO4Y,EAAMC,MA9Fd,CAkGb7iB,OAAOC,SAASiC,SzBwgFjB,IAAI4gB,GAAG,CAAC,SAAS7jB,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,Q0BjnFQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GA2E1C,SAAS6iB,EAASjjB,GAAkB,IAAZyF,EAAYyd,UAAAvjB,OAAA,QA3EtB,IA2EsBujB,UAAA,GAAAA,UAAA,GAAP,OACvBC,GAAQ,EAEZ,OAAO1d,GACL,IAAK,QACH0d,IAAWnjB,EAAMojB,MAAM,uCACvB,MACF,QACED,EAAyB,IAAjBnjB,EAAML,OAGlB,OAAOwjB,EApFTrgB,EAAE,QAAQmD,MAAK,WACb,IAAIwW,EAAQ3Z,EAAEsB,MACVif,EAAiB,GACjBC,EAAa7G,EAAMzV,KAAK,kBAG5BlE,EAAE,mBAAmBmD,MAAK,WACxB,IAAIsd,EAASzgB,EAAEsB,MACXqB,EAAO8d,EAAO7gB,KAAK,QAEnBygB,EAAQF,EADAM,EAAO3U,MACQnJ,GAE3B4d,EAAe1Y,KAAK,CAAClF,KAAAA,EAAK0d,MAAAA,EAAM/hB,IAAImiB,IAEpCzgB,EAAEsB,MAAM1B,KAAK,QAAQ2gB,EAAe1jB,WAIT,IAA1B0jB,EAAe1jB,QAQlB8c,EAAMzV,KAAK,+CAA+CgM,GAAG,SAAQ,SAASpU,GAC5E,IAAI4kB,GAAa,EAgBjB,GAbAH,EAAepZ,SAAQ,SAAS5B,GAC9B,IA+BcjH,EA/BVpB,EAAQqI,EAAKjH,IAAIwN,MAErBvG,EAAK8a,MAAQF,EAASjjB,EAAMqI,EAAK5C,MAE9B4C,EAAK8a,QA2BM/hB,EA1BDiH,EAAKjH,KA2BlBuS,YAAY,aAChBvS,EAAI4J,KAAK,kBAAkB2I,YAAY,eA1BjC6P,GAAa,EA8BrB,SAAkBpiB,GAChBA,EAAIyR,SAAS,aACbzR,EAAI4J,KAAK,kBAAkB6H,SAAS,aA/B9B4Q,CAASpb,EAAKjH,UAIdoiB,EAAY,CAEd5kB,EAAE2Z,iBAEFkE,EAAM5J,SAAS,aAEf,IAAIgM,EAAWpC,EAAMrM,SAIrBtN,EAAE,aAAauV,MAAK,GAAK,GAAMoB,QAAQ,CAAC/I,UAAUmO,EAASxO,IAAM,KAAM,OAAO,WAE5EiT,EAAWnZ,kBAzDL,CAyFbjK,OAAOC,SAASiC,S1BonFjB,IAAIshB,GAAG,CAAC,SAASvkB,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,I2BjtFT,I3BwtFgCsD,E2BxtFhCqgB,EAAAxkB,EAAA,sC3BstFIkH,GAE4B/C,EAFoBqgB,IAECrgB,EAAIG,WAAaH,EAAM,CAAErD,QAASqD,GAEvF7D,EAAQQ,Q2BxtFQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAE1C,GAAI0C,EAAE,kBAAkBnD,aAAsC,IAArB4C,GAAGqhB,cAK5C,IAAI1b,GAAM,EACR2b,GAAkB,EAOhBC,EAAqBC,aAAY,WAC/B7jB,EAAO8M,QAAU9M,EAAO8M,OAAOC,OAAS4W,IAoB5CA,GAAkB,EAClBG,cAAcF,GACd/P,aAAakQ,GAEbnhB,EAAE,kBAAkBmD,MAAK,SAASjH,GAChC,IAAMoC,EAAM0B,EAAEsB,MACd8D,EAAM3F,GAAGqhB,cAAc5kB,GAAG6K,SAAWtH,GAAGqhB,cAAc5kB,GAAG6K,SAAWtH,GAAGqhB,cAAc5kB,GAAGklB,QAAQvkB,OAGhG,IAAMsf,EAAU1c,GAAGqhB,cAAc5kB,GAQ3BmlB,EAAUrkB,OAAOiP,OAAO,GAAIkQ,EAAQzX,IAJtB,CAClB4c,aAAa,IAKT5c,EAAM,IAAIwF,OAAOC,KAAKoX,IAAIjgB,KAAM+f,GAElCrI,EAAS,IAAI9O,OAAOC,KAAK8O,aAEzBmI,EAiGR,SAAqB1c,EAAK0c,GACxB,IAAII,EAAqB,GAsDzB,OArDAJ,EAAQja,SAAQ,SAASvH,GACvB,IAAI6hB,EAAa,CACf1F,SAAU,IAAI7R,OAAOC,KAAK+O,OAAO,CAC/BwC,IAAK9b,EAAKmc,SAASL,IACnBE,IAAKhc,EAAKmc,SAASH,MAErB9X,MAAOlE,EAAKkE,MACZ4d,WAAY9hB,EAAK8hB,WACjBxY,MAAO,WAAayY,EAAa/hB,EAAK8hB,WAAWlkB,OAE/CokB,EAAU,IAAI1X,OAAOC,KAAK0X,OAAOJ,GACjCK,EA6DR,SAAuBliB,GACrB,IAAIkiB,EAAW,CACbC,eAAgBC,EAAYpiB,EAAKqiB,OACjCC,aAAcF,EAAYpiB,EAAKuiB,MAEjC,OAAOnlB,OAAOiP,OAAO,GAAGrM,EAAKkiB,GAlEZM,CAAcX,EAAWC,YAEpC1f,GADmB,EAAAuB,EAAApG,SAAY,gBACpBwO,CAAiBmW,GAC5BJ,EAAa,IAAIxX,OAAOC,KAAKkY,WAAW,CAC1CC,QAAStgB,IAEPugB,EAAiB,KAErBX,EAAOY,YAAY,SAAS,WAE1B,IAAK,IAAItmB,KAAKslB,EACTA,EAAmBtlB,GAAGoZ,MACvBkM,EAAmBtlB,GAAGumB,WAK1Bb,EAAOc,cAGTd,EAAOc,SAAW,WAChBhB,EAAWpM,KAAK5Q,EAAKkd,GACrBA,EAAOtM,MAAO,GAGhBsM,EAAOa,SAAW,WAChBf,EAAWiB,MAAMje,EAAKkd,GACtBA,EAAOtM,MAAO,GAGhBsM,EAAOgB,OAAS,WACd3R,aAAasR,GACbX,EAAOiB,aAAa,MACpBjB,EAAOiB,aAAa3Y,OAAOC,KAAK2Y,UAAUC,QAC1CR,EAAiBtU,YAAW,WAC1B2T,EAAOiB,aAAa,QACnB,OAGLrB,EAAmB3Z,KAAK+Z,MAGnBJ,EAxJSwB,CAAYte,EAAKyX,EAAQiF,SAEvC6B,EAAgB7B,EAAS1c,EAAKsU,GAG9B1a,EAAI8D,QAAQ,8BAA+B,CAACgf,IAG5ClX,OAAOC,KAAK2M,MAAMoM,gBAAgBxe,EAAK,QAAQ,WAC7B1E,EAAE,kBAAkBkE,KAClC,kaAeQf,MAAK,SAASjH,EAAGD,GACzB+D,EAAE/D,GAAGyR,KAAK,CACRyV,KAAM,SACNC,SAAU,IACVC,aAAcpnB,EAAEiN,QACfyG,KAAK,WAAW,SAAS2T,GAEV,IAAZA,EAAGC,QACLD,EAAG7N,iBACHzV,EAAE/D,GAAGmG,QAAQ,mBAOrB9D,EAAI4R,GAAG,4BAA4B,SAAU4G,EAAO0M,GAClD,QAAoC,IAAzBpC,EAAQoC,GACjB,OAAO,EAET,IAAI5B,EAASR,EAAQoC,GAErB,IAAK,IAAIC,KAAKrC,EACRA,EAAQqC,GAAGnO,MACb8L,EAAQqC,GAAGhB,WAIfb,EAAOc,cAITpkB,EAAI4R,GAAG,6BAA6B,SAAU4G,EAAO0M,GACnD,QAAmC,IAAzBpC,EAAQoC,GAChB,OAAO,EAEIpC,EAAQoC,GAEdZ,YAITtkB,EAAI4R,GAAG,+BAA+B,SAAUpU,EAAG8I,GAUjD,IAAK,IAAI8e,KARTtC,EA6IN,SAA4Bxc,IA2B5B,SAA8Bwc,GAC5B,IAAI,IAAIllB,EAAI,EAAGA,EAAIklB,EAAQvkB,OAAQX,IACjCklB,EAAQllB,GAAGynB,OAAO,MA5BpBC,CAAqBhf,EAAKwc,SAG1B,IAAIpI,EAAS,IAAI9O,OAAOC,KAAK8O,aAc7B,OAbIrU,EAAK0F,OAAS7K,GAAG+Z,aAAa8B,YAEhCtC,EAAO/Y,OAAO2E,EAAK0F,MAAMqR,SAAS3E,UAIpCiM,EAAgBre,EAAKif,YAAajf,EAAKF,IAAKsU,GAGZ,IAA5BpU,EAAKif,YAAYhnB,QACnB+H,EAAKF,IAAIof,QAAQ,IAGZlf,EAAKif,YA/JEE,CAAmB,CAC3BF,YAAajf,EAAKwc,QAClB1c,IAAKA,EACL0c,QAASA,EACT9W,QAAO1F,EAAK0F,OAAQ1F,EAAK0F,QAKtB8W,EAAQsC,GAAGpO,MACZ8L,EAAQsC,GAAGjB,oBAvHlB,KAGCtB,EAAelT,YAAW,WAC5BiT,cAAcF,KACb,MAGH,SAASW,EAAcqC,GACrB,IAAItmB,EAAIL,EAAS0B,cAAc,OAE/B,OADArB,EAAEwB,UAAY8kB,EACPtmB,EAAEsa,UAwNX,SAASgK,EAAYC,GAEnB,OAD6B,MAAbA,EAAM,GAAaA,EAAMgC,UAAU,GAAKhC,GACvCxjB,QAAQ,wBAAyB,cAgEpD,SAASwkB,EAAgB7B,EAAS1c,EAAKsU,GAErC,IAAIjS,EAAWqa,EAAQvkB,OAASuI,EAAMgc,EAAQvkB,OAASuI,EAEvDgc,EAAQja,SAAQ,SAASya,EAAQxhB,GAC3BA,EAAQ2G,IACV6a,EAAO+B,OAAOjf,GAEdsU,EAAO/Y,OAAO2hB,EAAO7F,cAOrBqF,EAAQvkB,OAAS,GAEnB6H,EAAIwf,UAAUlL,IAzUJ,CA6Ub5b,OAAOC,SAASiC,S3BysFjB,CAACiN,qCAAqC,IAAI4X,GAAG,CAAC,SAAS9nB,EAAQU,EAAOJ,GACxE,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,Q4B/hGQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAG1C0C,EAAE,uBAAuBmD,MAAK,SAAS/C,GAErC,IAAI9B,EAAM0B,EAAEsB,MACR8iB,EAAkBpkB,EAAE,wBAAyB1B,GAC7C+lB,EAAgBrkB,EAAE,mBAAoB1B,GACtCgmB,EAAatkB,EAAE,iBAAkB1B,GACjC2F,EAAK3F,EAAIoP,KAAK,OAAS,cAAgBtN,EAAQ,GAC/CkV,EAAOhX,EAAI8R,SAAS,WAGtB9R,EAAIoP,KAAK,KAAMzJ,GAEXogB,EAAcxnB,SAEhBunB,EAAgB1W,KAAK,gBAAgB4H,GAAM5H,KAAK,gBAAiBzJ,GACjEmgB,EAAgBG,QAGlBH,EAAgBlU,GAAG,SAAS,SAASpU,GACnCA,EAAE2Z,iBACFnX,EAAI6R,YAAY,WAEZ7R,EAAI8R,SAAS,YACfgU,EAAgB1W,KAAK,gBAAiB,QACtC2W,EAAcE,OACdD,EAAWjd,UAGX+c,EAAgB1W,KAAK,gBAAiB,SACtC2W,EAAcG,cAKtBxkB,EAAE,uCAAuCmD,MAAK,WAC5C,IAAIshB,EAAczkB,EAAEsB,MAChB+N,EAAUoV,EAAYvgB,KAAK,qCAC3BwgB,EAAiBrV,EAAQnL,KAAK,cAC9BygB,EAAaF,EAAYvgB,KAAK,2BAC9B0gB,EAAYD,EAAWpd,QAAQrD,KAAK,KACpC2gB,EAAWF,EAAW9nB,OACtBioB,EAAYzV,EAAQnL,KAAK,cAGzB2gB,GACFxV,EAAQ0V,SAIVL,EAAe5c,KAAK+c,GAEpBxV,EAAQa,GAAG,SAAS,WAClB,IAAI8U,EAAgBF,EAAUhd,OAG9B2c,EAAY7e,SAASuK,YAAY,aACjCd,EAAQc,YAAY,WACpBwU,EAAWI,SAGXD,EAAUhd,KAAuB,UAAlBkd,EAA4B,OAAS,SAEpD3V,EAAQ3B,KAAK,gBAAgB,SAASuX,EAAGvX,GAAQ,QAAiB,QAARA,SAI5D2B,EAAQa,GAAG,WAAW,SAASpU,GACX,IAAdA,EAAE8jB,SAAiB6E,EAAY7e,SAASwK,SAAS,eACnDwU,EAAUvd,QACVvL,EAAE2Z,qBAINzV,EAAE5C,GAAQ8Q,QAAO,WAEfwW,EAAevX,WAAW,SAC1BwX,EAAWxX,WAAW,SAEtBc,YAAW,WACT,IAAIiX,EAAcllB,EAAE5C,GAAQiQ,QAG5BsX,EAAaF,EAAYvgB,KAAK,6CAC9B2gB,EAAWF,EAAW9nB,OAGtB6nB,EAAe5c,KAAK+c,GACpBC,EAAUhd,KAAK,QAGZ+c,GAAY,GAAKK,EAAc,IAChC7V,EAAQkV,OAEW,GAAZM,GACPxV,EAAQmV,SAGT,WApGO,CA0GbpnB,OAAOC,SAASiC,S5B4hGjB,IAAI6lB,GAAG,CAAC,SAAS9oB,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,I6B1oGT,I7BipGgCsD,E6BjpGhC0X,EAAA7b,EAAA,yB7B+oGI8b,GAE4B3X,EAFO0X,IAEc1X,EAAIG,WAAaH,EAAM,CAAErD,QAASqD,GAEvF7D,EAAQQ,Q6BjpGQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAe1C,SAASmK,IACP,IAAInJ,EAAM0B,EAAEsB,MACR6T,EAAQ7W,EAAI4F,KAAK,yBAEjBkU,EAAa,QADR9Z,EAAIsB,KAAK,MAMC,SAHDuY,EAAAhb,QAAQa,UAAUoa,IAIlC9Z,EAAI8mB,SAASC,QAAQ,QAAQD,OAAO,QAItCjQ,EAAMjF,GAAG,SAAQ,WACfiI,EAAAhb,QAAQI,UAAU6a,EAAW,OAVX,KAWlB9Z,EAAIiX,MAAK,GAAK,GAAM8P,aA7BxBrlB,EAAE,oBAAoBmD,MAAK,WACzBsE,EAAKmO,MAAMtU,SAGbtB,EAAE3C,GAAU6S,GAAG,yBAAyB,SAASpU,EAAE8D,GACjD,IAAIiW,EAAWjW,EAAKhB,GAChBiX,EAAS3R,KAAK,oBAAoBrH,QACpCgZ,EAAS3R,KAAK,oBAAoBf,MAAK,WACrCsE,EAAKmO,MAAMtU,YAVH,CAkCblE,OAAOC,SAASiC,S7BmpGjB,CAACgZ,wBAAwB,IAAIgN,GAAG,CAAC,SAASjpB,EAAQU,EAAOJ,GAC3D,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,Q8B9rGQ,SAAUC,EAAQC,EAAU2C,EAAG1C,GAI7C,IAAMioB,EAAgBvlB,EAAE,YAAYnD,OAAS,EAAImD,EAAE,YAAYwN,aAAY,GAAQ,IAAM,EAErFgY,OAAA,EAEJ,SAASC,IAEP,IAAIC,EAAe1lB,EAAE,iBAAiBqN,QAEtCrN,EAAE,wCAAwCmD,MAAK,WAC7C,IAAIwiB,EAAa3lB,EAAEsB,MAGAqkB,EAAW5J,WAAWxO,IAGtBgY,GAGjBI,EAAW5X,IAAI,QAAS2X,MAKxB1lB,EAAE,iBAAiBoQ,SAAS,gBAC9BpQ,EAAE,wBAAwBkE,KAAK,UAAUmJ,MAAM,QAInDrN,EAAE5C,GAAQ8S,GAAG,QAAQ,WACnBuV,OAGFzlB,EAAE5C,GAAQ8Q,QAAO,WACc,iBAAlBsX,GACTpoB,EAAO6T,aAAauU,GAEtBA,EAAgBpoB,EAAO6Q,YAAW,WAChCwX,MACC,QA1CS,CA6CbroB,OAAQC,SAAUiC,S9B+rGnB,IAAIsmB,GAAG,CAAC,SAASvpB,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,Q+BlvGQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAC1C,IAGI6S,EAAc,4BAEd0V,EAAiB7lB,EAAE,QAAQkE,KAAK,8BAYpC,SAAS4hB,IACP,IAAIC,EAAe/lB,EAAEsB,MAAMod,QAlBL,qBAkBgCxa,KAjBnC,sBAkBf8hB,EAASD,EAAa3V,SAAS,WACnCpQ,EAAE,QAAQmQ,YAAY,mBAAoB6V,GAC1CD,EAAa5V,YAAY,WAAY6V,GAErChmB,EAAKmQ,EAAL,mBAAmC6V,EAAnC,KAA8CC,QAnB9B,4BAmBkD5e,QAElEwe,EAAe1V,YAAY,gBAlB7B,WAGE,IADgBnQ,EAPC,8BAOe0N,KAAK,MACtB,CACb,IAAIzJ,EAAA,WAAgBgH,KAAKib,MAAoB,IAAdjb,KAAKkb,UACnCnmB,EAXgB,sBAWE0N,KAAK,KAAMzJ,GAC7BjE,EAAEmQ,GAAazC,KAAK,sBAezB0Y,GACApmB,EAAE3C,GAAU6S,GAAG,QAASC,EAAa2V,GAErC9lB,EAAE3C,GAAUgpB,SAAQ,SAASvqB,GAET,KAAdA,EAAE8jB,SAAkB5f,EAhCL,sBAgCuBoQ,SAAS,YACjD0V,OAnCU,CAwCb1oB,OAAOC,SAASiC,S/BkvGjB,IAAIgnB,GAAG,CAAC,SAASjqB,EAAQU,EAAOJ,GAClC,agC5xGgB,IAER4pB,EhC4xGRvpB,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,SgCzxGLC,OAAQC,cAPHkpB,EAOajnB,OAPE,sBACU4E,KAAK,0BAExBgM,GAAG,SAAS,WACtBqW,EAAWxW,SAAS,kBhCsyGtB,IAAIyW,GAAG,CAAC,SAASnqB,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,QiCnzGQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAE1C0C,EAAE,sBAAsBmD,MAAK,WAC3B,IAAI7E,EAAM0B,EAAEsB,MACRqY,EAAQrb,EAAI4F,KAAK,QAErByV,EAAMzJ,GAAG,UAAS,SAASpU,GACzBA,EAAE2Z,iBACFnX,EAAIyR,SAAS,eAGf4J,EAAMzJ,GAAG,SAAQ,WACf5R,EAAIuS,YAAY,kBAZN,CAgBbzT,OAAOC,SAASiC,SjCozGjB,IAAImnB,GAAG,CAAC,SAASpqB,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,QkC30GQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAE1C0C,EAAE,6DAA6DmD,MAAK,WAElE,IAAMujB,EAAY1mB,EAAEsB,MAAM4C,KAAK,yBAC/ByiB,EAAc3mB,EAAEsB,MAAM4C,KAAK,0BAC3B0iB,EAAmBD,EAAYziB,KAAK,QACpC2iB,EAAYH,EAAUtX,WACtB0X,EAAYD,EAAUhqB,OAElB2oB,OAAA,EAEJ,SAASuB,IACP,IAAI1Z,EAAQrN,EAAE5C,GAAQiQ,QAEjByZ,EAAY,GAAOzZ,EAAQ,KAASyZ,EAAY,GAAOzZ,EAAQ,KAElEsZ,EAAY5W,SAAS,eAGrB4W,EAAY9V,YAAY,eAG5BkW,IAEAJ,EAAYzW,GAAG,SAAS,WAEtB,IAAI8W,EAAiBJ,EAAiB9e,OACtC6e,EAAYxW,YAAY,eACxByW,EAAiB9e,KAAwB,UAAnBkf,EAA6B,OAAS,SAE5DH,EAAU1jB,MAAK,WACb,IAAI8jB,EAAQjnB,EAAEsB,MAEV2lB,EAAM3mB,GAAG,WACX2mB,EAAMzR,YAAYzF,SAAS,eAEpBkX,EAAM3mB,GAAG,aAAe2mB,EAAM7W,SAAS,gBAC9C6W,EAAMvR,UAAU7E,YAAY,qBAKlC7Q,EAAE5C,GAAQ8Q,QAAO,WAEa,iBAAlBsX,GACRpoB,EAAO6T,aAAauU,GAEtBA,EAAgBpoB,EAAO6Q,YAAW,WAChC8Y,IAGI/mB,EAAE5C,GAAQiQ,QAAU,OACtBsZ,EAAYxZ,WAAW,SACvB0Z,EAAU1Z,WAAW,YAEvB,WAxDQ,CA4Db/P,OAAOC,SAASiC,SlC00GjB,IAAI4nB,GAAG,CAAC,SAAS7qB,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,QmC74GQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAuE1C,SAAS6pB,EAAiB7oB,EAAK8oB,GAC7B,IAAIniB,EA8DN,SAAqBL,GACnB,IAAI+U,EAAQ3Z,EAAE4E,EAAK+U,OACjBS,EAAYT,EAAMzV,KAAK,0BACvB6V,EAAQJ,EAAMzV,KAAK,sBACnBe,EAAW,GAGb,GAAImV,EAAUlW,KAAK,SAASrH,OAAQ,CAClC,IAAIyN,EAAQ8P,EAAUlW,KAAK,SAAS4H,MAChCxB,GACFrF,EAAS4C,KAAK,CACZlF,KAAM,WACNmF,KAAMwC,EACNpN,MAAOoN,IASb,OAJAyP,EAAM7V,KAAK,iBAAiBf,MAAK,WAC/B8B,EAAS4C,KAAK,CAAClF,KAAQ,MAAOzF,MAAS8C,EAAEsB,MAAMwK,MAAOhE,KAAQ9H,EAAEsB,MAAM6C,SAAS,SAAS2D,YAGnF7C,EApFQyV,CAAY,CAACf,MAAOrb,IAEnC,IAAK8oB,EAAc,CACjB,IAAIpQ,EAAWqQ,EAAoB,YACnB/oB,EAAI4F,KAAK,0BAGfA,KAAK,SAAS4H,IAAIkL,GAG5B/R,EAAW,GAGP+R,GACF/R,EAAS4C,KAAK,CACZlF,KAAM,WACNmF,KAAMkP,EACN9Z,MAAO8Z,IAIX,IAAI+C,EAAQzb,EAAI4F,KAAK,sBACjBc,EAAOqiB,EAAoB,QAC/B,GAAIriB,EACcA,EAAK9G,MAAM,KACjBiJ,SAAQ,SAACtD,GACbA,IACFA,EAAMA,EAAI3F,MAAM,KAChB+G,EAAS4C,KAAK,CACZlF,KAAM,MACNmF,KAAMjE,EAAI,GACV3G,MAAO2G,EAAI,KAEbkW,EAAM7V,KAAK,8BAAgCL,EAAI,GAAK,KAAKmW,KAAK,WAAW,QAqFnF,SAAyB3V,EAAS+iB,GAChC,IAAI7J,EAAS,IAAIC,gBAAgBpgB,EAAO4Z,SAASyG,QAC7C6J,EAAU/J,EAAOhP,IAAI,QAErB6Y,IACFE,EAAU,EACV/J,EAAOgK,IAAI,OAAQD,IAMrB,GAHA/J,EAAOiK,OAAO,YACdjK,EAAOiK,OAAO,QAEVnjB,EAAQxH,OAAQ,CAClB,IAAI4qB,EAAa,GACjBpjB,EAAQ8C,SAAQ,SAAC5C,GACK,aAAhBA,EAAO5B,MACT4a,EAAOgK,IAAI,WAAYhjB,EAAOrH,OAEZ,QAAhBqH,EAAO5B,MACT8kB,EAAW5f,KAAKtD,EAAOrH,MAAQ,IAAMqH,EAAOuD,SAIhDyV,EAAOgK,IAAI,OAAQE,EAAWhlB,KAAK,MAGrCib,QAAQgK,UACN,CAAEriB,KAAMiiB,GACLjqB,EAAS6L,MAFd,WAE8Boe,EAF9B,GAE4ClqB,EAAO4Z,SAAS2Q,OAASvqB,EAAO4Z,SAAS4Q,SAFrF,IAEiGrK,EAAOxV,YA3GxG8f,CAAgB5iB,EAAUmiB,GAG1B9oB,EAAI8D,QAAQ,mCAAoC,CAAC,CAAC6C,SAAUA,GAAWmiB,IAezE,SAASC,EAAoBS,GAE3B,OADa,IAAItK,gBAAgBpgB,EAAO4Z,SAASyG,QACnClP,IAAIuZ,GAlIpB9nB,EAAE,wBAAwBmD,MAAK,WAC7B,IAAI7E,EAAM0B,EAAEsB,MAERymB,EAAiB/nB,EAAE,uBAKvBA,EAAE3C,GAAU6S,GAAG,iCAAiC,WAC9C,IAAIsI,EAAwBxY,EAAE,yBAA0B1B,GACpDma,EAAkBD,EAAsBtU,KAAK,SACjD,GAAIuU,EAAgB5b,OAAQ,CAE1B,IAAI6b,EAAgBrb,EAASsb,eAAeF,EAAgB/K,KAAK,OAC7DkL,EAAQJ,EAAsB5Y,KAAK,sBACnCiZ,EAAQL,EAAsB5Y,KAAK,sBACnCkZ,EAAQN,EAAsB5Y,KAAK,sBACnCmZ,EAAQP,EAAsB5Y,KAAK,sBAKnCmB,EAAU,CACZiY,OAJkB,IAAI9O,OAAOC,KAAK8O,aAAa,IAAI/O,OAAOC,KAAK+O,OAAON,EAAMC,GAAQ,IAAI3O,OAAOC,KAAK+O,OAAOJ,EAAMC,IAKjHI,cAAc,EACdC,MAAO,CAAC,WACRC,sBAAuB,CAACC,QAAS,MACjCC,OAAQ,CAAC,aAEX9Z,GAAG+Z,aAAe,IAAItP,OAAOC,KAAKsP,OAAOC,aAAahB,EAAe3X,GAGvEomB,EAAiB7oB,GAAK,MAIxBypB,EAAe7X,GAAG,QAhCE,6BAgCwB,WAC1C6X,EAAe3lB,QAAQ,qCAAsC,CAAC,CAAC0C,cAAe,SAC9ExG,EAAI8D,QAAQ,4BAA6B,CAACuX,MAAOrb,EAAKwG,cAAe,QACrEqiB,EAAiB7oB,GAAK,MAIxBypB,EAAe7X,GAAG,QAtCA,2BAsCwB,SAAUpU,GAClD,IAAIgJ,EAAgB,CAClBnC,KAAQ3C,EAAElE,EAAEygB,QAAQ3c,KAAK,kBACzB1C,MAAS8C,EAAElE,EAAEygB,QAAQ3c,KAAK,mBAC1BkI,KAAQ9H,EAAElE,EAAEygB,QAAQzU,QAGtBigB,EAAe3lB,QAAQ,qCAAsC,CAAC,CAAC0C,cAAeA,KAC9ExG,EAAI8D,QAAQ,4BAA6B,CAACuX,MAAOrb,EAAKwG,cAAeA,IACrEqiB,EAAiB7oB,GAAK,MAIxBA,EAAI4R,GAAG,6BAA6B,SAASpU,EAAG8D,GA4DlD,IAAoBgF,EAGI,SAHJA,EA3DL,CAACE,cAAelF,EAAKkF,cAAe6U,MAAOrb,IA4D/BwG,cA2D3B,SAAmBF,GACjB,IAAI+U,EAAQ3Z,EAAE4E,EAAK+U,OACjBI,EAAQ/Z,EAAE,qBAAsB2Z,GAChCC,EAAS5Z,EAAE,yBAA0B2Z,GAAOzV,KAAK,SAG/C0V,EAAO/c,QACT+c,EAAO9N,IAAI,IAGbiO,EAAM7V,KAAK,iBAAiB8V,KAAK,WAAW,GAlE1CC,CAAUrV,GAsCd,SAAgCA,GAC9B,IAAI+U,EAAQ3Z,EAAE4E,EAAK+U,OACjBC,EAASD,EAAMzV,KAAK,0BACpB6V,EAAQJ,EAAMzV,KAAK,sBACnBY,EAAgBF,EAAKE,cAGI,aAAvBA,EAAcnC,KAMS,QAAvBmC,EAAcnC,MAChBoX,EAAM7V,KAAK,8BAAgCY,EAAc5H,MAAQ,KAAK8c,KAAK,WAAW,GANtFJ,EAAO1V,KAAK,SAAS4H,IAAI,IA1CzBoO,CAAuBtV,MA/DzBtG,EAAI6b,QAAO,SAASre,GAClBA,EAAE2Z,iBAGF0R,EAAiB7oB,GAAK,SAlEZ,CA8NblB,OAAOC,SAASiC,SnC24GjB,IAAI0oB,GAAG,CAAC,SAAS3rB,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IoC7mHT,IpCknHIuG,EAAWD,EoClnHfnH,EAAA,yBpCsnHIwe,EAAYrX,EoCrnHhBnH,EAAA,0BpCunHA,SAASmH,EAAuBhD,GAAO,OAAOA,GAAOA,EAAIG,WAAaH,EAAM,CAAErD,QAASqD,GAEvF7D,EAAQQ,QoCvnHQ,SAAUC,EAAQC,EAAU2C,GAE1C,IAGEsH,EAAM,4BA6RR,SAASwT,EAAclb,EAAMmb,GAI3B,IAAIC,EAAUhb,EAAEib,WACZC,EAAkB,GAGlBC,EAAeN,EAAA1d,QAAS0L,kBAAkBjJ,EAAMmb,GAClDK,EAAaP,EAAA1d,QAAS2L,uBAAuBqS,GAC7C7Q,EAAQ,GAGV,GAAIuQ,EAAA1d,QAASiH,UAAU+W,EAAapW,eAAeC,KAAM,YAAa,CAGpE,GAFAsF,EAAQuQ,EAAA1d,QAASsH,gBAAgB0W,EAAapW,eAAeC,KAAM,YAAY,QAEhD,IAApBvF,GAAG+Z,aACY/Z,GAAG+Z,aAAa8B,WAI1C,GADA7b,GAAGqK,SAAWrK,GAAGqK,SAAWrK,GAAGqK,SAAW,IAAII,OAAOC,KAAKoR,SACzB,oBAAtBF,mBAAqCA,kBAAkB7W,eAAe,YAE/EqW,EAAA1d,QAASoN,eAAe8Q,kBAAkB7Q,UAAU,SAAUgR,GAC5DN,EAAgBtb,KAAO6b,EAAoBD,EAAQL,GACnDD,EAAgBnR,QAAUyR,EAE1BR,EAAQnJ,QAAQqJ,UAIf,CAEH,IAAI+M,EAAgC3d,EAAQ,WAC5CuQ,EAAA1d,QAASwM,qBAAqBse,GAA+B,SAAUzM,GACrEN,EAAgBtb,KAAO6b,EAAoBD,EAAQL,GACnDD,EAAgBnR,QAAUyR,EAE1BR,EAAQnJ,QAAQqJ,YAMpBF,EAAQnJ,QAAQ,CAAEjS,KAAMwb,EAAY9Q,MAAOA,IAG7C,OAAO0Q,EAgBT,SAASkN,EAAiBtjB,GACxB,IAAIhF,EAAOgF,EAAKhF,KACdyF,EAAOT,EAAKS,KAAOT,EAAKS,KAAO,EAGjC,OAAOzF,EAAKuF,MAAMZ,QAAO,SAAUgB,GACjC,OAAOA,EAAKC,UAAYD,EAAKF,OAASA,KACrCX,KAAI,SAAUa,GACf,OAAOA,EAAKqc,UAchB,SAASnG,EAAoB1R,EAASnK,GAEpC,IAAK,IAAIic,KAAOjc,EAAKuF,MACfvF,EAAKuF,MAAMX,eAAeqX,KAC5Bjc,EAAKuF,MAAM0W,GAAK+F,OAAO9F,SAAW5R,OAAOC,KAAKwR,SAASwM,UAAUC,uBAAuBre,EAAQ4R,SAAS3E,SAAUpX,EAAKuF,MAAM0W,GAAK+F,OAAO5C,gBAK9Ipf,EAAKuF,MAAM4D,MAAK,SAAUxM,EAAGyM,GAC3B,OAAOzM,EAAEqlB,OAAO9F,SAAW9S,EAAE4Y,OAAO9F,YAItC,IAAIhV,EAAY+T,EAAA1d,QAAS+H,cAActF,EAAKuF,MAAOvF,EAAKmH,UAMxD,OALAnH,EAAKuF,MAAQ2B,EAAU3B,MACvBvF,EAAK6F,WAAaqB,EAAUrB,WAC5B7F,EAAK0K,MAAQP,EAGNnK,EA9XTI,EAAE,wBAAwBmD,MAAK,SAAUjH,GACvC,IAAIoC,EAAM0B,EAAEsB,MACV+mB,EAAU/pB,EAAI4F,KAAK,4BACnBokB,EAAOhqB,EAAI4F,KAAK,kBAChB8X,EAAkB1d,EAAI4F,KAAK,uBAC3B+X,EAAc3d,EAAI4F,KAAK,kBACvBuU,EAAkBna,EAAI4F,KAAK,wBAE7BT,EAAAtG,QAAOsK,KAAK4gB,GAGZ,IAAMlM,EAAU1c,GAAG8oB,gBAAgBrsB,GAE/BmgB,EAAa,GA0IjB,SAASI,EAAsB7X,GAC7BoX,EAAgB5Z,QAAQ,gCAAiC,CAACwC,EAAKhF,KAAKmF,iBACpEujB,EAAKlmB,QAAQ,8BAA+B,CAAC,CAAEgf,QAASxc,EAAKwc,QAAS9W,MAAO1F,EAAK0F,SAClF2R,EAAY7Z,QAAQ,4BAA6B,CAACwC,EAAKhF,KAAKqI,aACxDrD,EAAKE,eACP2T,EAAgBrW,QAAQ,4BAA6B,CAACwC,EAAKE,gBA7I/DwjB,EAAKpY,GAAG,+BAA+B,SAAUpU,EAAGslB,GAClD/E,EA6KJ,SAAkC1W,EAASyb,GAEzC,IAAI/E,EAAa,GAGbmM,EAAc,GAClBxoB,EAAE0E,IAAIiB,EAAQ8iB,YAAYtjB,OAAO,SAAU2G,EAAK1L,GAASooB,EAAYpoB,GAAS0L,KAC9EnG,EAAQ8iB,YAAYtjB,MAAQqjB,EAG5B,IAAI5gB,EAAQ,GACZ5H,EAAE0E,IAAIiB,EAAQsC,WAAWL,OAAO,SAAUkE,EAAK1L,GAASwH,EAAMxH,GAAS0L,KACvEnG,EAAQsC,WAAWL,MAAQA,EAG3B,IAAIiV,EAAgBlX,EAAQ8iB,YAAYtjB,MAEpC2X,EAAsBjC,EAAA1d,QAASuO,iBAAiBmR,EAAe,sBAkBnE,OAhBAR,EAAWtV,SAAWpB,EAAQoB,SAAWpB,EAAQoB,SAAWpB,EAAQ8iB,YAAYtjB,MAAMtI,OAEtFwf,EAAWtX,eAAiBY,EAAQZ,eAEpCsX,EAAWlX,MAoCb,SAA8CQ,EAASzD,EAAQkf,EAAShc,GACtE,IAAID,EAAQ,GAUZ,OATAic,EAAQja,SAAQ,SAAU5B,EAAMnF,GAC9B+E,EAAM/E,GAAS,CACboF,UAAU,EACVH,KAAM4F,KAAKgS,MAAM7c,EAAQ,GAAKgF,GAC9Bwc,OAAQrc,EACRrD,OAAQA,EAAO9B,GACfR,KAAM+F,EAAQvF,OAGX+E,EA/CYujB,CAAqC7L,EAAeC,EAAqBsE,EAAS/E,EAAWtV,UAEhHsV,EAAWpU,WAAatC,EAAQsC,WAEhCoU,EAAW5W,WAAawF,KAAKgS,KAAKZ,EAAWlX,MAAMtI,OAASwf,EAAWtV,UAEvEsV,EAAWnV,UAAY,GACvBmV,EAAWnV,UAAUpI,UA/NT,+BAgOZud,EAAWnV,UAAUtB,OA/NZ,mBAgOTyW,EAAWnV,UAAUI,IAAMA,EAC3B+U,EAAWnV,UAAUxC,IAhOZ,2BAkOF2X,EAhNQc,CAAyBhB,EAASiF,MAIjDphB,EAAE3C,GAAU6S,GAAG,iCAAiC,WAiG9C,SAASoM,EAAiBxgB,EAAGygB,GAC3B,IAAIC,EAAW5N,SAAS2N,EAAQ,IAE5BlV,IAAUvL,EAEdugB,EAAWpU,WAAa4S,EAAA1d,QAASuK,wBAAwB,CAAE9H,KAAMyc,EAAY1U,WAAY6U,IACzFH,EAAWtX,eAAiB8V,EAAA1d,QAASmL,wBAAwB,CAAE1I,KAAMyc,EAAYhX,KAAMmX,IACvF3B,EAAA1d,QAAS6J,kBAAkB,CAAEpH,KAAMyc,EAAYhX,KAAMmX,EAAUnV,MAAAA,IAE/D,IAAI+Z,EAAU8G,EAAiB,CAAEtoB,KAAMyc,EAAYhX,KAAMmX,IAEzDC,EAAsB,CAAE7c,KAAMyc,EAAY+E,QAASA,IAGrD,SAASuH,IACP,IAAIrL,EAAc,EACdC,EAAS,IAAIC,gBAAgBpgB,EAAO4Z,SAASyG,QAOjD,OANIC,QAAQC,QACVL,EAAcI,QAAQC,MAAMtY,MAE1BkY,IACFD,EAAcC,EAAOhP,IAAI,UAEpB+O,EAtHThf,EAAI4R,GAAG,QAAS5I,GAAK,SAAUxL,GAG7B,GAAIA,EAAEygB,OAAO7K,KACX5V,EAAE8sB,+BADJ,CAKA,IAAIxoB,EAAQJ,EAAElE,EAAE+sB,eAAezoB,QAG/BkoB,EAAKlmB,QAAQ,2BAA4BhC,GAGzC9B,EAAI4F,KA3CmBoD,uCA2CYuJ,YA/CvB,aAiDZ7Q,EAAElE,EAAE+sB,eAAe9Y,SAjDP,iBAqDdzR,EAAI4R,GAAG,qBAAsB5I,GAAK,SAAUxL,GAE1CwC,EAAI4F,KAnDmBoD,uCAmDYuJ,YAvDvB,aA2DZvS,EAAI4F,KAtDyBoD,8CAsDYuJ,YA1DzB,oBA6DhB7Q,EAAElE,EAAE+sB,eAAe9Y,SA7DH,oBA8DhB,IAAI3P,EAAQJ,EAAElE,EAAE+sB,eAAezoB,QAG/BkoB,EAAKlmB,QAAQ,4BAA6BhC,MAI5C9B,EAAI4R,GAAG,aAAc5I,GAAK,SAAUxL,GAClCwC,EAAI4F,KAlEyBoD,8CAkEYuJ,YAtEzB,uBA0ElB4H,EAAgBvI,GAAG,oCAAoC,SAAUpU,EAAGshB,EAAY0L,GAE1EzM,EAAWlX,OAASkX,EAAWlX,MAAMtI,OAAS,GAGhDie,EAAcuB,EAAYe,GAAYC,MAAK,SAAUtC,GACnD,IAAI1V,EAAO,EACNyjB,IACHzjB,EAAOuJ,SAAS+Z,IAAW,KAE7BtM,EAAatB,EAAenb,KAE5Bmb,EAAenb,KAAKmF,eAAiB8V,EAAA1d,QAASmL,wBAAwB,CACpE1I,KAAMmb,EAAenb,KACrByF,KAAMA,IAGR0V,EAAenb,KAAKqI,WAAa4S,EAAA1d,QAASuK,wBAAwB,CAChE9H,KAAMmb,EAAenb,KACrB+H,WAAYtC,IAGdwV,EAAA1d,QAAS6J,kBAAkB,CAACpH,KAAMmb,EAAenb,KAAMyF,KAAMA,IAE7D0V,EAAeqG,QAAU8G,EAAiB,CAACtoB,KAAMmb,EAAenb,KAAMyF,KAAMA,IAE5EoX,EAAsB1B,SAM5BiB,EAAgB9L,GAAG,sCAAsC,SAAUpU,EAAGgJ,GAGpEgW,EAAcuB,EAAYvX,GAAeuY,MAAK,SAAUtC,GACtDsB,EAAatB,EAAenb,KAC5Bmb,EAAejW,cAAgBA,EAE/BuX,EAAatB,EAAenb,KAE5Bmb,EAAenb,KAAKmF,eAAiB8V,EAAA1d,QAASmL,wBAAwB,CAAE1I,KAAMmb,EAAenb,OAE7Fmb,EAAenb,KAAKqI,WAAa4S,EAAA1d,QAASuK,wBAAwB,CAAE9H,KAAMmb,EAAenb,OAEzFib,EAAA1d,QAAS6J,kBAAkB,CAAEpH,KAAMmb,EAAenb,OAElDmb,EAAeqG,QAAU8G,EAAiB,CAAEtoB,KAAMmb,EAAenb,OAEjE6c,EAAsB1B,SA+B1BkB,EAAY/L,GAAG,2BAA4BoM,GAG3CA,EAAiB,KAFCqM,WA9JR,CA6YZvrB,OAAQC,SAAUiC,SpC6nHpB,CAACse,wBAAwB,EAAEpR,uBAAuB,IAAIuc,GAAG,CAAC,SAAS1sB,EAAQU,EAAOJ,GACpF,aqC9gIA,IAAMqsB,EAAO3rB,SAASqa,cAAc,QAChCrK,EAAQ2b,EAAKC,YACXC,EAAa7rB,SAASqa,cAAc,0BACtCyR,EAAiBD,EAAWxR,cAAc,yBAExCmO,GADYsD,EAAeC,YACV/rB,SAASqa,cAAc,+BAE1C2R,GADahsB,SAASqa,cAAc,gBACxBra,SAASia,iBAAiB,wBACpCgS,EAAcjsB,SAASqa,cAAc,iBACrC6R,EAAalsB,SAASqa,cAAc,iDA+M1C,SAAS8R,IACPR,EAAKS,UAAUC,OAAO,aACtBJ,EAAYG,UAAUC,OAAO,gBAC7BP,EAAeC,YAAc,OAC7BF,EAAWS,aAAa,eAAgB,SACxCT,EAAWS,aAAa,gBAAiB,SACzCT,EAAWS,aAAa,aAAc,mCACxB,OACd9D,EAAe4D,UAAUC,OAAO,eAGlC,SAASE,IACPZ,EAAKS,UAAUI,IAAI,aACnBP,EAAYG,UAAUI,IAAI,gBAC1BV,EAAeC,YAAc,QACf,QACdF,EAAWS,aAAa,eAAgB,QACxCT,EAAWS,aAAa,gBAAiB,QACzCT,EAAWS,aAAa,aAAc,oCACtC9D,EAAe4D,UAAUI,IAAI,eAG/B,SAASC,EAAcvkB,GAKrB,IAHA,IAAIpB,EAAW,GACX4lB,EAAcxkB,EAAKykB,WAAWC,WAE3BF,GACDA,IAAgBxkB,GAAQwkB,EAAYG,WAAaC,KAAKC,cACxDjmB,EAAS0D,KAAKkiB,GAChBA,EAAcA,EAAYM,oBAAsBN,EAAYO,YAG9D,IAX2B,IAAA/S,EAAA,SAWlBrb,GACHiI,EAASjI,GAAGutB,UAAUc,SAAS,iBAEjCtc,YAAW,WACT9J,EAASjI,GAAGwb,cAAc,wBAAwBhJ,MAAMtB,OAAS,IACjEjJ,EAASjI,GAAGwb,cAAc,wBAAwB+R,UAAUI,IAAI,aAChE1lB,EAASjI,GAAGwb,cAAc,2BAA2BhJ,MAAM8b,QAAU,IACrErmB,EAASjI,GAAGutB,UAAUC,OAAO,gBAC7BvlB,EAASjI,GAAGwb,cAAc,0BAA0BiS,aAAa,gBAAiB,SAClFxlB,EAASjI,GAAGwb,cAAc,0BAA0BiS,aAAa,aAAc,eAE9E,MAXEztB,EAAI,EAAGA,EAAIiI,EAAStH,OAAQX,IAAKqb,EAAjCrb,GA7OP,OAASgtB,IACXA,EAAWuB,iBAAiB,SAAS,SAAU3T,GAC7CA,EAAMrB,iBAEFuT,EAAKS,UAAUc,SAAS,aAC1Bf,KAEAN,EAAW7hB,QACXuiB,QAIJV,EAAWuB,iBAAiB,WAAW,SAAU3uB,GAEjC,aAAVA,EAAEW,OACJqa,MAAMrB,iBACNmU,IAEIxsB,OAAOstB,WAAa,IACtBzc,YAAW,WACTob,EAAU,GAAG3R,cAAc,0BAA0BrQ,UACpD,KAEH4G,YAAW,WACT5Q,SAASqa,cAAc,gCAAgCrQ,UACtD,MAIO,OAAVvL,EAAEW,OACJX,EAAE2Z,iBACFpY,SAASqa,cAAc,6BAA6BrQ,SAGlDvL,EAAEikB,UAAsB,OAAVjkB,EAAEW,MAClB+sB,IAGY,UAAV1tB,EAAEW,MAA+B,MAAXX,EAAEynB,OAC1BiG,QAKF,OAASD,GACXA,EAAWkB,iBAAiB,UAAU,SAAU3T,GAC1C1Z,OAAOstB,WAAa,MAGxB5T,EAAMrB,iBAENmU,IAEA3b,YAAW,WAET5Q,SAASqa,cAAc,gCAAgCrQ,UAEtD,SAIP,GAAGF,QAAQvK,KAAKysB,GAAW,SAAU9jB,GAEnC,IAAMolB,EAAaplB,EAAKmS,cAAc,0BAChCkT,EAAUrlB,EAAKmS,cAAc,wBAC7BmT,EAAWD,EAAQlT,cAAc,2BACnCoT,EAAeF,EAAQtT,iBAAiB,yBAE5CuT,EAASnc,MAAM8b,QAAU,IAEzBG,EAAWF,iBAAiB,SAAS,SAAS3uB,GAC5CguB,EAAcvkB,MAGhBolB,EAAWF,iBAAiB,SAAS,SAAU3uB,GAyB7C,GAvBAguB,EAAcvkB,GAGVA,EAAKkkB,UAAUc,SAAS,iBAC1BhlB,EAAKkkB,UAAUC,OAAO,gBACtBiB,EAAWhB,aAAa,gBAAiB,SACzCgB,EAAWhB,aAAa,aAAc,aACtCpkB,EAAKmJ,MAAMqc,cAAgB,OAE3B9c,YAAW,WACT1I,EAAKylB,gBAAgB,WACpB,OAEHzlB,EAAKkkB,UAAUI,IAAI,gBACnBc,EAAWhB,aAAa,gBAAiB,QACzCpkB,EAAKmJ,MAAMqc,cAAgB,OAC3BJ,EAAWhB,aAAa,aAAc,aACtC1b,YAAW,WACT1I,EAAKylB,gBAAgB,WACpB,MAIDJ,EAAQnB,UAAUc,SAAS,aAAc,CAI3CK,EAAQnB,UAAUC,OAAO,aACzBkB,EAAQlc,MAAMtB,OAAS,OAGvB,IAAIA,EAASwd,EAAQK,aAAe,KAKpCL,EAAQlc,MAAMtB,OAAS,IAEvBa,YAAW,WACT2c,EAAQlc,MAAMtB,OAASA,EACvByd,EAASnc,MAAM8b,QAAU,MACxB,SAIHI,EAAQlc,MAAMtB,OAAS,IACvByd,EAASnc,MAAM8b,QAAU,IAEzBvc,YAAW,WACT2c,EAAQnB,UAAUI,IAAI,eAErB,QAIPc,EAAWF,iBAAiB,WAAW,SAAU3uB,GAEjC,aAAVA,EAAEW,MACQouB,EAASK,qBAAqB,MAAM,GAC1CxT,cAAc,sBAAsBrQ,QAG9B,UAAVvL,EAAEW,MAA+B,MAAXX,EAAEynB,QACtBhe,EAAKkkB,UAAUc,SAAS,iBAC1BM,EAASnc,MAAM8b,QAAU,IACzBI,EAAQlc,MAAMtB,OAAS,IACvBud,EAAWQ,cAAc1B,UAAUC,OAAO,gBAC1CiB,EAAWhB,aAAa,gBAAiB,SACzCgB,EAAWhB,aAAa,aAAc,aAEtC1b,YAAW,WACT2c,EAAQnB,UAAUI,IAAI,eACrB,MAIHL,KAIA1tB,EAAEikB,UAAsB,OAAVjkB,EAAEW,OAClBouB,EAASnc,MAAM8b,QAAU,IACzBI,EAAQlc,MAAMtB,OAAS,IACvB7H,EAAKkkB,UAAUC,OAAO,gBACtBiB,EAAWhB,aAAa,gBAAiB,SACzCgB,EAAWhB,aAAa,aAAc,aAEtC1b,YAAW,WACT2c,EAAQnB,UAAUI,IAAI,eACrB,MAGDxc,EAAQ,KAAgB,OAATvR,EAAE+f,MACd8O,EAAWQ,cAAcd,oBAC1BM,EAAWQ,cAAc1B,UAAUc,SAAS,iBAC9Cf,QAKN,GAAGriB,QAAQvK,KAAKkuB,GAAc,SAAUM,GACtC,IAAMC,EAAUD,EAAQE,uBAClBC,EAAUH,EAAQf,mBAExBe,EAAQX,iBAAiB,WAAW,SAAU3uB,GAE5C,OAAQA,EAAEW,MACR,IAAK,UACL,IAAK,aACC2uB,EAAUC,IACZA,EAAQ3T,cAAc,sBAAsBrQ,QAE9C,MACF,IAAK,YACL,IAAK,cACC+jB,EAAUG,IACZA,EAAQ7T,cAAc,sBAAsBrQ,QAE9C,MACF,IAAK,SACHsjB,EAAWtjB,kBA2DrBhK,SAASqa,cAAc,yBAAyB+S,iBAAiB,SAAS,WACxEjB,OAIFF,EAAYmB,iBAAiB,SAAS,WACpCjB,OAGF,IAAIgC,OAAA,EACJpuB,OAAOquB,SAAW,WAChBxa,aAAaua,GACbA,EAAYvd,YAAW,WACrBZ,EAAQ2b,EAAKC,cACZ,OrC4gIH,IAAIyC,GAAG,CAAC,SAASrvB,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IsCzyIT,ItCgzIgCsD,EsChzIhCqgB,EAAAxkB,EAAA,sCtC8yIIkH,GAE4B/C,EAFoBqgB,IAECrgB,EAAIG,WAAaH,EAAM,CAAErD,QAASqD,GAEvF7D,EAAQQ,QsChzIQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAE1C0C,EAAE,oBAAoBmD,MAAK,SAASjH,GAClC,IAAIoC,EAAM0B,EAAEsB,MACR1B,EAAO+rB,YAAYzvB,GACnByP,GAAmB,EAAApI,EAAApG,SAAY,WAC/ByuB,EAAUttB,EAAI4F,KAAK,UAAUqD,QAC7BskB,EAAevtB,EAAI4F,KAAK,gBAY5B,SAAS4nB,EAAe5uB,GACtB,YAA0C,IAA/B0C,EAAKmsB,cAAc7uB,IAC5B2uB,EAAa1pB,KAAK,KACX,IAGT0pB,EAAa1pB,KAAKwJ,EAAiB/L,EAAKmsB,cAAc7uB,MAE/C,GAjBT4uB,EAAeF,EAAQ9f,OAGvB8f,EAAQI,QAAO,WAEbF,EAAeF,EAAQ9f,aAfb,CA+Bb1O,OAAOC,SAASiC,StCizIjB,CAACiN,qCAAqC,IAAI0f,GAAG,CAAC,SAAS5vB,EAAQU,EAAOJ,GACxE,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,QuCz1IQ,SAAUC,EAAQC,EAAU2C,EAAG1C,GAE7C0C,EAAE,gCAAgCmD,MAAK,WAErC,IAAM+oB,EAAUlsB,EAAEsB,MACZ6qB,EAAeD,EAAQhoB,KAAK,uCAC5BkoB,EAAeF,EAAQhoB,KAAK,+CAG5BmoB,EAAeH,EAAQtmB,SAASwC,OAClCkkB,EAAYD,EAAanoB,KAAK,sBAC9BqoB,EAAcF,EAAanoB,KAAK,sBAChCsoB,EAAiBH,EAAanoB,KAAK,yBACnCuoB,EAAeJ,EAAanoB,KAAK,0BAE/B2hB,EAAiB7lB,EAAE,QAAQkE,KAAK,8BAEtCgoB,EAAQhoB,KAAK,OAAOf,MAAK,WACvBnD,EAAEsB,MAAMoM,KAAK,YAAa,YAI5B,IAAMgf,EAAgBR,EAAQhoB,KAAK,+CAI7ByoB,EAAoBT,EAAQhoB,KAAK,uCACjC0oB,EAAqBV,EAAQhoB,KAAK,mCAClC2oB,EAAgBX,EAAQhoB,KAAK,0DAG/B4oB,EAAcZ,EAAQhoB,KAAK,kBAG3B6oB,EAAiBb,EAAQhoB,KAAK,oDAGlC,GAAIlE,EAAE,gBAAgBnD,OAAQ,CAC5B,IAAMmwB,EAAehtB,EAAE,oBAAoBsN,SAASC,IAAMvN,EAAE,oBAAoBoN,SAC5E6f,EAAaf,EAAQ9e,SACzBpN,EAAE5C,GAAQ+Q,QAAO,WACf,IAAM+e,EAAeltB,EAAE5C,GAAQwQ,YACb5N,EAAE5C,GAAQiQ,QAGxB2f,EAAeE,GACjBltB,EAAE,gBAAgBmN,WAAW,SAC7B+e,EAAQrb,YAAY,WAGpB7Q,EAAE,gBAAgB+N,IAAI,cAAekf,GACrCf,EAAQnc,SAAS,aAMvB2c,EAAcxc,GAAG,SAAS,WAEnBgc,EAAQ9b,SAAS,UACpB8b,EAAQnc,SAAS,SAGnB2c,EAAc7C,IAAIuC,GAAcjc,YAAY,aAE5CnQ,EAAE,cAAc6Q,YAAY,aAE5B7Q,EAAE,mBAAmB0pB,SAGrB1pB,EAAE,QAAQmQ,YAAY,mBAEtB0V,EAAed,YAKjB8H,EAAc3c,GAAG,SAAS,WACxBkc,EAAajc,YAAY,aAEzB,IAAIgd,EAAeN,EAAc3oB,KAAK,iBACtCipB,EAAarlB,KAA4B,SAAvBqlB,EAAarlB,OAAoB,2BAA6B,YAGlF6kB,EAAkBzc,GAAG,UAAU,WAC7B,IAAIkd,EAAeptB,EAAEsB,MAAMoM,KAAK,UAAY,MACxC2f,EAAeT,EAAmB9gB,MACtC9L,EAAEsB,MAAMoM,KAAK,SAAU0f,EAAeC,MAIxCP,EAAY3pB,MAAK,WACf,IAAIkM,EAAUrP,EAAEsB,MACZgsB,EAAgBje,EAAQzJ,OAAO,eAC/B2nB,EAAYD,EAAcppB,KAAK,0CAC/BspB,EAAcxtB,EAAE,0CAA0CytB,IAAIF,GAC9DN,EAAab,EAAa5e,cAE9B8f,EAAcpd,GAAG,yBAAyB,WAGxC,KAFkBlQ,EAAE5C,GAAQiQ,QA5EZ,KAoFd,OAAO,EALPrN,EAAE,mBAAmB0pB,SACrB4D,EAAcnd,YAAY,aAC1Bod,EAAUxf,IAAI,MAAOkf,MAOzB5d,EAAQa,GAAG,SAAS,WAClBqd,EAAUrpB,KAAK,WAAWwJ,KAAK,YAAa,GAC5C8f,EAAYtpB,KAAK,WAAWwJ,KAAK,YAAa,GAE9C2B,EAAQqe,OAAM,SAAU5xB,GAEtBkE,EAAE,cAAc6Q,YAAY,aAEX,IAAb/U,EAAE8jB,SAA8B,IAAb9jB,EAAE8jB,UACvB5f,EAAE,mBAAmB0pB,SAErB6D,EAAUrpB,KAAK,WAAWwJ,KAAK,WAAY,GAC3C4f,EAAcnd,YAAY,aAC1Bod,EAAUxf,IAAI,MAAOkf,GAErBK,EAAczD,IAAI0D,GAAWrd,GAAG,yBAAyB,WACvD,OAAO,YAMfb,EAAQa,GAAG,SAAS,WAGlB,KAFkBlQ,EAAE5C,GAAQiQ,QA/GZ,KA2Hd,OAAO,EATPigB,EAAcnd,YAAY,aAC1B,IAAIwd,EAAete,EAAQwP,OAAM,GAG5B7e,EAAE,mBAAmBnD,QACxB8wB,EAAa5d,SAAS,kBAAkB6d,UAAUL,SAU1DvtB,EAAE,QAAQkQ,GAAG,QAAS,mBAAmB,WACvClQ,EAAE,mBAAmB0pB,YAIvBqD,EAAe5pB,MAAK,WAElB,IAAIkM,EAAUrP,EAAEsB,MACZusB,EAAUxe,EAAQzJ,SAAS1B,KAAK,2BACpCmL,EAAQa,GAAG,SAAS,WACAlQ,EAAE5C,GAAQiQ,QA3IZ,MA6IdgC,EAAQc,YAAY,aACpBd,EAAQjH,KAAK,6BAA6ByhB,IAAIgE,GAAS1d,YAAY,oBAMrEsc,EAAa5vB,SACf4vB,EAAa/e,KAAK,KAAM,iBACxBye,EAAa/kB,OAAO,4HAGlBklB,EAAUzvB,SACZyvB,EAAU5e,KAAK,KAAM,QACrBye,EAAa/kB,OAAO,sGAGlBmlB,EAAY1vB,SACd0vB,EAAY7e,KAAK,KAAM,UACvBye,EAAa/kB,OAAO,0GAGlBolB,EAAe3vB,SACjB2vB,EAAe9e,KAAK,KAAM,aAC1Bye,EAAa/kB,OAAO,gHAGtBpH,EAAE,kDAAkD8tB,SAAS3B,GAE7DnsB,EAAE,kBAAkBkQ,GAAG,SAAS,SAAUpU,GACxCkE,EAAE,cAAc6Q,YAAY,gBAG9B7Q,EAAE,kBAAkBkQ,GAAG,SAAS,SAAUpU,GAExCkE,EAAE,cAAc6Q,YAAY,aAC5B7Q,EAAE,cAAc6Q,YAAY,aAC5B7Q,EAAE,cAAc6Q,YAAY,aAC5B7Q,EAAE,mBAAmB0pB,SAErB5tB,EAAE2Z,iBACF,IAAIuB,EAAWhX,EAAEsB,MAAMoM,KAAK,QAC5B1N,EAAE,cAAc2W,QAAQ,CAAE/I,UAAW5N,EAAEgX,GAAU1J,SAASC,IAAM,KAAO,KAEnEsY,EAAevlB,GAAG,YACpBulB,EAAetB,UAInBvkB,EAAE5C,GAAQ8S,GAAG,UAAU,WACrB,IAAIgV,EAAcllB,EAAE5C,GAAQiQ,QACxB0gB,EAAiB7B,EAAQhoB,KAAK,8CAElC,GAAIghB,EAlMc,KAoMhB,GAAkC,IAA9BllB,EAAE,iBAAiBnD,OAYrB,GAVKmD,EAAE,8BAA8BnD,QAMnCkxB,EAAeC,MAAM,EAAG,GAAGC,QAAQ,gCACnCF,EAAiBA,EAAeC,MAAM,KALtChuB,EAAE,kCAAkC+P,SAAS,gBAC7Cge,EAAiBA,EAAeN,IAAI,WAOlCM,EAAelxB,OAAS,EAC1BkxB,EAAerO,KAAK,qCAIpB,IAAK,IAAIxjB,EAAI,EAAGA,EAAI6xB,EAAelxB,OAAQX,GAAK,EAC9C6xB,EAAeC,MAAM9xB,EAAGA,EAAI,GAAG+xB,QAAQ,qCAM7CjuB,EAAE,iBAAiBkE,KAAK6pB,GAAgBG,SACxCluB,EAAE,QAAQ6Q,YAAY,sBAGvB3C,YAvPS,CAyPb9Q,OAAQC,SAAUiC,SvCi1InB,IAAI6uB,GAAG,CAAC,SAAS9xB,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IwC9kJT,IxCqlJgCsD,EwCrlJhCC,EAAApE,EAAA,qBxCmlJIqE,GAE4BF,EAFMC,IAEeD,EAAIG,WAAaH,EAAM,CAAErD,QAASqD,GAEvF7D,EAAQQ,QwCrlJQ,SAAUC,EAAQC,EAAU2C,EAAG1C,GAC7C,GAAmC,IAA/B0C,EAAE,kBAAkBnD,OAAxB,CASAmD,EAAE,kBAAkBmD,MAAK,WACvB,IAAI7E,EAAM0B,EAAEsB,MACR8sB,EAAmB,EACnB7Q,EAAS,IAAIC,gBAAgBpgB,EAAO4Z,SAASyG,QAC7CC,QAAQC,OAASD,QAAQC,MAAMtY,KACjC+oB,EAAmB1Q,QAAQC,MAAMtY,KACxBkY,EAAO8Q,IAAI,WACpBD,EAAmB7Q,EAAOhP,IAAI,UAIhCjQ,EAAI4R,GAAG,QAfQ,uBAea,WAE1Boe,EADAF,EAAmBxf,SAASwf,GAAoB,GAEhD9vB,EAAI8D,QAAQ,2BAA4B,CAACsb,QAAQC,MAAMtY,UAGzD/G,EAAI4R,GAAG,QApBM,uBAoBe,WAE1Boe,EADAF,EAAmBxf,SAASwf,GAAoB,GAEhD9vB,EAAI8D,QAAQ,2BAA4B,CAACsb,QAAQC,MAAMtY,UAGzD/G,EAAI4R,GAAG,QAzBM,uBAyBe,SAAUpU,GAEpCwyB,EADAF,EAAmBpuB,EAAElE,EAAEygB,QAAQ3c,KAAK,SAEpCtB,EAAI8D,QAAQ,2BAA4B,CAACsb,QAAQC,MAAMtY,UAGzDjI,EAAOmxB,WAAa,SAAUzyB,GACxBA,EAAE6hB,OACA7hB,EAAE6hB,MAAMtY,MACV/G,EAAI8D,QAAQ,2BAA4B,CAACtG,EAAE6hB,MAAMtY,QAMvD/G,EAAI4R,GAAG,6BAA6B,SAAUpU,EAAG8D,IAgBnD,SAA0BgF,GAExB,IAAKA,EAAKhF,KACR,QAIK,EAAAc,EAAAvD,SAAO,8BACXuE,MAAK,SAAAM,GAGJ,IAAIiG,EAoBV,SAAmCrI,GACjC,IAAKA,EACH,OAGF,IAAI4uB,EAAsB5uB,EACxB6uB,EAAU7uB,EAAKyI,YACfqmB,EAAO9uB,EAAK6F,WACZkpB,EAAQ,EAIM,IAAZF,GAAiBA,IAAYC,IAC/BC,EAAQ,GASV,IANA,IAAIC,EAAOH,EAAUE,EACnBE,EAAQJ,EAAUE,EAAQ,EAC1BG,EAAQ,GACRC,EAAoB,GACpBC,OAAA,EAEO9yB,EAAI,EAAGA,GAAKwyB,EAAMxyB,KAChB,GAALA,GAAUA,GAAKwyB,GAAQxyB,GAAK0yB,GAAQ1yB,EAAI2yB,IAC1CC,EAAMjnB,KAAK3L,GAxBwB,IAAA+yB,GAAA,EAAAC,GAAA,EAAAC,OA/F3B,EA+F2B,IA4BvC,IAAA,IAAAC,EAAAC,EAAcP,EAAdQ,OAAAC,cAAAN,GAAAG,EAAAC,EAAAjnB,QAAAiV,MAAA4R,GAAA,EAAqB,CAAA,IAAZxL,EAAY2L,EAAAlyB,MACf8xB,IACEvL,EAAIuL,GAAM,EACZD,EAAkBlnB,KAAK,CAAEC,KAAMknB,EAAI,EAAGhnB,QAAQ,IAEvCyb,EAAIuL,GAAM,GACjBD,EAAkBlnB,KAAK,CAAEC,KAAM,SAAUE,QAAQ,KAIrD,IAAIA,GAAS,EACTyb,IAAMgL,IACRzmB,GAAS,GAEX+mB,EAAkBlnB,KAAK,CAAEC,KAAM2b,EAAGzb,OAAQA,IAC1CgnB,EAAIvL,GA3CiC,MAAA/kB,GAAAwwB,GAAA,EAAAC,EAAAzwB,EAAA,QAAA,KAAAuwB,GAAAI,EAAAG,QAAAH,EAAAG,SAAA,QAAA,GAAAN,EAAA,MAAAC,GAgDvC,OAFAX,EAAoB5mB,MAAQmnB,EAErBP,EApEciB,CAA0B7qB,EAAKhF,MAEhD,OAAOoC,EAASC,YAAY,CAAEgG,WAAYA,OAE3CvG,MAAK,SAAAQ,GAKJ,IAAMwtB,EAAkB1vB,EAAEA,EAAE2vB,UAAUztB,IAASC,OAC/CyC,EAAKtG,IAAI6D,KAAKutB,MApChBE,CAAiB,CAAEhwB,KAAMA,EAAMtB,IAAKA,OAItCgwB,EAAoBF,GAAkB,MA6FxC,SAASE,EAAoBhH,GAA0B,IAAjB7oB,EAAiB2hB,UAAAvjB,OAAA,QAlJzC,IAkJyCujB,UAAA,IAAAA,UAAA,GACjD7C,EAAS,IAAIC,gBAAgBpgB,EAAO4Z,SAASyG,QACjDF,EAAOgK,IAAI,QAASD,GAEhB7oB,EACFif,QAAQmS,aACN,CAAExqB,KAAMiiB,GACLjqB,EAAS6L,MAFd,WAE8Boe,EAF9B,GAE4ClqB,EAAO4Z,SAAS2Q,OAASvqB,EAAO4Z,SAAS4Q,SAFrF,IAEiGrK,EAAOxV,YAIxG2V,QAAQgK,UACN,CAAEriB,KAAMiiB,GACLjqB,EAAS6L,MAFd,WAE8Boe,EAF9B,GAE4ClqB,EAAO4Z,SAAS2Q,OAASvqB,EAAO4Z,SAAS4Q,SAFrF,IAEiGrK,EAAOxV,aA/J9F,CAoKb3K,OAAQC,SAAUiC,SxCmmJnB,CAACwwB,oBAAoB,KAAKC,GAAG,CAAC,SAAS1zB,EAAQU,EAAOJ,GACxD,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,QyChxJQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAE1C0C,EAAE,kBAAkBmD,MAAK,WACvB,IAAI7E,EAAM0B,EAAEsB,MACR0uB,EAAW1xB,EAAIsB,KAAK,YACpBqwB,EAAS,IAAIC,QAAQ,CACvBC,MAAO7uB,KACPmZ,OAAQ,eAGV,OAAOuV,GACL,IAAK,MACHC,EAAOG,WAAW,IAAIzyB,MACtB,MACF,IAAK,MACHsyB,EAAOI,WAAW,IAAI1yB,MAI1BW,EAAIoP,KAAK,OAAO,WAnBJ,CAsBbtQ,OAAOC,SAASiC,SzCixJjB,IAAIgxB,GAAG,CAAC,SAASj0B,EAAQU,EAAOJ,GAClC,a0CryJA,SAAS4zB,EAAcC,GAQrB,IANA,IAAMC,EAASC,MAAMC,KAAKH,EAAMI,YAAYrsB,QAAO,SAASssB,GAC1D,OAAOA,EAAK3G,UAAYC,KAAKC,gBAGzB0G,EAAYL,EAAO5zB,OAEjBX,EAAI,EAAGA,EAAI40B,EAAW50B,IAC5Bu0B,EAAOv0B,GAAGutB,UAAUC,OAAO,eAC3B+G,EAAOv0B,GAAGutB,UAAUC,OAAO,gBAM7B,IAAMqH,EAAY3zB,OAAOmB,iBAAiBkyB,EAAO,IAC3CO,EACJC,WAAWF,EAAUG,YACrBD,WAAWF,EAAUI,aACrBF,WAAWF,EAAU1jB,OACrB4jB,WAAWF,EAAUK,cACrBH,WAAWF,EAAUM,aAGjBC,EAAYl0B,OAAOmB,iBAAiBiyB,GACpCe,EACJN,WAAWK,EAAUjkB,OACrB4jB,WAAWK,EAAUE,YACrBP,WAAWK,EAAUH,aACrBF,WAAWK,EAAUF,cACrBH,WAAWK,EAAUG,aAGjBC,EAAczmB,KAAKib,MAAMqL,EAAYP,GAGxCU,EAAc,GAMK,IAFCZ,EAAYY,IAOnCjB,EAAOK,EAAY,EAAI,GAAGrH,UAAUI,IAAI,gBAExC4G,EAAOK,EAAY,EAAIY,GAAajI,UAAUI,IAAI,gBAMpD,SAAS8H,EAAqBnB,GAE5B,IAAIoB,GAAU,EAEdrB,EAAcC,GAEdpzB,OAAOqtB,iBAAiB,UAAU,WAChCrtB,OAAO6T,aAAa2gB,GACpBA,EAAUx0B,OAAO6Q,YACf,WACEsiB,EAAcC,KAEhB,Q1CmuJNxzB,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IA+DTP,EAAQQ,Q0C9xJQ,SAAUC,EAAQC,EAAUC,GAI1C,IAHA,IAAMu0B,EAAmBx0B,EAASia,iBAAiB,wBAC7Cza,EAASg1B,EAAiBh1B,OAExBX,EAAI,EAAGA,EAAIW,EAAQX,IACzBy1B,EAAqBE,EAAiB31B,IAL1B,CAObkB,OAAQC,W1CgyJT,IAAIy0B,GAAG,CAAC,SAASz1B,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,Q2C13JQ,SAAUC,EAAQC,EAAU2C,EAAG1C,GAM7C,SAASmK,EAAKrH,GACZ,IAAMsmB,EAAY1mB,EAAEsB,MACdywB,EAAerL,EAAUhI,QAAQ,wCACjCsT,EAAgBtL,EAAUte,KAAK,2CAErC4pB,EAAc9hB,GAAG,SAAS,WACxB8hB,EAAc7hB,YAAY,QAC1B4hB,EAAa5hB,YAAY,WAGvBuW,EAAUxiB,KAAK,wBAAwBrH,OAAS,IAClDm1B,EAAcjiB,SAAS,cAf3B/P,EAAE,uDAAuDmD,MAAK,SAAU/C,GACtEqH,EAAKmO,MAAMtU,KAAM,CAAClB,OAHN,CAqBbhD,OAAQC,SAAUiC,S3C23JnB,IAAI2yB,GAAG,CAAC,SAAS51B,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,Q4Cv5JQ,SAAUC,EAAQC,EAAU2C,GAS1C,IAAMkyB,EAAUlyB,EAAE5C,GACd+0B,EAAmB,GAIvB,SAASC,EAAUC,GAEjBA,EAAGC,OACApuB,KAAK,YACLf,MAAK,SAAUjH,GACdm2B,EAAGE,cACAruB,KAAK,MACLsD,GAAGtL,GACHmR,MAAMrN,EAAEsB,MAAM+L,YAGjBglB,EAAGE,gBAELF,EAAGE,cAAcruB,KAAK,SAASmJ,MAAMglB,EAAGC,OAAOjlB,SAC/CglB,EAAGE,cAAcllB,MAAMglB,EAAGE,cAAc3sB,SAASyH,UAMrD,SAASmlB,EAAgB1xB,GAAuC,IAA9B2xB,EAA8BrS,UAAAvjB,OAAA,QAAAS,IAAA8iB,UAAA,IAAAA,UAAA,GAAfhgB,EAAeggB,UAAAvjB,OAAA,QAAAS,IAAA8iB,UAAA,IAAAA,UAAA,GACxD7e,EAAWvB,EAAEc,GACfwxB,EAAS/wB,EAAS2C,KAAK,SAASupB,IAAI,eACpCiF,EAASJ,EAAOpuB,KAAK,SAASupB,IAAI,qBAChCkF,EAAWD,EAAO71B,OACpB+1B,EAAc,EACZC,EAAgBH,EAAOhU,QAAQ,eAAe7hB,OAC9Ci2B,EAAQR,EAAOpuB,KAAK,MAAMrH,OAC5B01B,EAAgB,KACdQ,EAAYT,EAAOjlB,QAAUilB,EAAO1sB,SAASyH,QAGnD,GAAIslB,GAAYG,IAAUD,EAAe,CACvCD,EAAcF,EAAO,GAAGM,aAGnBP,EAQHF,EAAgBhxB,EAAS2C,KAAK,kBAP9BwuB,EAASA,EAAO7T,QAChByT,EAAOW,MAAM,4FAEbV,EAAgBhxB,EAAS2C,KAAK,kBAChBA,KAAK,SAASkD,OAAOsrB,IAOrC,IAAIQ,EAAY3xB,EAAS+L,SAASshB,KAClC2D,EACGxkB,IAAI,CACHgO,SAAY,QACZ6S,KAAQsE,EACR3lB,IAAO4lB,IACP3I,QAAW,EACXpd,OAAUwlB,IAEdL,EAAc,GAAGa,WAAa,EAIhCd,EACGviB,SAAS,kBACThC,IAAI,CACHslB,OAAQ,EACRhmB,MAAO,SAGX9L,EAAS4O,YAAY,wBAAyB4iB,GAE9CxxB,EAAS2C,KAAK,8BAA8BmJ,MAAMilB,EAAO1sB,SAASyH,UAGpD,IAAVjN,IACFA,EAAQ+xB,EAAiBt1B,QAG3B,IAAIw1B,EAAK,CACPjyB,MAAOA,EACPkzB,MAAO/xB,EACP+wB,OAAQA,EACRC,cAAeA,EACfK,YAAaA,EACbW,aAAa,EACbC,aAAa,EACbT,UAAAA,GAmBF,GAhBAX,EAAUC,GAEVoB,EAAgBpB,GAGZI,EACFN,EAAiB/xB,GAASiyB,GAG1BF,EAAiBtqB,KAAKwqB,GACtBA,EAAGiB,MAAM,GAAG7I,iBAAiB,SAAUiJ,GAAmB,IAG5DC,EAAgBtB,GAGZA,EAAGU,UAAW,CAChB,IAAMa,EAAe9yB,EAAQ+yB,uBAAuB,kCAAkC,GAChFC,EAAYhzB,EAAQ+yB,uBAAuB,wBAAwB,GACzED,EAAaR,WAAa,EAC1BU,EAAUV,WAAaU,EAAUC,YAAcD,EAAUE,aAO7D,SAASb,IACP,IAAIc,EAAmB,EACvB,GAAI52B,EAAS62B,gBAAgBjL,aAAe,IAAK,CAC/C,IAAMkL,EAAkBn0B,EAAE,qBACtBm0B,IACFF,GAAoBE,EAAgB/mB,UAexC,OAZIpN,EAAE,sBAAsB,IAC1B3C,EAAS62B,gBAAgBjL,aAAe,MACxCgL,GAAoBj0B,EAAE,sBAAsBoN,UAE1C/P,EAAS62B,gBAAgBzK,UAAUc,SAAS,eAC1CltB,EAAS62B,gBAAgBjL,aAAe,IAC1CgL,GAAoB,GAGpBA,GAAoB,IAGjBA,EAAmB,EAAIA,EAAmB,KAAO,EAK1D,SAASN,EAAgBtB,GACvB,IAAM+B,EAAa/B,EAAGiB,MAAMhmB,SAASC,IAC/BI,EAAYukB,EAAQtkB,YACpBymB,EAAe1mB,EAAYukB,EAAQ9kB,SAEnCknB,EAAiBF,GAAc/B,EAAGiB,MAAMlmB,SAAW,IACnDmnB,EAAcH,EAAa/B,EAAGC,OAAOllB,SAG3C,GAAIilB,EAAGE,cAAe,CACpB,IAAMiC,EAAWnC,EAAGE,cAAcjlB,SAASC,IACrCknB,EAAcD,EAAWnC,EAAGE,cAAcnlB,UAC3CilB,EAAGkB,aAAea,EAAaI,GAAYD,EAAcE,GAC5DtC,EAAiBE,EAAGjyB,OAAOmzB,aAAc,EACzClB,EAAGE,cAAcxkB,IAAI,UAAW,IAEzBskB,EAAGkB,cAAgBa,EAAaI,GAAYD,EAAcE,KACjEtC,EAAiBE,EAAGjyB,OAAOmzB,aAAc,EACzClB,EAAGE,cAAcxkB,IAAI,UAAW,IAKpC,GAAIskB,EAAGU,UAAW,CAChB,IAAI2B,EAAeN,EAInB,GAHI/B,EAAGE,gBACLmC,GAAgBrC,EAAGE,cAAcnlB,WAE9BilB,EAAGmB,aAAea,EAAeC,GAAiBI,EAAeL,EAAc,CAClFlC,EAAiBE,EAAGjyB,OAAOozB,aAAc,EACzCnB,EAAGiB,MAAMvjB,SAAS,YAClB,IAAMmjB,EAAYb,EAAGiB,MAAM,GAAG9kB,wBAAwBogB,KAAOsD,EAAA,aAC7DG,EAAGiB,MAAMpvB,KAAK,8BAA8B6J,IAAI,OAAQmlB,QAEjDb,EAAGmB,cACTa,EAAeC,GAAiB3mB,EAAY2mB,GAC3CI,EAAeL,GAAgBC,EAAgB3mB,KAEjDwkB,EAAiBE,EAAGjyB,OAAOozB,aAAc,EACzCnB,EAAGiB,MAAMziB,YAAY,YACrBwhB,EAAGiB,MAAMpvB,KAAK,8BAA8B6J,IAAI,OAAQ,MAoB9D,SAAS4mB,EAAoB74B,GAC3B,IAAM84B,EAAmB50B,EAAEsB,MAAM2kB,QAAQ,2BAA2B/hB,KAAK,mCACrE2wB,EAAO70B,EAAEsB,MAAMya,WAAW6S,KAC1BkG,EAAW90B,EAAElE,EAAEygB,QAAQjP,SAASshB,KAAO5uB,EAAElE,EAAEygB,QAAQlP,QAAU,EAC7D0nB,EAAaj5B,EAAEk5B,MAAQH,EAEvBE,EAAaD,EAEfF,EAAiBje,QAAQ,CACvByc,WAAYwB,EAAiBxB,aAAenoB,KAAKgqB,IAAIH,EAAWC,IAC/D,KAIHH,EAAiBje,QAAQ,CACvByc,WAAYwB,EAAiBxB,aAAenoB,KAAKgqB,IAAIH,EAAWC,IAC/D,KAKP,SAASG,EAA0Bp5B,GACjC,IAAM84B,EAAmB50B,EAAEsB,MAAM2kB,QAAQ,2BAA2B/hB,KAAK,mCAErEixB,EACCr5B,EAAEk5B,MACFl5B,EAAEs5B,MAUP,SAASC,EAAgBv5B,GACvB,IAAIw5B,EACCx5B,EAAEk5B,MACFl5B,EAAEs5B,MAGPR,EAAiBxB,WAAWwB,EAAiBxB,aAAekC,EAAgBH,GAI9En1B,EAAE,QACCkQ,GAAG,WAlBN,SAASqlB,IAEPv1B,EAAE,QACC+Q,IAAI,YAAaskB,GACjBtkB,IAAI,UAAWwkB,MAejBrlB,GAAG,YAAamlB,GA2CrB,SAAS5B,EAAgBpB,GAEvB,IAAMmD,EAAanD,EAAGC,OAAOjlB,QAEvBooB,EAAsBpD,EAAGC,OAAO1sB,SAASyH,QAMzCqoB,EAA0BD,EAAsB,GAEhDE,EAAiBD,EAA0BA,GAA2BF,EAAaC,GAAuBD,EAE1GI,EAAcF,EAA0BD,EAAsBD,EAE9DK,EAAaxD,EAAGiB,MAAMpvB,KAAK,mBAC3B4xB,EAAsBD,EAAW3xB,KAAK,yBAE5C2xB,EAAW3xB,KAAK,8BAA8B6J,IAAI,QAAY4nB,EAA9D,MACAG,EAAoB/nB,IAAI,QAAY2nB,EAApC,MACAI,EAAoB5xB,KAAK,iCAAiC6J,IAAI,QAAY6nB,EAA1E,MAIF,IAAIG,EAAO,EAGX,SAASrC,EAAkB53B,GAAG,IAAAk6B,EAAA10B,KAC5B,GAAa,IAATy0B,EAAY,CACd,IAAM/5B,EAAIF,EAAEygB,OAGN0Z,EAAgBj6B,EAAEo3B,YAAcp3B,EAAE+3B,YAAc/3B,EAAEg4B,aACxD,CAAC,iCAAkC,uBAAwB,wBAAwBtvB,KAAI,SAAAwxB,GACrF,GAAIl6B,EAAEm6B,YAAcD,EAAY,CAC9B,IAAME,EAAWJ,EAAKnC,uBAAuBqC,GAC7C,GAAIE,EAASv5B,OAAS,EAAG,CACvB,IAAI+B,EAAKw3B,EAAS,GAEC,yBAAfF,GAAyD,yBAAhBl6B,EAAEm6B,WAC7CJ,IACAn3B,EAAGw0B,YAAcx0B,EAAGm1B,YAAcn1B,EAAGo1B,cAAgB,EAAIiC,KAIzDF,IACAn3B,EAAGw0B,WAAap3B,EAAEo3B,sBAO1B2C,IAKJ/1B,EAAE,2BAA2BmD,MAAK,SAACjH,EAAG0C,GAAJ,OAAW4zB,EAAgB5zB,MA5F3DoB,EAAE,oCAAoC6W,OAAM,WAC1C,IAAM+d,EAAmB50B,EAAEsB,MAAM2kB,QAAQ,2BAA2B/hB,KAAK,mCAGnEmyB,EAAoBzB,EAAiBxB,aAE3CwB,EAAiBje,QAAQ,CACvByc,WAAaiD,EAVM,IAUgC,EAAI,EAAKA,EAVzC,KAWlB,QAILr2B,EAAE,qCAAqC6W,OAAM,WAC3C,IAAM+d,EAAmB50B,EAAEsB,MAAM2kB,QAAQ,2BAA2B/hB,KAAK,mCAGzE0wB,EAAiBje,QAAQ,CACvByc,WAAYwB,EAAiBxB,aApBV,KAqBlB,QAILpzB,EAAE,yBAAyBkQ,GAAG,QAASykB,GAEvC30B,EAAE,iCACCkQ,GAAG,YAAaglB,GAGhBhlB,GAAG,SAAS,SAAApU,GAAA,OAAKA,EAAEw6B,qBAsExBpE,EAAQhiB,GAAG,UA1KX,WACEiiB,EAAiBhrB,SAAQ,SAACkrB,GACxBsB,EAAgBtB,SA0KpBH,EAAQhiB,GAAG,UArKX,WACEiiB,EAAiBhrB,SAAQ,SAACkrB,GACxBG,EAAgBH,EAAGiB,MAAM,IAAI,EAAMjB,EAAGjyB,aAjN5B,CAsXbhD,OAAQC,SAAUiC,S5Cu4JnB,IAAIi3B,GAAG,CAAC,SAASl6B,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,a6ClwKNq5B,QAAQ,4B7CuwKR,IAAIC,GAAG,CAAC,SAASp6B,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,I8C7wKT,I9CoxKgCsD,E8CpxKhCC,EAAApE,EAAA,qB9CkxKIqE,GAE4BF,EAFMC,IAEeD,EAAIG,WAAaH,EAAM,CAAErD,QAASqD,GAEvF7D,EAAQQ,Q8CpxKQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAK1C0C,EAAE,uBAAuBmD,MAAK,WAC5B,IAAM7E,EAAM0B,EAAEsB,MAGdhD,EAAI4R,GAAG,QAPa,6BAOY,WAC9B5R,EAAI8D,QAAQ,qCAAsC,CAAC,CAAC0C,cAAe,YAIrExG,EAAI4R,GAAG,QAXQ,2BAWe,SAAUpU,GACtC,IAAIgJ,EAAgB,CAClBnC,KAAQ3C,EAAElE,EAAEygB,QAAQ3c,KAAK,kBACzB1C,MAAS8C,EAAElE,EAAEygB,QAAQ3c,KAAK,mBAC1BkI,KAAQ9H,EAAElE,EAAEygB,QAAQzU,QAGtBxJ,EAAI8D,QAAQ,qCAAsC,CAAC,CAAC0C,cAAeA,QAIrExG,EAAI4R,GAAG,iCAAiC,SAAUpU,EAAG8D,IAavD,SAA8BgF,GAE5B,IAAKA,EAAKhF,KACR,QAGF,EAAAc,EAAAvD,SAAO,mCACFuE,MAAK,SAAA1F,GAAA,OAAKA,EAAEiG,YAAY,CAAC8C,eAAgBH,EAAKhF,UAC9C8B,MAAK,SAAAQ,GAAA,OAAU0C,EAAKtG,IAAI6D,KAAKnC,EAAEkC,GAAQkN,eApB1CsnB,CAAqB,CAAC92B,KAAMA,EAAMtB,IAAKA,UA1B7B,CAiDblB,OAAOC,SAASiC,S9CwxKjB,CAACwwB,oBAAoB,KAAK6G,GAAG,CAAC,SAASt6B,EAAQU,EAAOJ,GACxD,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,I+C/0KT,I/Cs1KgCsD,E+Ct1KhCkM,EAAArQ,EAAA,gC/Co1KIsQ,GAE4BnM,EAFckM,IAEOlM,EAAIG,WAAaH,EAAM,CAAErD,QAASqD,GAEvF7D,EAAQQ,Q+Ct1KQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAE1C0C,EAAE,sBAAsBmD,MAAK,WAC3B,IAAI7E,EAAM0B,EAAEsB,MACRsL,EAA6C,aAAjCtO,EAAIsH,SAASmI,IAAI,YAA6BzP,EAAIsH,SAAWtH,EAAIsH,SAASoI,eACtF4oB,EAAat4B,EAAI4F,KAAK,aACtB2yB,EAASv4B,EAAI4F,KAAK,2BAClB4yB,OAAA,EACAC,EAAe,EACfjqB,OAAA,EACAC,OAAA,EACAyY,OAAA,EAEAwR,EAAoB,EACpBC,EAAU,GACVC,EAAa,EACbnY,GAAW,EACXoY,GAAgB,EAoFpB,SAASC,IACP,IAAIC,EAAY,EAEhBN,EAAe,EACfD,EAAWx4B,EAAIkP,aAAY,GAC3BT,EAAaH,EAAUU,SAASC,IAChCwR,GAAW,EAAApS,EAAAxP,SAAYmB,GAEpBsO,EAAU,GAAG0qB,aAAa,WAAavY,GACxCnS,EAAUO,WAAW,SAGpB4R,GACDgY,EAAe/2B,EAAE,qBAAqBoN,UAAY,EAClDL,GAAcgqB,EACdM,EAAYP,EAEZS,KAGAC,IAGF1qB,EAAaC,EAAaH,EAAUY,aAAY,GAAQlP,EAAI8O,SAG5D6pB,EAAU,IAAIvG,MACdmG,EAAO1zB,MAAK,SAASjH,EAAEJ,GACrB,IAAIwC,EAAM0B,EAAEsB,MAEVm2B,GADQn5B,EAAIgC,GAAG,KAAOhC,EAAMA,EAAI4F,KAAK,MACxB,GAAGuzB,KAChB1b,EAAW/b,EAAEy3B,GAAMnqB,SAAWtN,EAAEy3B,GAAMnqB,SAASC,IAAMwpB,EAAeM,EAAYtqB,EAElFkqB,EAAQ/6B,GAAK,CAAEu7B,KAAAA,EAAM1b,SAAAA,GAErBzd,EAAIsB,KAAK,QAAQ1D,MAInBg7B,EAAaD,EAAQp6B,OAGvB,SAAS4Q,IACP,IAAIE,EAAY3N,EAAE5C,GAAQwQ,YACtBF,EAAOpP,EAAIoP,KAAK,eAChBH,EAAe,QAATG,GAAkBC,GAAaZ,EACrCc,EAAkB,WAATH,GAAqBC,EAAYb,GAAca,EAAYZ,EACpEe,EAAkB,WAATJ,GAAqBC,GAAab,EAE5CF,EAAU,GAAG0qB,aAAa,WAAavY,GACxCnS,EAAUO,WAAW,UAGnBP,EAAU,GAAG0qB,aAAa,UAAYvY,GAAqB,WAATrR,GACpDd,EAAUmB,IAAI,CAACc,WAAaioB,IAG3BvpB,GACDjP,EAAIoP,KAAK,cAAc,OAEpBqR,IACDnS,EAAUO,WAAW,SAErBoqB,MAGK1pB,GACPvP,EAAIoP,KAAK,cAAc,UAEpBqR,IACDnS,EAAUmB,IAAI,CAACc,WAAaioB,IAE7BU,MAGM1pB,IACPxP,EAAIoP,KAAK,cAAc,UAEpBqR,GACDnS,EAAUO,WAAW,UAK3B,SAASuqB,IAEP,KAAGR,EAAa,GAAKC,GAArB,CAKA,IAAIxpB,EAAY3N,EAAE5C,GAAQwQ,YAAexQ,EAAOu6B,YAAY,EACxDC,EAAgBZ,EAMjBY,EAAgB,GAAKjqB,EAAYspB,EAAQD,GAAmBjb,WAE3Dib,EAMIY,EAAgBV,EAAW,GAAKvpB,EAAYspB,EAAQD,EAAkB,GAAGjb,YAE7Eib,EAGAY,IAAkBZ,IAEpB14B,EAAI4F,KAAK,cAAmB2M,YA1Md,aA2MdgmB,EAAOrvB,GAAGwvB,GAAmBjnB,SA3Mf,eA+MlB,SAASwnB,IACJX,EAAW/5B,SACZ+5B,EAAW7mB,SAjNG,aAkNd8mB,EAAOhmB,YAlNO,cAsNlB,SAAS2mB,IACJZ,EAAW/5B,SACZ+5B,EAAW/lB,YAxNG,aAyNdgmB,EAAOtvB,QAAQwI,SAzND,cAOlBqnB,IAGA94B,EAAIoP,KAAK,cAAc,OAGvBtQ,EAAO6Q,YAAW,WAChBmpB,MACA,KAEFP,EAAO3mB,GAAG,SAAQ,SAASpU,GACzBA,EAAE2Z,iBAEF,IAAIN,EAAQnV,EAAEsB,MAGd,GAAIhD,EAAI8R,SAAS,aAAc2O,EAA/B,CAMAiY,EAAoBh3B,EAAEsB,MAAM1B,KAAK,SAEjC,IAAImc,EAAWkb,EAAQD,GAAmBjb,SAE1Czd,EAAIuS,YAAY,WAEhBsmB,GAAgB,EAEhBn3B,EAAE,aAAauV,MAAK,GAAK,GAAMoB,QAAQ,CAAC/I,UAAUmO,GAAW,OAAO,WAClEob,GAAgB,EAEhB,IAAIM,EAAOR,EAAQD,GAAmBS,KAEtCz3B,EAAEy3B,GAAMpwB,QAER4G,YAAW,WAET3P,EAAI4F,KAAK,cAAmB2M,YA9ChB,aA+CZsE,EAAMpF,SA/CM,eAgDZ,YAvBFzR,EAAIyR,SAAS,cA6BjB/P,EAAE,sBAAsBkQ,GAAG,SAAQ,WACL,iBAAlBsV,GACRpoB,EAAO6T,aAAauU,GAEtBA,EAAgBpoB,EAAO6Q,YAAW,WAChCmpB,IACA3pB,IACAiqB,MACA,QAGJp5B,EAAI4F,KAAK,6BAA6BgM,GAAG,SAAQ,WAC/C5R,EAAI6R,YAAY,cAIlBnQ,EAAE5C,GAAQ8Q,QAAO,WACa,iBAAlBsX,GACRpoB,EAAO6T,aAAauU,GAEtBA,EAAgBpoB,EAAO6Q,YAAW,WAChCmpB,IACA3pB,IACAiqB,MACA,QAGJ13B,EAAE5C,GAAQ+Q,QAAO,WACfV,IAEI0pB,GACFO,UAjGQ,CAyObt6B,OAAOC,SAASiC,S/Co1KjB,CAAC8O,+BAA+B,IAAIypB,GAAG,CAAC,SAASx7B,EAAQU,EAAOJ,GAClE,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,QgDtkLQ,SAAUC,EAAQC,GAEnBqzB,MAAMC,KAAKtzB,EAASw2B,uBAAuB,mBACnD1sB,SAAQ,SAAC2wB,GAEZ,IAUI57B,EAVE67B,EAAaD,EAAIpgB,cAAc,0BAE/BsgB,EAAYF,EAAIpZ,QAAQoZ,EAAIG,QAAQryB,QACtCsyB,EAAc,CAChBC,SAAUH,EAAU1gB,iBAAiBwgB,EAAIG,QAAQG,SAAW,gCAC5DC,MAAO,IAGLC,EAAkBJ,EAAYC,SAASt7B,OACvC07B,EAAkB,EAElBC,EAAgBF,EAGpB,IAAKp8B,EAAI,EAAGA,EAAIo8B,EAAiBp8B,IACwB,WAAnDg8B,EAAYC,SAASj8B,GAAG8b,UAAUygB,eAAiF,WAAnDP,EAAYC,SAASj8B,GAAG8b,UAAUygB,eACpGD,IAGJF,EAAkBE,EAElB,IAAME,EAAYZ,EAAIpgB,cAAc,2BAE9BihB,EAAYb,EAAIpgB,cAAc,oCAE9BkhB,EAAoBd,EAAIG,QAAQ,eAAiBH,EAAIG,QAAQ,eAAiB,EAE9EY,EAAef,EAAIpgB,cAAc,4BAEjCohB,EAAWhB,EAAIpgB,cAAc,0BAE/BqhB,OAAA,EACAC,GAAc,EAiClB,SAASC,IACPX,EAAkB,EAClBC,EAAkB,EAClB7H,MAAMC,KAAKuH,EAAYC,UAAUhxB,SAAQ,SAAC+xB,EAAS94B,GAE/B84B,EAAQlG,aAAekG,EAAQlF,aAE/CkE,EAAYG,MAAMj4B,GAAOsO,MAAMyqB,QAAU,GAED,WAAnCD,EAAQlhB,UAAUygB,eAAmE,WAAnCS,EAAQlhB,UAAUygB,cACvEH,IAE0C,WAAnCY,EAAQlhB,UAAUygB,eACzBF,KAIFL,EAAYG,MAAMj4B,GAAOsO,MAAMyqB,QAAU,UAKxCb,GAAmB,GAAOC,GAAmB,IAChDD,GAAoCC,GAIlCD,EAAkBM,EACpBd,EAAIppB,MAAMyqB,QAAU,QAIpB97B,EAAS62B,gBAAgBzK,UAAUI,IAAI,aACvCiO,EAAIppB,MAAMyqB,QAAU,SAIlBb,GAAmB,GAAKl7B,EAAOstB,WAAa,MAC9CoN,EAAIpgB,cAAc,2BAA2BhJ,MAAMyqB,QAAU,QA6IjE,SAASC,IACPL,EAAUtP,UAAU1E,OAAO,mBAC3B8T,EAAanqB,MAAMyqB,QAAyC,UAA/BN,EAAanqB,MAAMyqB,QAAsB,OAAS,QAIjF,SAASE,IACPN,EAAUpP,aAAa,WAAY,KACnCoP,EAAU1xB,QAvNV2wB,EAAUvO,UAAUI,IAAI,cAExB6G,MAAMC,KAAKuH,EAAYC,UAAUhxB,SAAQ,SAACmyB,GACxC,IAAIC,EAAYD,EAAQr1B,GAClBu1B,EAAeF,EAAQp6B,UAExBq6B,IACHA,EAAYD,EAAQlQ,YAAY3qB,QAAQ,OAAQ,KAAKg6B,eAGvD,IAAMgB,EAAUp8B,EAAS0B,cAAc,OACvC06B,EAAQtD,UAAY,uBACpBsD,EAAQv6B,UAAR,aAAiCq6B,EAAjC,oRAA4UC,EAA5U,OACAd,EAAU15B,YAAYy6B,GACtBvB,EAAYG,MAAMxwB,KAAK4xB,GAIvB,IAAM1iB,EAAO1Z,EAAS0B,cAAc,QACpCgY,EAAKof,UAAY,yBACjBpf,EAAK9S,GAAKs1B,EAEVD,EAAQr1B,GAAK,GACbq1B,EAAQnO,cAAcuO,aAAa3iB,EAAMuiB,MAoM7CL,IACIX,EAAkB,IAnJpBN,EAAUvN,iBAAiB,SAAS,SAAC3uB,GAC/BA,EAAEygB,OAAOvN,QAAQ,2BAA2Boa,cAC9C4P,GAAc,EACd/qB,YAAW,WAAQ+qB,GAAc,IAAU,IAC3CL,EAAUz5B,UAAYpD,EAAEygB,OAAOrd,UAC/B44B,EAAIrO,UAAUI,IAAI,aAEnB,GAGHiO,EAAIpgB,cAAc,gCAAgC+S,iBAAiB,SAAS,WAC1EsN,EAAWtO,UAAU1E,OAAO,WAE5B,IAAM4U,EAAat8B,EAASqa,cAAc,gCAGpCkiB,GAF0D,SAA5CD,EAAUE,aAAa,iBAA+BF,EAAUhQ,aAAa,gBAAiB,SAAagQ,EAAUhQ,aAAa,gBAAiB,QAEpJgQ,EAAUjiB,cAAc,0BACM,SAAzBkiB,EAAW16B,UAAuB06B,EAAW16B,UAAY,OAAS06B,EAAW16B,UAAW,UAIlH44B,EAAIpgB,cAAc,kCAAkC+S,iBAAiB,SAAS,WAE5EsN,EAAWtO,UAAU1E,OAAO,QAC5BzjB,KAAKmoB,UAAU1E,OAAO,QAGtBzjB,KAAK8nB,YAAoC,cAArB9nB,KAAK8nB,YAA8B,YAAc,eAIvEhsB,EAAOqtB,iBAAiB,UAAU,WAEhC,IAAMqP,EAAShC,EAAIpgB,cAAc,kCACjCqgB,EAAWtO,UAAUC,OAAO,QAC5BoQ,EAAOrQ,UAAUC,OAAO,QACxBoQ,EAAO1Q,YAAc,YAErB6P,OAIF77B,EAAOqtB,iBAAiB,UAAU,WAChC,IAAKuO,EAAa,CAChB,IAAMrrB,EAAYvQ,EAAO28B,YACnB1F,EAAej3B,EAAOu6B,YACtBqC,EAAY38B,EAAS62B,gBAAgB+F,aACrCC,EAAsBpC,EAAItpB,wBAC1B2rB,EAAmBD,EAAoB3sB,IAAM2sB,EAAoB9sB,OACjEgtB,EAAqBtB,EAAStqB,wBAC9B6rB,EAAiBD,EAAmB7sB,IAAM6sB,EAAmBhtB,OAE7DktB,EAAcpC,EAAYC,SAASG,EAAkB,GAAGp5B,UAG9D,GAAIi7B,EAAkB,EACpBrC,EAAIrO,UAAUC,OAAO,cAMrB,GAHAoO,EAAIrO,UAAUI,IAAI,SAGdlc,EAAY0mB,IAAiB2F,EAC/BrB,EAAUz5B,UAAYo7B,MAEnB,CAEH,IAAMtyB,EAAS0oB,MAAMC,KAAKuH,EAAYC,UAAUoC,UAAUr2B,MAAK,SAACo1B,GAE9D,OADYA,EAAQ9qB,wBAAwBjB,KAC9B8sB,KAEZryB,IACF2wB,EAAUz5B,UAAY8I,EAAO9I,gBAQvC44B,EAAIpgB,cAAc,kBAAkB+S,iBAAiB,SAAS,SAAC3uB,GAC7DA,EAAE2Z,iBACFrY,EAAO+Q,OAAO,CAACZ,IAAK,EAAGqhB,KAAM,EAAG4L,SAAU,WAC1CxC,EAAU3wB,WAIZywB,EAAIpgB,cAAc,mBAAmB+S,iBAAiB,SAAS,WAE7D,QAAyB,IAAdsO,EAA2B,CACpC,IAAM0B,EAAW/B,EAAUz5B,WAAU,GACrCw7B,EAAShR,UAAUI,IAAI,8BACvBkP,EAAYf,EAAUh5B,YAAYy7B,GAGlCpB,IAGAN,EAAU2B,UAAUxP,qBAAqB,KAAK,GAAGT,iBAAiB,SAAS,SAAC3uB,GAC1Ei9B,EAAUrhB,cAAc,0BAA0BrQ,WAIpD0xB,EAAUrhB,cAAc,0BAA0B+S,iBAAiB,SAAS,WAC1E2O,IAEAtB,EAAIpgB,cAAc,mBAAmBrQ,QACrC0xB,EAAUpP,aAAa,WAAY,SAIrC1b,YAAW,WACTmrB,MACC,UAGHA,IACAC,OAKJh8B,EAAS2rB,KAAKyB,iBAAiB,SAAS,SAAC3uB,GAClCA,EAAEygB,OAAOvN,QAAQ,gCACoC,OAApDlT,EAAEygB,OAAOmC,QAAQ,iCAClB5iB,EAAEygB,OAAOvN,QAAQ,uCACK,IAAd+pB,GAA6BA,EAAU/pB,QAAQ,qBACxDoqB,OAGH,OArPO,CA0Qbh8B,OAAQC,WhDkkLT,IAAIs9B,GAAG,CAAC,SAASt+B,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CACzCO,OAAO,IAGXP,EAAQQ,QiDn1LQ,SAAUC,EAAQC,EAAU2C,EAAG1C,GAE3C,IAAIs9B,OAAA,EAAStH,OAAA,EAAOuH,OAAA,EAChBC,EAAc,sBAgDlB96B,EAAE3C,GAAU09B,OAAO,WAxCnB,IACQC,EACAC,EAPJ3H,EAAQtzB,EAAE,4BACV46B,EAAUtH,EAAMpvB,KAAK,mCACrB22B,EAAYvH,EAAMpvB,KAAK,uBAInB82B,EAAa1H,EAAM1zB,KAAK,iBACxBq7B,EAAc3H,EAAMpvB,KAAK,wBAGbrH,QAAUm+B,GACxBJ,EAAQpW,OAIVyW,EAAYjN,MAAMgN,EAAYC,EAAYp+B,QAAQsG,MAAK,SAACjH,EAAG0C,GAEhB,OAAnCoB,EAAEpB,GAAIgH,SAASoU,KAAK,WACpBha,EAAEpB,GAAIgH,SAASmK,SAAS+qB,GAExB96B,EAAEpB,GAAImR,SAAS+qB,MAIvBD,EAAU13B,MAAM,SAACjH,EAAG0C,GAChB,IAAIs8B,EAAWl7B,EAAEpB,GACbu8B,EAAmBD,EAASh3B,KAAK,uBACjCk3B,EAAcF,EAASh3B,KAAK,IAAI42B,GAEhCK,EAAiBt+B,SAAWu+B,EAAYv+B,QACxCq+B,EAASnrB,SAAS+qB,MAQ1BF,EAAQ/jB,OAAM,WACVyc,EAAMnjB,YAAY,iBA7Cd,CAyDb/S,OAAQC,SAAUiC,SjDk1LnB,IAAI+7B,GAAG,CAAC,SAASh/B,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,QkDl5LQ,SAAUC,EAAOC,EAAS2C,EAAE1C,GAE1C0C,EAAE,qDAAqDmD,MAAK,WAC1D,IAAMm4B,EAAQt7B,EAAEsB,MACVi6B,EAAcD,EAAM11B,SACpBmsB,EAAewJ,EAAY7c,QAAQ,sBACrC8c,EAAYF,EAAMxzB,OAItB,GAAI0zB,EAAU3+B,OAAS,GAAI,CAEzB0+B,EAAYxrB,SAAS,aAErBgiB,EAAarkB,KAAK,aAAc8tB,GAGhC,IAAIC,EAAiBD,EAAUvX,UAAU,EAAG,IAE5CuX,EADAC,EAAiBA,EAAeC,OAAO,EAAGzwB,KAAK0wB,IAAIF,EAAe5+B,OAAQ4+B,EAAeG,YAAY,OAGvGN,EAAMxzB,KAAK0zB,MArBC,CAwBbp+B,OAAOC,SAASiC,SlDm5LjB,IAAIu8B,GAAG,CAAC,SAASx/B,EAAQU,EAAOJ,GAClC,aAEAK,OAAOC,eAAeN,EAAS,aAAc,CAC3CO,OAAO,IAGTP,EAAQQ,QmDl7LQ,SAAUC,EAAQC,EAAU2C,EAAG1C,GAC7C,IAuHIw+B,EAvHEhP,EAAc9sB,EAAE,0BAClB+7B,EAAU/7B,EAAE,8CACVg8B,EAAgBh8B,EAAE,gDACpBi8B,EAAkBj8B,EAAE,6CAClBk8B,EAAoBl8B,EAAE,2BACtBm8B,EAAwBD,EAAkBh4B,KAAK,0BAA0BqD,QACzE60B,EAAaF,EAAkBh4B,KAAK,cACpCm4B,EAAWH,EAAkBh4B,KAAK,YAcxC,SAASslB,IACPxpB,EAAE,QAAQ6Q,YAAY,aACtB7Q,EAAE,iBAAiB6Q,YAAY,gBAC/B7Q,EAAE,0BAA0B8H,KAAK,QACjCglB,EAAYpf,KAAK,eAAgB,SACjCof,EAAYpf,KAAK,aAAc,mCAC/B1N,EAAE,oBAAoB6Q,YAAY,eAlBpCsrB,EAAsBzS,SACtB0S,EAAWl4B,KAAK,wBAAwBwlB,SAExC0S,EAAWlsB,GAAG,SAAS,WACrB9S,EAAO4Z,SAAS4Q,SAAW,kBAG7ByU,EAASnsB,GAAG,SAAS,WACnBlQ,EAAEsB,MAAM6O,YAAY,gBACpB6rB,EAAc7rB,YAAY,gBAY5BksB,EAASn4B,KAAK,UAAUgM,GAAG,WAAW,SAAUpU,GACzCkE,EAAEsB,MAAMsE,SAASwK,SAAS,iBAChB,OAATtU,EAAE+f,KACJ2N,OAKNxpB,EAAE,uBAAuBkQ,GAAG,SAAS,WACnCsZ,IAEAxpB,EAAE,wBAAwBmD,MAAK,WAC3BnD,EAAEsB,MAAMyM,IAAI,MAAO,IAAM/N,EAAEsB,MAAM8L,SAAW,MAC5CpN,EAAEsB,MAAM6O,YAAY,aACpBnQ,EAAEsB,MAAMoM,KAAK,cAAe,cAIlCquB,EAAQ54B,MAAK,WACX,IAAMm5B,EAASt8B,EAAEsB,MACX8L,EAASkvB,EAAOlvB,SAChBmvB,EAAeD,EAAOp4B,KAAK,sBAC3Bs4B,EAAaF,EAAOp4B,KAAK,WAE/Bo4B,EAAOvuB,IAAI,MAAO,IAAMX,EAAS,MAEjCpN,EAAE5C,GAAQ8S,GAAG,WAAW,WAClBlQ,EAAE5C,GAAQiQ,QAAU,IACtBivB,EAAOvuB,IAAI,MAAO,IAAMX,EAAS,MAGjCkvB,EAAOnvB,WAAW,YAItBovB,EAAarsB,GAAG,SAAS,WACvBosB,EAAOvuB,IAAI,MAAO,IAAMX,EAAS,MACjCkvB,EAAOnsB,YAAY,aACnBmsB,EAAO5uB,KAAK,cAAe,WAI7B6uB,EAAarsB,GAAG,WAAW,SAASpU,GACrB,OAATA,EAAE+f,MACJ2gB,EAAWn1B,QACXvL,EAAE2Z,qBAIN6mB,EAAOpsB,GAAG,WAAW,SAAUpU,GAC7B+F,QAAQ46B,IAAI3gC,EAAEW,MACA,UAAVX,EAAEW,MAA+B,MAAXX,EAAEynB,QAC1B1hB,QAAQ46B,IAAI,OACZH,EAAOvuB,IAAI,MAAO,IAAMX,EAAS,MACjCkvB,EAAOnsB,YAAY,aACnBmsB,EAAO5uB,KAAK,cAAe,eAKjCuuB,EAAgB94B,MAAK,WACnB,IAAMu5B,EAAc18B,EAAEsB,MAChBq7B,EAAaD,EAAYt0B,KAAK,wBAEpCs0B,EAAYxsB,GAAG,SAAS,WACtBysB,EAAW9rB,YAAY,aACvB8rB,EAAWxvB,WAAW,SACtBwvB,EAAWjvB,KAAK,cAAe,SAE/B1N,EAAE,QAAQ+P,SAAS,mBAIrB2sB,EAAYxsB,GAAG,SAAS,WACtBlQ,EAAE,wBAAwBmD,MAAK,WAC7BnD,EAAEsB,MAAMyM,IAAI,MAAO,IAAM/N,EAAEsB,MAAM8L,SAAW,MAC5CpN,EAAEsB,MAAM6O,YAAY,aACpBnQ,EAAEsB,MAAMoM,KAAK,cAAe,iBAKlC1N,EAAE,qBAAqBkQ,GAAG,SAAS,WACjClQ,EAAE,wBAAwB+P,SAAS,aACnC/P,EAAE,wBAAwBmN,WAAW,SACrCnN,EAAE,QAAQ6Q,YAAY,mBAKxB7Q,EAAE5C,GAAQ8S,GAAG,4BAA4B,WACvCe,aAAa6qB,GAEbA,EAAiB7tB,YAAW,WAC1BjO,EAAE5C,GAAQgF,QAAQ,aACjB,QA9HS,CAgIbhF,OAAQC,SAAUiC,SnDi7LnB,KAAK,GAAG,CAAC","file":"index-generated.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import \"./helpers/jQueryExtend.js\";\nimport \"./helpers/jQueryExtend_ajaxPattern.js\";\nimport ajaxPattern from \"./modules/ajaxPattern.js\";\nimport ajaxPatternOverride from \"./modules/ajaxPatternOverride.js\";\nimport accordions from \"./modules/accordions.js\";\nimport activateBodyTextTruncation from \"./modules/activateBodyTextTruncation.js\";\nimport googleMap from \"./modules/googleMap.js\";\nimport back2top from \"./modules/back2top.js\";\nimport clickable from \"./modules/clickable.js\";\nimport contactAccordion from \"./modules/contactAccordion.js\";\nimport dropdown from \"./modules/dropdown.js\";\nimport emergencyAlerts from \"./modules/emergencyAlerts.js\";\nimport eventFilters from \"./modules/eventFilters\";\nimport eventListingInteractive from \"./modules/eventListingInteractive\";\nimport feedbackForm from \"./modules/feedbackForm.js\";\nimport footnote from \"./modules/footnote.js\";\nimport formValidation from \"./modules/formValidation.js\";\nimport headerTags from \"./modules/headerTags.js\";\nimport hideAlert from \"./modules/hideAlert.js\";\nimport inlineOverlay from \"./modules/inlineOverlay.js\";\nimport imageFill from \"./modules/imageFill.js\";\nimport inpageAlert from \"./modules/inpageAlert.js\";\nimport keywordSearch from \"./modules/keywordSearch.js\";\nimport linkListToggle from \"./modules/linkListToggle.js\";\nimport locationListing from \"./modules/locationListing.js\";\nimport locationFilters from \"./modules/locationFilters.js\";\nimport mainNav from \"./modules/mainNav.js\";\nimport orgSelector from \"./modules/orgSelector.js\";\nimport organizationNavigation from \"./modules/organizationNavigation.js\";\nimport pagination from \"./modules/pagination.js\";\nimport pikaday from \"./modules/pikaday.js\";\nimport preventHorizontalListWidows from \"./modules/preventHorizontalListWidows.js\";\n// `richText` and `stickTOC` are needed above offsets.\nimport stickyTOC from \"./modules/stickyTOC.js\";\nimport relatedOrgsAndTopics from \"./modules/relatedOrgsAndTopics.js\";\nimport responsiveTable from \"./modules/responsiveTable.js\";\nimport responsiveVideo from \"./modules/responsiveVideo.js\";\nimport resultsHeading from \"./modules/resultsHeading.js\";\nimport scrollAnchors from \"./modules/scrollAnchors.js\";\nimport teaserListingGroup from \"./modules/teaserListingGroup\";\nimport truncateTitle from \"./modules/truncateTitle.js\";\nimport formInputs from \"./modules/formInputs.js\";\nimport utilNav from \"./modules/utilNav.js\";\n\n","export default (function(window, document, undefined){\r\n  \"use strict\";\r\n\r\n  function setCookie(name, value, expires) {\r\n    if(typeof(expires) === 'number') {\r\n      var d = new Date();\r\n      d.setTime(d.getTime() + (expires*24*60*60*1000));\r\n      var expires = \"expires=\"+d.toUTCString();\r\n      document.cookie = name + \"=\" + value + \"; \" + expires + \"; path=/\";\r\n    } else {\r\n      document.cookie = name + \"=\" + value + \"; path=/\";\r\n    }\r\n\r\n  }\r\n\r\n  function getCookie(name) {\r\n    var value = \"; \" + document.cookie;\r\n    var parts = value.split(\"; \" + name + \"=\");\r\n    if (parts.length == 2) return parts.pop().split(\";\").shift();\r\n  }\r\n\r\n  return {\r\n    setCookie,\r\n    getCookie\r\n  };\r\n\r\n})(window, document);\r\n\r\n","// check the value of the css :before psuedo element\r\n// values look for \"true\" or \"false\"\r\n\r\nexport default ($el) => {\r\n  let value = \"true\";\r\n  try {\r\n    value = window.getComputedStyle($el[0], ':before').getPropertyValue('content').replace(/\\\"/g, '');\r\n  } catch(err) {}\r\n  return value === \"false\" ? false : true;\r\n};\r\n","/**\n  * Get outerHTML of elements, taking care\n  * of SVG elements in IE as well.\n  *\n  * @param {Element} DOM object\n  * @return {String}\n  */\n\nexport default function (el) {\n  if (el.outerHTML) {\n    return el.outerHTML\n  }\n  else {\n    let container = document.createElement('div');\n        container.appendChild(el.cloneNode(true));\n    return container.innerHTML;\n  }\n}\n","module.exports = function(name) {\r\n  if (Handlebars.templates === undefined || Handlebars.templates[name] === undefined) {\r\n      jQuery.ajax({\r\n          url : ma.themePath + '/js/templates/' + name + '.html',\r\n          success : function(data) {\r\n              if (Handlebars.templates === undefined) {\r\n                  Handlebars.templates = {};\r\n              }\r\n              Handlebars.templates[name] = Handlebars.compile(data);\r\n          },\r\n          async : false\r\n      });\r\n  }\r\n  return Handlebars.templates[name];\r\n};\r\n","export default (function (window,document,$,undefined) {\n  $.extend($.expr[':'], {\n    // jQuery find all focusable elements\n    // see: https://coderwall.com/p/jqsanw/jquery-find-every-focusable-elements\n    focusable: function(el, index, selector){\n      return $(el).is('a, button, :input, [tabindex]');\n    }\n  });\n})(window,document,jQuery);\n","import twiggy from './twiggy';\n\nexport default (function (window,document,$,undefined) {\n  'use strict';\n\n  // Plain old javascript object to hold cached alert data.\n  // This prevents duplicate calls to endpoints on pages that\n  // display alerts in both the header and the body.\n  let ajaxCache = {};\n\n  // Object-orientated approach to jQuery plugin building, so as to not\n  // pollute global namespace or a complicated switch based on passed params.\n  let ajaxPattern = function(element, options) {\n    let endpoint = options.endpoint;\n    const pattern = options.renderPattern;\n    let patternTransform = options.transform;\n    let self = this;\n    let $element = $(element);\n\n    /**\n     * Wrapper function to get and render data for a given pattern.\n     */\n    self.updatePattern = function() {\n      self.getPatternData()\n        .then(function (patternData) {\n          // If a custom transform function was passed in, invoke it.\n          if (patternTransform && typeof patternTransform === \"function\") {\n            patternData = patternTransform(patternData);\n          }\n\n          //@todo validate the data against a schema: https://github.com/tdegrunt/jsonschema\n\n          // Only attempt to render a pattern if there is data.\n          if ($.isEmptyObject(patternData)) {\n            return;\n          }\n          // Render the pattern with the data.\n          try {\n            self.renderPattern(pattern,patternData);\n          }\n          catch (e) {\n            console.error(e);\n          }\n        })\n        .fail(function () {\n          console.error('MA::AjaxPattern::Could not get data at endpoint:', endpoint);\n        });\n    };\n\n    /**\n     * Use TwigJS to render the pattern with its data from the twig template.\n     *\n     * @param pattern\n     *  A namespaced path to a twig template for the pattern we want to render (i.e. @atoms/decorative-link.twig)\n     * @param data\n     *  The data structure which the pattern expects in order to render.\n     */\n    self.renderPattern = function(pattern,data) {\n      return twiggy(pattern)\n          .then(template => template.renderAsync(data))\n          .then(markup => {\n            $element.html(markup)\n              $(document).trigger('ma:AjaxPattern:Render', [{'el': $element}]);\n          });\n    };\n\n    /**\n     * Returns the gettable path to a pattern based on its namespaced path.\n     *\n     * @param pattern\n     *   The namespaced path to a pattern (i.e. @atoms/decorative-link.twig)\n     *\n     * @returns {string}\n     *   The path to a pattern which can be used in a get request (i.e. /assets/patterns/atoms/decorative-link.twig )\n     */\n    self.getPatternPath = function(pattern) {\n      let pathParts = pattern.split(\"/\");\n      let namespace = pathParts.shift();\n      let patternPath = pathParts.join(\"/\");\n      // Set ma.patternPaths in your implementation's env.js file (see /source/_meta/_00-foot.twig)\n      return ma.patternPaths[namespace] + patternPath;\n    };\n\n    /**\n     * Asynchronous function which makes ajax request to passed in endpoint to get emergency alerts data.\n     *\n     * @returns {*}\n     *   A promise.\n     */\n    self.getPatternData = function() {\n      if (!endpoint) {\n        // throw an error\n        throw new Error('MA::AjaxPattern::An endpoint argument is required.');\n      }\n\n      // Check if we have a request already made or in-flight for this endpoint.\n      if (ajaxCache[endpoint]) {\n        return ajaxCache[endpoint];\n      }\n\n      // Make ajax request to endpoint (returns promise)\n      return ajaxCache[endpoint] = $.ajax({\n          type: 'GET',\n          url: endpoint,\n          cache: true,\n          dataType: 'json'\n      }).fail(function(jqXHR, textStatus, errorThrown) {\n          console.error('MA::AjaxPattern::Ajax Error: ', errorThrown);\n      });\n    };\n\n    self.updatePattern();\n    return true;\n  };\n\n\n  /**\n   * Create a custom Transform plugin.\n   */\n  $.fn.MassAjaxPattern = function(options) {\n\n    return this.each(function(i, el) {\n      let $element = $(el);\n      // Returns early if plugin is already there.\n      if ($element.data('mass-ajax-data')) {\n        return;\n      }\n      let data = new ajaxPattern(this, options);\n      $element.data('mass-ajax-data', data);\n    });\n\n  };\n\n  // Plugin defaults.\n  $.fn.MassAjaxPattern.defaults = {\n    endpoint: '',\n    pattern: '',\n    transform: undefined\n  };\n})(window,document,jQuery);\n","import getTemplate from \"../helpers/getHandlebarTemplate.js\";\nimport sticky from \"../helpers/sticky.js\";\nimport getOuterHtml from \"../helpers/getElementOuterHtml.js\";\n\nexport default (function(window, document, undefined, $, moment){\n  \"use strict\";\n\n  /**\n   * Common Helpers between event + location listings\n   */\n\n\n  /**\n   * Renders the new page of location listing image promos and broadcasts the rendered master data instance.\n   *\n   * @param args\n   *   Arguments object with the following structure:\n   *   {\n   *      page: (optional) the page to be rendered, defaults to 1\n   *      data: the instance of master data to render\n   *   }\n   */\n  function renderListingPage(args) {\n    if (args.data.hasOwnProperty('selectors')) {\n      clearListingPage(args.data.selectors.container, args.data.selectors.parent);\n      let $el = $(args.data.selectors.container).find(args.data.selectors.parent),\n          page = args.page ? args.page : 1;\n\n      args.data.items.forEach(function (item) {\n        if (item.isActive && item.page === page) {\n          $el.append(item.markup);\n        }\n      });\n\n      if (args.focus) {\n        // Focus on the first focusable element in the first listing\n        let $firstListing = $el.find(args.data.selectors.row).first();\n        // :focusable is possible with helpers/jQueryExtend.js\n        let $firstFocus = $firstListing.find(':focusable').eq(0);\n        $firstFocus.focus();\n      }\n\n      if (args.data.selectors.hasOwnProperty('map') && args.data.selectors.map) {\n        sticky.init($(args.data.selectors.map));\n      }\n    }\n    else {\n      console.warn(\"masterData.selectors must be set for this listing.\");\n      return false;\n    }\n  }\n\n\n  /**\n   * Returns the data structure necessary to render pagination component, reflecting current state.\n   *\n   * @param args\n   *   An object with the following structure:\n   *   {\n   *     data: [instance of filtered, sorted master data],\n   *     targetPage: (optional) the page which should be active\n   *   }\n   *\n   * @returns {*}\n   *   Data structure necessary to render pagination component\n   */\n  function transformPaginationData(args) {\n    let data = args.data;\n    let targetPage = args.targetPage ? args.targetPage : 1; // default to first page if none passed\n    let totalPages = data.totalPages;\n    let pages = [];\n\n    for (let i = 1; i <= totalPages; i++) {\n      pages.push({\n        text: i.toString(),\n        active: i === targetPage\n      });\n    }\n\n    data.pagination.prev = {\n      text: \"Previous\",\n      disabled: targetPage === 1\n    };\n\n    data.pagination.next = {\n      text: \"Next\",\n      disabled: targetPage === totalPages\n    };\n\n    data.pagination.pages = pages;\n    data.pagination.currentPage = targetPage;\n    data.pagination.totalPages = totalPages;\n\n    return data.pagination;\n  }\n\n  /**\n   * Updates the resultsHeading data structure to reflect the current component state.\n   *\n   * @param args\n   *    Arguments object with the following structure:\n   *    args: {\n   *      data: the current instance of master data,\n   *      page: (optional) the current page, defaults to 1\n   *    }\n   *\n   * @returns {resultsHeading|{numResults, totalResults}|*}\n   */\n  function transformResultsHeading(args) {\n    let pageTotal = 0,\n        totalActive = 0,\n        page = args.page ? args.page : 1,\n        data = args.data,\n        resultsHeading = data.resultsHeading; // preserve active resultsHeading.tags\n\n    // Tally the total active and page length.\n    data.items.map(function(item){\n      if (item.isActive) {\n        totalActive += 1;\n        if (item.page === page) {\n          pageTotal += 1;\n        }\n      }\n    });\n\n    // Get the index (from 1) of the first and last items on this page.\n    let firstItem = (Number(data.maxItems) * Number(page)) - (Number(data.maxItems) - 1),\n        lastItem = firstItem + (Number(pageTotal) - 1);\n\n    resultsHeading.totalResults = totalActive;\n    resultsHeading.numResults = firstItem + \" - \" + lastItem; // @todo add accessibility consideration here\n\n    return resultsHeading;\n  }\n\n  /**\n   * Creates an array with generated markup for location listing items, preserving original index.\n   *\n   * @param listing\n   *  The array of items\n   * @param template\n   *  The string name of the template\n   *\n   * @returns {Array}\n   *  An array of compiled markup\n   */\n  function transformListing(listing, template) {\n    // Get template for location listing (organisms > imagePromo)\n    let compiledTemplate = getTemplate(template);\n    let listingMarkup = [];\n    listing.forEach(function (data, index) {\n      let itemData = itemTransform(data);\n      listingMarkup[index] = compiledTemplate(itemData);\n    });\n    return listingMarkup;\n  }\n\n\n  /**\n   * Returns transformed item data object.\n   *\n   * @param item\n   *   The item.item[]{} being transformed.\n   *\n   * @returns {*}\n   *   The original item object with a formatted tag property.\n   */\n  function itemTransform(item) {\n    // Ensure tags are an array.\n    let tags = [];\n\n    $.map(item.tags, function(val, index) {\n      tags[index] = val;\n    });\n\n    item.tags = tags;\n\n    let tagsData = {\n      tagsFormatted: item.tags.map(transformTag)\n    };\n    return Object.assign({}, item, tagsData);\n  }\n\n  /**\n   * Returns a formatted item.tag object with a label and svg icon markup.\n   *\n   * @param tag\n   *   The tag being transformed.\n   *\n   * @returns {{label, svg: boolean}}\n   */\n  function transformTag(tag) {\n    return {\n      label: tag.label,\n      svg: getSvgFromTag(tag.id)\n    };\n  }\n\n  /**\n   * Returns the svg element markup from the corresponding tag filter checkbox label icon\n   *\n   * @param tag\n   *  The imagePromo tag.id whose icon we need\n   *\n   * @return string\n   *  The svg element for the matching filter form tag input.\n   */\n  function getSvgFromTag(tag) {\n    // Get the existing corresponding icon markup so we don't have to worry about outdated markup.\n    // return $('.js-filter-by-tags').find(\"#\" + tag).parent().siblings('svg').prop('outerHTML');\n    // Get outerHtml of svgElement shim for IE\n    // See: https://stackoverflow.com/questions/12592417/outerhtml-of-an-svg-element\n    return getOuterHtml($('.js-filter-by-tags').find(\"#\" + tag).siblings('svg')[0]);\n  }\n\n  /**\n   * Returns true if the passed filters array includes an item with the passed type.\n   *\n   * @param filters\n   *   Array of filters.\n   * @param type\n   *   The type of filter to search for.\n   *\n   * @returns {*|boolean}\n   */\n  function hasFilter(filters, type) {\n    return filters.some(function (filter) {\n      return filter.hasOwnProperty('type') && filter['type'] === type;\n    });\n  }\n\n  /**\n   * Returns the value(s) of the passed filters of the passed type.\n   *\n   * @param filters\n   *   Array of filters from which to abstract values.\n   * @param type\n   *   The type of filter to search for.\n   *\n   * @return array\n   *   An array of filter values of type.\n   */\n  function getFilterValues(filters, type) {\n    return filters.filter(function(data) {\n      return data.type === type;\n    }).map(function(data) {\n      return data.value;\n    })\n  }\n\n  /**\n   * Creates the active filter object based on either cleared or submitted filter data.\n   *\n   * @param args\n   *   An object with the following structure:\n   *   data {\n   *    [masterData current instance]\n   *   },\n   *   filterData: {\n   *     clearedFilter: (optional cleared filter data)\n   *     {\n   *       type: '[filter type]: location || tag',\n   *       text: '[filter text or label]',\n   *       value: '[filter value]'\n   *     }, || 'all' (if clear all button was pressed)\n   *     {\n   *       formData: (optional submitted form filter data)\n   *       [\n   *         {\n   *           type: '[filter type] location || tag',\n   *           text: '[filter label]',\n   *           value: '[filter value]'\n   *         }, ...\n   *       ]\n   *     }\n   *   }\n   *\n   * @returns {*}\n   */\n  function transformActiveTagsData(args) {\n    if (args.filterData.hasOwnProperty('clearedFilter')) {\n      return getActiveFilters(args.data, args.filterData); // This was an active tag interaction, get remaining filters.\n    }\n    else {\n      return args.filterData.formData; // This was a form submission, so just return the applied form data.\n    }\n  }\n\n  /**\n   * Returns an array of the currently active filters, based on passed filterData.\n   *\n   * @param data\n   *   The current instance of master data structure.\n   *\n   * @param filterData\n   *  An object representing the cleared filter:\n   *  {\n   *    clearedFilter: {\n   *       type: '[filter type]: location || tag',\n   *       text: '[filter text or label]',\n   *       value: '[filter value]'\n   *     } || 'all' (if clear all button was pressed)\n   *  }\n   *\n   * @returns {Array}\n   *   An array of the currently active filters:\n   *   [  {\n   *        type:\n   *        text:\n   *        value:\n   *      }, ... ]\n   */\n  function getActiveFilters(data, filterData) {\n    // Single filter button clicked, so remove that filter from the list.\n    if (filterData.clearedFilter !== \"all\") {\n      let filters = data.resultsHeading.tags;\n      // Remove the clicked tag from the tags array.\n      return filters.filter(function (tag) {\n        return tag.value !== filterData.clearedFilter.value;\n      });\n    }\n    else {\n      // Clear all button was clicked so remove all filters.\n      return [];\n    }\n  }\n\n\n  /**\n   * Assigns page values to masterData items, based on the provided max number.\n   *\n   * @param items\n   *   The master data items.\n   *\n   * @param max\n   *   The max number of items to show per page.\n   *\n   * @returns\n   *   The updated master data items.\n   */\n  function paginateItems(items, max) {\n    let page = 1,\n        pageTotal = 0;\n    let paginatedItems = items.map(function(item){\n      if (item.isActive) {\n        if (pageTotal < max){\n          item.page = page;\n        }\n        else {\n          page += 1;\n          pageTotal = 0;\n          item.page = page;\n        }\n        pageTotal += 1;\n      }\n      return item;\n    });\n\n    return {\n      items: paginatedItems,\n      totalPages: page\n    }\n  }\n\n  // Remove the listing content children on the current listing page.\n  function clearListingPage(listing, parent) {\n    $(listing).find(parent).html('');\n  }\n\n  /**\n   * Filters the listing data based on component filter state.\n   *\n   * @param data\n   *  An instance of masterData to start from.\n   * @param filterData\n   *  Data structure representing either the newly applied or cleared filters.\n   * @returns {*}\n   */\n  function filterListingData(data, filterData) {\n    // Get the currently active filters.\n    let filters = transformActiveTagsData({data: data, filterData: filterData});\n    // Update the results heading tags with the new active filters.\n    data.resultsHeading.tags = filters;\n\n    // If tag (checkbox) filter is present, filter based on current tag values.\n    if (hasFilter(filters, 'tag')) {\n      // Get just the tag values from the filters array.\n      let tags = getFilterValues(filters, 'tag');\n      // Identify active data based on filter.\n      return filterDataByTags(tags, data);\n    }\n\n    // If a date filter is present, filter based on the date filter values.\n    if (hasFilter(filters, 'dateRange')) {\n      return filterDataByDateTags(filters, data);\n    }\n\n\n    // Either there are no filters or the only active filter is location, make all items active\n    return makeAllActive(data);\n  }\n\n  /**\n   * Returns an instance of master data which is sorted alphabetically by item data.title.text\n   *\n   * @param data\n   *    The instance of master data being sorted.\n   *\n   * @returns {*}\n   *    Sorted instance of master data.\n   */\n  function sortDataAlphabetically(data) {\n    let items = data.items.sort(function(a, b) {\n      let nameA = a.data.title.text.toUpperCase();\n      let nameB = b.data.title.text.toUpperCase();\n\n      // Sort the items alphabetically\n      return (nameA < nameB) ? -1 : (nameA > nameB) ? 1 : 0;\n    });\n\n    let paginated = paginateItems(items, data.maxItems);\n    data.items = paginated.items;\n    data.totalPages = paginated.totalPages;\n    return data;\n  }\n\n  /**\n   * Geocodes an address string arg and executes callback upon successful return.\n   *\n   * @param address\n   *   Address string to be geocoded.\n   * @param callback\n   *   Callback function to call upon successful geocode return.\n   *\n   * @returns {*}\n   *   Upon success, the return value of the passed callback function.\n   */\n  function geocodeAddressString(address, callback) {\n    // Only attempt to execute if google's geocode library is loaded.\n    if (typeof ma.geocoder === \"undefined\") {\n      return;\n    }\n\n    // Geocode address string, then execute callback with argument upon success.\n    ma.geocoder.geocode({address: address}, function (results, status) {\n      if (status === google.maps.GeocoderStatus.OK) {\n        let place =  results[0];\n        return callback(place);\n      }\n      else {\n        console.warn('Geocode was not successful for the following reason: ' + status);\n      }\n    });\n  }\n\n  /**\n   * Geocodes an address string arg and executes callback upon successful return.\n   *\n   * @param address\n   *   Address string to be geocoded.\n   * @param callback\n   *   Callback function to call upon successful geocode return.\n   *\n   * @returns {*}\n   *   Upon success, the return value of the passed callback function.\n   */\n  function geocodePlaceId(place_id, callback) {\n    // Only attempt to execute if google's geocode library is loaded.\n    if (typeof ma.geocoder === \"undefined\") {\n      return;\n    }\n\n    // Geocode address string, then execute callback with argument upon success.\n    ma.geocoder.geocode({ 'placeId': place_id}, function(results, status) {\n      if (status === google.maps.GeocoderStatus.OK) {\n        let place =  results[0];\n        return callback(place);\n      }\n      else {\n        console.warn('Geocode was not successful for the following reason: ' + status);\n      }\n    });\n  }\n\n  /**\n   * Resets all items in a master data instance to active (i.e. not filtered out).\n   *\n   * @param data\n   *    The instance of master data whose items are being made active.\n   *\n   * @returns {*}\n   *    The master data instance with all active items.\n   */\n  function makeAllActive(data) {\n    data.items = data.items.map(function(item){\n      item.isActive = true;\n      return item;\n    });\n    return data;\n  }\n\n  /**\n   * Returns masterData with necessary filtered items flagged inactive.\n   *\n   * @param tags\n   *  The array of filters by which to filter.\n   *\n   * @param data\n   *   The current instance of master data being filtered.\n   *\n   * @returns {*}\n   *   The 'filtered' (flagged) instance of master data.\n   */\n  function filterDataByTags(tags, data){\n    // @todo use map similar to sortDataAlphabetically\n    data.items = data.items.map(function(item) {\n      item.isActive = doesItemContainTags(item.data.tags, tags);\n      return item;\n    });\n\n    return data;\n  }\n\n  /**\n   * Location Listing Specific\n   */\n\n  /**\n   * Determines if an masterData item contains the necessary tag(s).\n   *\n   * @param haystack\n   *  The data object in question.\n   *\n   * @param needle\n   *   The tag(s) being searched for.\n   *\n   * @returns {boolean|*}\n   */\n  function doesItemContainTags(haystack, needle) {\n    return needle.every(function(v) {\n      return Boolean(haystack.filter(function(item){\n        // return Object.values(item).indexOf(v) !== -1;\n        // return Object.values(item).indexOf(v) !== -1;\n        // Object.values shim for IE11\n        return Object.keys(item).map(function(i) { return item[i]; }).indexOf(v) !== -1;\n      }).length);\n    });\n  }\n\n  /**\n   * Event Listing specific helpers\n   */\n\n  /**\n   * Calculate distance from lat/lng.\n   *\n   * @param lat1\n   *    Latitude 1 input.\n   * @param lon1\n   *    Longitude 1 input.\n   * @param lat2\n   *    Latitude 2 input.\n   * @param lon2\n   *    Longitude 2 input.\n   * @param unit\n   *\n   * @returns {*}\n   *    Return the distance from points.\n   */\n  function calculateDistance(lat1, lon1, lat2, lon2, unit) {\n    let radlat1 = Math.PI * lat1/180;\n    let radlat2 = Math.PI * lat2/180;\n    let radlon1 = Math.PI * lon1/180;\n    let radlon2 = Math.PI * lon2/180;\n    let theta = lon1-lon2;\n    let radtheta = Math.PI * theta/180;\n    let dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n    dist = Math.acos(dist);\n    dist = dist * 180/Math.PI;\n    dist = dist * 60 * 1.1515;\n\n    if (unit === \"K\") {\n      dist = dist * 1.609344\n    }\n    if (unit === \"N\") {\n      dist = dist * 0.8684\n    }\n    return dist\n  }\n\n  /**\n   * Create a moment.js object for a passed eventTeaser date data\n   *\n   * @param args\n   *   Data structure for eventTeaser.date and a type (\"start\" || \"end\") property\n   * @returns\n   *   A moment.js object for the event start/end date in MM/D format.\n   *   See: https://momentjs.com/docs/#/parsing/string-format/\n   */\n  function makeMoment(args) {\n    /**\n     * args: {\n     *   data: {\n     *     summary: \"March 2, 2017 - April 25, 2017\",\n     *     startMonth: \"Mar\",\n     *     startDay: \"2\",\n     *     startTimestamp: \"3/2/2017 - 14:00\",\n     *     endMonth: \"Apr\",\n     *     endDay: \"25\",\n     *     endTimestamp: \"4/25/2017 - 15:00\"\n     *   },\n     *   type: 'start' || 'end'\n     * }\n     */\n    // Create moment.js object for start timestamp\n    if (args.hasOwnProperty('type') && args.type === 'start') {\n      return moment(args.data.startTimestamp, 'M/DD/YYYY')\n    }\n    // Create a moment.js object for end timestamp\n    if (args.hasOwnProperty('type') && args.type === 'end') {\n      return args.data.endTimestamp ? moment(args.data.endTimestamp, 'M/DD/YYYY') : \"\";\n    }\n    return false;\n  }\n\n  /**\n   * Returns an instance of master data which is sorted by start timestamp then alphabetically by item data.title.text\n   *\n   * @param data\n   *    The instance of master data being sorted.\n   * @param dateType\n   *    The type of date by which to sort: start || end\n   *\n   * @returns {*}\n   *    Sorted instance of master data.\n   */\n  function sortDataByDate(data, dateType) {\n    let type = dateType ? dateType : 'start';\n    let dateA = '';\n    let dateB = '';\n    let items = data.items.sort(function(a, b) {\n      if (type !== \"end\") {\n        dateA = a.start;\n        dateB = b.start;\n      }\n      else {\n        dateA = a.end;\n        dateB = b.end;\n      }\n\n      let nameA = a.data.title.text.toUpperCase();\n      let nameB = b.data.title.text.toUpperCase();\n\n      // Sort the items by start date timestamp, then alphabetically.\n      // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\n      return (dateA.isBefore(dateB, 'minute')) ? -1 : (dateA.isAfter(dateB, 'minute')) ? 1 : (nameA < nameB) ? -1 : (nameA > nameB) ? 1 : 0;\n    });\n\n    let paginated = paginateItems(items, data.maxItems);\n    data.items = paginated.items;\n    data.totalPages = paginated.totalPages;\n    return data;\n  }\n\n  /**\n   * Returns data with necessary items flagged inactive according to date/date range.\n   *\n   * @param tags\n   *  The array of filters by which to filter.\n   *\n   * @param data\n   *   The current instance of master data being filtered.\n   *\n   * @returns {*}\n   *   The 'filtered' instance of data after checking date(s).\n   */\n  function filterDataByDateTags(tags, data) {\n    data.items = data.items.map(function(item) {\n      item.isActive = isEventInDateRange(item, tags);\n      return item;\n    });\n    let paginated = paginateItems(data.items, data.maxItems);\n    data.items = paginated.items;\n    data.totalPages = paginated.totalPages;\n    return data;\n  }\n\n  /**\n   * Returns an item's isActive value depending on the date range from date filters.\n   *\n   * @param item\n   *   The item.item[]{} being transformed.\n   *\n   * @param tags\n   *  The array of filters by which to filter.\n   *\n   * @returns\n   *   The updated item.\n   */\n  function isEventInDateRange(item, tags) {\n    let filterStart = '';\n    let filterEnd = '';\n\n    tags.map(function(tag) {\n      if (tag.type == 'dateRange') { filterStart = moment(tag.start, 'M/DD/YYYY'); }\n      if (tag.type == 'dateRange') { filterEnd = moment(tag.end, 'M/DD/YYYY'); }\n    });\n\n    if (filterEnd && filterStart) {\n      return item.start.isSameOrAfter(filterStart, 'day') && item.start.isSameOrBefore(filterEnd, 'day') ? true : false;\n    }\n    else {\n      return item.start.isSame(filterStart, 'day') ? true : false;\n    }\n  }\n\n  return {\n    renderListingPage,\n    transformPaginationData,\n    transformResultsHeading,\n    filterListingData,\n    hasFilter,\n    getFilterValues,\n    filterDataByTags,\n    filterDataByDateTags,\n    transformActiveTagsData,\n    paginateItems,\n    clearListingPage,\n    sortDataAlphabetically,\n    sortDataByDate,\n    geocodeAddressString,\n    geocodePlaceId,\n    makeAllActive,\n    calculateDistance,\n    transformListing,\n    makeMoment\n  };\n\n})(window, document, undefined, jQuery, moment);\n","import checkActive from \"../helpers/cssControlCode.js\";\r\n\r\nexport default (function (window,document,$,undefined) {\r\n  let $el,\r\n    $elParent,\r\n    elHeight,\r\n    elWidth,\r\n    lowerLimit,\r\n    upperLimit,\r\n    debounceTimer,\r\n    runCode = false;\r\n\r\n  function init(element) {\r\n    $el = element;\r\n    $elParent = $el.parent().css('position') === 'relative' ? $el.parent() : $el.parent().offsetParent();\r\n\r\n    // default assumption as to where the screen will load\r\n    $el.attr('data-sticky','top');\r\n\r\n    updateData();\r\n\r\n    // update variables one more time to catch any post page load changes\r\n    window.setTimeout(function(){\r\n      updateData();\r\n    },1000);\r\n    \r\n    $(window).resize(function() {\r\n      updateData();\r\n      setPosition();\r\n    });\r\n\r\n    // toggle the sticky positioning\r\n    $(window).scroll(function () {\r\n      setPosition();\r\n    });\r\n  }\r\n\r\n  function updateData(){\r\n    let newRunCode = checkActive($el);\r\n\r\n    if(runCode && !newRunCode) {\r\n      $el.removeAttr('style');\r\n    }\r\n\r\n    runCode = newRunCode;\r\n\r\n    if(!runCode){\r\n      return;\r\n    }\r\n    \r\n    runCode = newRunCode;\r\n    elHeight = $el.height();\r\n    elWidth = $elParent.width();\r\n    upperLimit = $elParent.offset().top;\r\n    lowerLimit = upperLimit + $elParent.outerHeight(true) - $el.height();\r\n\r\n    $el.width(elWidth);      \r\n  }\r\n\r\n  function setPosition() {\r\n    if(!runCode){\r\n      $el.attr('data-sticky','top');\r\n      return false;\r\n    }\r\n\r\n    let windowTop = $(window).scrollTop(),\r\n        attr = $el.attr('data-sticky'),\r\n        top = attr !== 'top' && windowTop <= upperLimit, \r\n        middle = attr !== 'middle' && windowTop < lowerLimit && windowTop > upperLimit,\r\n        bottom = attr !== 'bottom' && windowTop >= lowerLimit;\r\n    \r\n    if(top) {\r\n      $el.attr('data-sticky','top');\r\n    } \r\n    else if (middle) {\r\n      $el.attr('data-sticky','middle');\r\n    } \r\n    else if (bottom) {\r\n      $el.attr('data-sticky','bottom');\r\n    }\r\n  }\r\n\r\n  return {init};\r\n\r\n})(window,document,jQuery);","/**\n * @file\n * Truncate body text elements to four lines if they are six lines long or more at page load, and provide skip links for unsighted users.\n */\n\n/**\n * Calculate and store elements and dimensions for later truncation.\n */\nvar calculateTruncation = (function($, $el) {\n  // Force reflow to correctly calculate height\n  $el.get(0).getBoundingClientRect();\n\n  // Find a paragraph whose line-height to gauge.\n  var $p = $el.find('p');\n  // If there are no paragraphs, gauge by the element itself.\n  $p = $p.length ? $p : $el;\n\n  // Calculate how tall the element should be when truncated.\n  const style = window.getComputedStyle($p.get(0));\n  const lineHeight = parseInt(style.lineHeight);\n  const paddingTop = parseInt(style.paddingTop);\n\n  // lineLimit represents the line count that *triggers* truncation, NOT\n  // the height *after* truncation.\n  const lineLimit = window.matchMedia('(max-width: 910px)').matches ? 7 : 9;\n\n  $el.data({\n    thresholdHeight: (lineHeight * lineLimit) + paddingTop,\n    truncatedHeight: (lineHeight * (lineLimit - 3)) + paddingTop,\n    intrinsicHeight: $el.children('div').height()\n  });\n\n  // Create new elements and gather focusable ones for later tabindex-ing.\n  if(!$el.data('truncationPreviouslyCalculated')) {\n    $el.data({\n      $button: $('<button class=\"ma-truncated-body-text__button\" aria-label=\"Show the overview.\">Show more</button>'),\n      $fadeOverlay: $('<div class=\"ma-truncated-body-text__fade-overlay\"></div>'),\n      $focusableEls: $el.find('[href], button, input:not([type=\"hidden\"]), textarea, select, [tabindex]:not([tabindex^=\"-\"])'),\n      truncationPreviouslyCalculated: true\n    });\n\n    $el.data('$button').data({\n      toggleText: 'Show less',\n      toggleLabel: 'Hide the overview.'\n    });\n  }\n}).bind(undefined, jQuery);\n\nvar removeTruncation = function($el) {\n    $el.removeClass('ma-truncated-body-text expanded');\n    $el.children('div').removeClass('ma-truncated-body-text__contents').css('height', 'auto');\n\n    if($el.data('truncationPreviouslyCalculated')) {\n      $el.data('$button').detach();\n      $el.data('$button').data({\n        toggleText: 'Show less',\n        toggleLabel: 'Hide the overview.'\n      });\n      $el.data('$button').text('Show more');\n      $el.data('$button').attr('aria-label', 'Show the overview.');\n      $el.data('$fadeOverlay').detach();\n      toggleTabindexes($el.data('$focusableEls'), true);\n    }\n\n    $el.data('$button').off('.truncateBodyText');\n};\n\n/**\n * Make elements focusable or not focusable based on expansion/collapse\n * of content area.\n */\nvar toggleTabindexes = function($focusableEls, expanded) {\n  if(expanded) {\n    $focusableEls.each(function(i, el) {\n      var $el = $(el);\n\n      // Restore tabindex to elements that had one;\n      // remove it alogether from ones that didn't.\n      if($el.data('originalTabIndex')) {\n        $el.attr('tabindex', $el.data('originalTabIndex'));\n      } else {\n        $el.removeAttr('tabindex');\n      }\n    });\n  } else {\n    $focusableEls.each(function(i, el) {\n      var $el = $(el);\n\n      // Save the old tabindex for later restoration.\n      if($el.attr('tabindex')) {\n        $el.data('originalTabIndex', $el.attr('tabindex'));\n      }\n      \n      $el.attr('tabindex', '-1');\n    });\n  }  \n};\n\n/**\n * Turn on truncation (if height requires it) based on previous calculations.\n */\nvar enableTruncation = function($el) {\n  calculateTruncation($el);\n\n  // Abort if truncation is unnecessary.\n  if($el.data('intrinsicHeight') < $el.data('thresholdHeight')) {\n    return;\n  }\n\n  // Restore BEM classes.  \n  $el.addClass('ma-truncated-body-text');\n  $el.children('div').addClass('ma-truncated-body-text__contents');\n\n  const $button = $el.data('$button');\n\n  // This is just the one .ma-truncated-body-text__contents div.\n  const $contents = $el.children('div');\n\n  // Add the button at the gradient.\n  $el.prepend($button);\n  $contents.append($el.data('$fadeOverlay'));\n\n\n  // Remove tabindex attributes from contents to prevent tabbing\n  // to hidden elements.\n  toggleTabindexes($el.data('$focusableEls'));\n \n  // The actual truncation happens here.\n  $contents.css('height', $el.data('truncatedHeight') + 'px');\n\n  $button.on('click.truncateBodyText', function() {\n    $el.toggleClass('expanded');\n\n    // Toggle height between truncated and expanded.\n    $contents.css('height', $el.data($el.hasClass('expanded') ? 'intrinsicHeight' :'truncatedHeight'));\n\n    // Change button text to the opposite option.\n    var oldText = $button.text().trim();\n    $button.text($button.data('toggleText'));\n    $button.data('toggleText', oldText);\n\n    var oldLabel = $button.attr('aria-label');\n    $button.attr('aria-label', $button.data('toggleLabel'));\n    $button.data('toggleLabel', oldLabel);\n\n    // Reset or unset focusable state of links/buttons.\n    toggleTabindexes($el.data('$focusableEls'), $el.hasClass('expanded'));\n\n    // After expansion, focus the first link or button in the content.\n    if($el.hasClass('expanded')) {\n      $contents.one('transitionend', function() {\n        $el.data('$focusableEls').eq(0).trigger('focus');\n        $contents.get(0).scrollTop = 0;\n      });\n    }\n  });\n};\n\n/**\n * Initialize truncation at page load.\n */\nvar initTruncation = function($el) {\n  $el.wrapInner('<div></div>');\n\n  enableTruncation($el);\n};\n\nexport default (function (window,document,$,$el) {\n  initTruncation($el);\n\n  var resizeTimeout = false;\n  var truncateResize = (function($el) {\n    removeTruncation($el);\n    enableTruncation($el);\n  }).bind(undefined, $el);\n\n  $(window).on('resize', function() {\n    window.clearTimeout(resizeTimeout);\n    resizeTimeout = window.setTimeout(truncateResize, 500);\n  });\n\n}).bind(undefined,window,document,jQuery);\n","\nexport default (function(Twig, ma) {\n    'use strict';\n\n    /**\n     * Returns the gettable path to a pattern based on its namespaced path.\n     *\n     * @param pattern\n     *   The namespaced path to a pattern (i.e. @atoms/decorative-link.twig)\n     *\n     * @returns {string}\n     *   The path to a pattern which can be used in a get request (i.e. /assets/patterns/atoms/decorative-link.twig )\n     */\n    function resolveTwigPath(patternName) {\n        let pathParts = patternName.split(\"/\");\n        let namespace = pathParts.shift();\n        let patternPath = pathParts.join(\"/\");\n        // Set ma.patternPaths in your implementation's env.js file (see /source/_meta/_00-foot.twig)\n        return ma.patternPaths[namespace] + patternPath;\n    }\n\n    /**\n     * Returns the gettable path to an icon based on its name.\n     *\n     * @param name\n     *   The name of an icon (i.e. arrow)\n     *\n     * @returns {string}\n     *   The path to an icon SVG file which can be used in a get request (i.e. /images/svg-icons/arrow.svg )\n     */\n    function getIconPath(name) {\n        return ma.iconPath + '/' + name + '.svg';\n    };\n\n    /**\n     * Extend Twig with an icon function that embeds an SVG directly.\n     */\n    Twig.extendFunction('icon', function(name) {\n        // Just use Twig to fetch the SVG and render it like a template.\n        var svg = Twig.twig({\n            href: getIconPath(name),\n            async: false,\n        });\n        // Don't choke here if we aren't able to load the SVG.\n        return svg ? svg.render() : '';\n    });\n\n    /**\n     * Asynchronously loads a Twig template based on the internal name.\n     *\n     * @param patternName\n     *   The namespaced path to a pattern (i.e. @atoms/decorative-link.twig)\n     *\n     * @return {Promise<Twig.Template>}\n     *   The loaded and compiled Twig template.\n     */\n    return function twiggy(patternName) {\n        return new Promise(function(resolve, reject) {\n            Twig.twig({\n                href: resolveTwigPath(patternName),\n                allowInlineIncludes: true,\n                namespaces: {\n                    'base': ma.patternPaths['@base'],\n                    'atoms': ma.patternPaths['@atoms'],\n                    'molecules': ma.patternPaths['@molecules'],\n                    'organisms': ma.patternPaths['@organisms'],\n                    'templates': ma.patternPaths['@templates'],\n                    'pages': ma.patternPaths['@pages'],\n                    'meta': ma.patternPaths['@meta']\n                },\n                async: true, // Included/extended patterns loaded synchronously: https://github.com/twigjs/twig.js/issues/426\n                load: resolve\n            })\n        })\n    };\n\n}(Twig, ma))","import \"./helpers/jQueryExtend.js\";\nimport \"./helpers/jQueryExtend_ajaxPattern.js\";\nimport ajaxPattern from \"./modules/ajaxPattern.js\";\nimport ajaxPatternOverride from \"./modules/ajaxPatternOverride.js\";\nimport accordions from \"./modules/accordions.js\";\nimport activateBodyTextTruncation from \"./modules/activateBodyTextTruncation.js\";\nimport googleMap from \"./modules/googleMap.js\";\nimport back2top from \"./modules/back2top.js\";\nimport clickable from \"./modules/clickable.js\";\nimport contactAccordion from \"./modules/contactAccordion.js\";\nimport dropdown from \"./modules/dropdown.js\";\nimport emergencyAlerts from \"./modules/emergencyAlerts.js\";\nimport eventFilters from \"./modules/eventFilters\";\nimport eventListingInteractive from \"./modules/eventListingInteractive\";\nimport feedbackForm from \"./modules/feedbackForm.js\";\nimport footnote from \"./modules/footnote.js\";\nimport formValidation from \"./modules/formValidation.js\";\nimport headerTags from \"./modules/headerTags.js\";\nimport hideAlert from \"./modules/hideAlert.js\";\nimport inlineOverlay from \"./modules/inlineOverlay.js\";\nimport imageFill from \"./modules/imageFill.js\";\nimport inpageAlert from \"./modules/inpageAlert.js\";\nimport keywordSearch from \"./modules/keywordSearch.js\";\nimport linkListToggle from \"./modules/linkListToggle.js\";\nimport locationListing from \"./modules/locationListing.js\";\nimport locationFilters from \"./modules/locationFilters.js\";\nimport mainNav from \"./modules/mainNav.js\";\nimport orgSelector from \"./modules/orgSelector.js\";\nimport organizationNavigation from \"./modules/organizationNavigation.js\";\nimport pagination from \"./modules/pagination.js\";\nimport pikaday from \"./modules/pikaday.js\";\nimport preventHorizontalListWidows from \"./modules/preventHorizontalListWidows.js\";\n// `richText` and `stickTOC` are needed above offsets.\nimport stickyTOC from \"./modules/stickyTOC.js\";\nimport relatedOrgsAndTopics from \"./modules/relatedOrgsAndTopics.js\";\nimport responsiveTable from \"./modules/responsiveTable.js\";\nimport responsiveVideo from \"./modules/responsiveVideo.js\";\nimport resultsHeading from \"./modules/resultsHeading.js\";\nimport scrollAnchors from \"./modules/scrollAnchors.js\";\nimport teaserListingGroup from \"./modules/teaserListingGroup\";\nimport truncateTitle from \"./modules/truncateTitle.js\";\nimport formInputs from \"./modules/formInputs.js\";\nimport utilNav from \"./modules/utilNav.js\";\n\n","import checkActive from \"../helpers/cssControlCode.js\";\r\n\r\nexport default (function (window,document,$,undefined) {\r\n\r\n  $('.js-accordion').each(function(index){\r\n    init.apply(this, [index]);\r\n  });\r\n\r\n  $(document).on('ma:AjaxPattern:Render', function(e,data){\r\n    let $context = data.el;\r\n    if ($context.find('.js-accordion').length) {\r\n      $context.find('.js-accordion').each(function(index){\r\n        // Try to ensure we don't collide with the index values from DOM load.\r\n        let offset = 100;\r\n        let offsetIndex = offset + index;\r\n        init.apply(this, [offsetIndex]);\r\n      })\r\n    }\r\n  });\r\n\r\n  function init(index) {\r\n    let $el = $(this),\r\n        $link = $el.find('.js-accordion-link'),\r\n        $content = $el.find('.js-accordion-content'),\r\n        $status = $el.find('.js-accordion-status'),\r\n        id = $content.attr('id') || 'accordion' + (index + 1),\r\n        active = checkActive($el),\r\n        open = $el.hasClass('is-open');\r\n\r\n    $content.attr('id', id);\r\n    $link.attr('aria-expanded',open).attr('aria-controls', id);\r\n\r\n    if(open) {\r\n      // setup the inline display block\r\n      $content.stop(true,true).slideDown();\r\n    }\r\n\r\n    $link.on('click',function(e){\r\n      if(active) {\r\n        e.preventDefault();\r\n        open = $el.hasClass('is-open');\r\n        if(open){\r\n          $content.stop(true,true).slideUp();\r\n          $status.attr('aria-label', 'click to show info');\r\n        } else {\r\n          $content.stop(true,true).slideDown();\r\n          $status.attr('aria-label', 'click to hide info');\r\n        }\r\n        $link.attr('aria-expanded',!open);\r\n        $el.toggleClass('is-open');\r\n      }\r\n    });\r\n\r\n    $(window).resize(function () {\r\n      let temp = checkActive($el);\r\n\r\n      if(temp !== active && !temp) {\r\n        $content.removeAttr('style');\r\n        $el.removeClass('is-open');\r\n        $link.attr('aria-expanded','false');\r\n      }\r\n\r\n      active = temp;\r\n    }).resize();\r\n  }\r\n\r\n})(window,document,jQuery);\r\n","import truncateBodyText from \"../helpers/truncateBodyText\";\n\n/**\n * @file\n * Initiate truncateBodyText wherever it is needed.\n */\n\nexport default (function (window,document,$) {\n  $('.ma__services-flexible-link-groups .page-content--intro .ma__rich-text').each(function(i, el) {\n    truncateBodyText($(el));\n  });\n})(window,document,jQuery);\n  ","/**\n * @file\n * Ajax Alert js has to execute prior to its dependent accordion and emergency alert js modules.\n */\n\nexport default (function (window,document,$,undefined) {\n\n  $('.js-ajax-pattern').each(function(){\n    // Get the endpoint which is passed in as ajaxAlerts.endpoint to organism data attribute.\n    let endpoint = $(this).data('ma-ajax-endpoint');\n    if (!endpoint) {\n      console.error(\"MA::AjaxPattern::This pattern requires an endpoint to be passed in as an argument.\");\n      return false;\n    }\n\n    let renderPattern = $(this).data('ma-ajax-render-pattern');\n    if (!renderPattern) {\n      console.error(\"MA::AjaxPattern::This pattern requires a child pattern to be passed as an argument.\");\n      return false;\n    }\n    try {\n      $(this).MassAjaxPattern({\"endpoint\": endpoint, \"renderPattern\": renderPattern});\n    }\n    catch (e) {\n      console.error(e);\n    }\n  });\n\n})(window,document,jQuery);\n","/**\n * @file\n * This demonstrates how to pass a transform function to MassAjaxPattern.\n */\n\nexport default (function (window,document,$,undefined) {\n\n  // Note that this selector is passed into the template so that this is run instead of the\n  // default 'js-ajax-pattern'.  See the ajaxPattern.customSelector in guide.json page object.\n  // In an implementation of this you would want to create your own selector and avoid\n  // js-ajax-pattern and js-ajax-pattern-override since Mayflower will attach to these.\n  $('.js-ajax-pattern-override').each(function(){\n    // Get the endpoint which is passed in as ajaxAlerts.endpoint to organism data attribute.\n    let endpoint = $(this).data('ma-ajax-endpoint');\n    if (!endpoint) {\n      console.error(\"MA::AjaxPattern::This pattern requires an endpoint to be passed in as an argument.\");\n      return false;\n    }\n\n    let renderPattern = $(this).data('ma-ajax-render-pattern');\n    if (!renderPattern) {\n      console.error(\"MA::AjaxPattern::This pattern requires a child pattern to be passed as an argument.\");\n      return false;\n    }\n    try {\n      $(this).MassAjaxPattern({\n        \"endpoint\": endpoint,\n        \"renderPattern\": renderPattern,\n        \"transform\": function(ajaxData) {\n          // Example of some custom data transformation being done to the data according to implementation needs.  This will often include restructuring of data.\n          // If business logic indicates that the pattern should not render (for example, if the endpoint returns no emergency alert data) then this function should return an empty js object {}.\n          var data = ajaxData;\n          data.emergencyAlerts.alerts = data.emergencyAlerts.these.are.alerts;\n          return data;\n        }\n      });\n    }\n    catch (e) {\n      console.error(e);\n    }\n  });\n\n})(window,document,jQuery);\n","export default (function (window,document,$,undefined) {\r\n  let $footer = $('.js-footer'),\r\n      visibleThreshold = 250,\r\n      staticThreshold = 50;\r\n\r\n  $(\".js-back2top\").each(function() {\r\n    let $el = $(this);\r\n\r\n    $el.on('click',function(e) {\r\n      e.preventDefault();\r\n      try {\r\n        $(\"html, body\").stop(true,true).animate({scrollTop:0}, '750');\r\n      } \r\n      catch(e) {\r\n        $('body').scrollTop(0);\r\n      }\r\n      // Bring keyboard focus back to top as well.\r\n      $(\"#main-content\").focus();\r\n      return false;\r\n    });\r\n\r\n    $(window).on('scroll', function() {\r\n      // if we've exceeded the threshold of scrolling\r\n      // from the top, show control\r\n      let scrollTop = $(window).scrollTop();\r\n\r\n      if (scrollTop > visibleThreshold) {\r\n          $el.removeClass('is-hidden');\r\n      } else {\r\n          $el.addClass('is-hidden');\r\n      }\r\n    });\r\n  });\r\n\r\n})(window,document,jQuery);","export default (function (window,document,$,undefined) {\r\n  $('.js-clickable').each(function(){\r\n    // if the this is clicked\r\n    $(this).click(function(event){\r\n      event.preventDefault();\r\n\r\n      var $el = $(this).find('.js-clickable-link').first();\r\n      // find the destination\r\n      var dest = $el.attr(\"href\");\r\n      // if the target attribute exists\r\n      if(\"_blank\" === $el.attr(\"target\")) {\r\n        // launch new tab/window\r\n        window.open(dest);\r\n      } else {\r\n        // otherwise redirect to a new page\r\n        window.location = dest;\r\n      }\r\n    });\r\n  });\r\n})(window,document,jQuery);","export default (function (window, document, $, undefined) {\n\n  $('.ma__contact-row__columns').each(function () {\n\n    let $columns = $(this);\n    let $sets = $columns.find('.ma__contact-set');\n    let $button = $columns.siblings('.ma__contact-row__expand');\n\n    if ($sets.length > 2) {\n      $columns.addClass('has-many');\n      $button.addClass('toggle-sets');\n    }\n\n    $button.on('click', function () {\n      $columns.toggleClass('is-open');\n      $button.toggleClass('is-open');\n    });\n\n  });\n\n})(window, document, jQuery);\n","// ****** basic custom select that uses mobile select keyboard ******\r\nlet dropdownMenu = document.querySelectorAll(\".js-dropdown\");\r\n\r\nif(null !== dropdownMenu){\r\n\r\n  let length = dropdownMenu.length;\r\n\r\n  for (let i = 0; i < length; i++ ) {\r\n    let parentEl = dropdownMenu[i],\r\n        selectEl = parentEl.querySelector(\".js-dropdown-select\"),\r\n        link = parentEl.querySelector(\".js-dropdown-link\")\r\n\r\n    if(null === selectEl || null === link) {\r\n      break;\r\n    }\r\n\r\n    selectEl.onchange = function() {\r\n      let elem = (typeof this.selectedIndex === \"undefined\" ? window.event.srcElement : this);\r\n      link.innerText = elem.text || elem.options[elem.selectedIndex].text;\r\n    }\r\n  }\r\n}\r\n","import cookie   from \"../helpers/cookies.js\";\r\n\r\nexport default (function (window,document,$,undefined) {\r\n  // Emergency Alerts start close on page load\r\n  // the default behavior is to expand the alerts\r\n  // Emergency Alerts should stay closed if the cookie is set to false\r\n\r\n  /* ********* NOTE:\r\n    This component is dependent on the\r\n    accordion.js component runing before it.\r\n  ********* */\r\n\r\n  $('.js-emergency-alerts').each(function(){\r\n      init.apply(this);\r\n  });\r\n\r\n  $(document).on('ma:AjaxPattern:Render', function(e,data){\r\n    let $context = data.el;\r\n    if ($context.find('.js-emergency-alerts').length) {\r\n      $context.find('.js-emergency-alerts').each(function(){\r\n        init.apply(this);\r\n      })\r\n    }\r\n  });\r\n\r\n  /**\r\n   * Initialize the emergency alert.\r\n   */\r\n  function init() {\r\n    let open = true,\r\n        id = $(this).data('id'),\r\n        cookieName = 'emergency-alerts' + id,\r\n        cookieValue = cookie.getCookie(cookieName),\r\n        $button = $(this).find('.js-accordion-link');\r\n\r\n    $button.on('click', function() {\r\n      // clicking this link also triggers the accordion click\r\n      // toggle the current state\r\n      open = !open;\r\n      // update open/close state cookie\r\n      // leave off third argument to make it expire on session\r\n      cookie.setCookie(cookieName,open);\r\n    });\r\n\r\n    // if the user has closed the alerts on a previous page\r\n    if(typeof(cookieValue) !== 'undefined' && cookieValue === 'false') {\r\n      open = false;\r\n      // set the state of aria-expanded\r\n      $button.attr('aria-expanded', open);\r\n    }\r\n\r\n    // Emergency Alerts loads closed so expand it.\r\n    if(open) {\r\n      open = false; // clicking the link swaps the value\r\n      $button.first().trigger('click');\r\n    }\r\n  }\r\n})(window,document,jQuery);\r\n","export default (function (window,document,$,undefined) {\n  $('.js-event-filters').each(function(){\n    let $el = $(this);\n\n    // When google map libraries are loaded, initialize places.autocomplete on the location input, if it exists.\n    $(document).on('ma:LibrariesLoaded:GoogleMaps', function() {\n      let $locationFilterParent = $('.js-event-filter-by-location', $el);\n      let $locationFilter = $locationFilterParent.find('input');\n      if ($locationFilter.length) {\n        // Create the google places autocomplete object and associate it with the zip code text input.\n        let locationInput = document.getElementById($locationFilter.attr('id'));\n        let swLat = $locationFilterParent.data('maPlaceBoundsSwLat');\n        let swLng = $locationFilterParent.data('maPlaceBoundsSwLng');\n        let neLat = $locationFilterParent.data('maPlaceBoundsNeLat');\n        let neLng = $locationFilterParent.data('maPlaceBoundsNeLng');\n\n        let defaultBounds = new google.maps.LatLngBounds(new google.maps.LatLng(swLat,swLng), new google.maps.LatLng(neLat,neLng));\n\n        // See options: https://developers.google.com/maps/documentation/javascript/places-autocomplete#add_autocomplete\n        let options = {\n          bounds: defaultBounds,\n          strictBounds: true,\n          types: ['geocode'],\n          componentRestrictions: {country: 'us'},\n          fields: ['place_id']\n        };\n        ma.autocomplete = new google.maps.places.Autocomplete(locationInput, options);\n      }\n    });\n\n    // Listen for new data from another component interaction (i.e. results heading), update form.\n    $el.on('ma:FormFilter:DataUpdated', function(e, data){\n      renderForm({clearedFilter: data.clearedFilter, $form: $el});\n    });\n\n    // Handle global form submission.\n    $el.submit(function(e){\n      e.preventDefault();\n      // Update master data with the various filter values.\n      let formData = getFormData({$form: $(this)});\n\n      // Trigger location listing filter event with current filter values.\n      $el.trigger('ma:EventFilter:FormSubmitted', [{formData: formData}]);\n    });\n\n  });\n\n  function renderForm(args) {\n    let clearedFilter = args.clearedFilter;\n    // The clear all button was pressed.\n    if (clearedFilter === \"all\") {\n      clearForm(args);\n    }\n    // Single filter button was pressed.\n    else {\n      clearDeactivatedFilter(args);\n    }\n  }\n\n  function getFormData(args) {\n    let $form = $(args.$form),\n      $location = $form.find('.js-event-filter-by-location'),\n      $tags = $form.find('.js-filter-by-tags'),\n      $dateStart = $form.find('.js-filter-by-date-range__start'),\n      $dateEnd = $form.find('.js-filter-by-date-range__end'),\n      formData = [];\n\n    // Get location\n    if ($location.find('input').length) {\n      let place = $location.find('input').val();\n      if (place) {\n        formData.push({\n          type: 'location',\n          text: place,\n          value: place\n        });\n      }\n    }\n\n    let dateRange = '',\n        startDate = '',\n        endDate = '',\n        useToday = false;\n\n    // Get start date.\n    if ($dateStart.find('input').length) {\n      startDate = $dateStart.find('input').val();\n      if (startDate) {\n        dateRange += startDate;\n      }\n      else {\n        startDate = moment().format('M/DD/YYYY');\n        useToday = true;\n      }\n    }\n\n    // Get end date.\n    if ($dateEnd.find('input').length) {\n      endDate = $dateEnd.find('input').val();\n      if (endDate) {\n        if (startDate && !useToday) {\n          dateRange += ' - ' + endDate;\n        }\n        else {\n          dateRange = 'Today - ' + endDate;\n        }\n      }\n    }\n\n    if (dateRange) {\n      formData.push({\n        type: 'dateRange',\n        text: dateRange,\n        value: dateRange,\n        start: startDate,\n        end: endDate,\n      });\n    }\n\n    // Get checkboxes/tags.\n    $tags.find('input:checked').each(function() {\n      formData.push({\n        'type': 'tag',\n        'text': $(this).next(\"label\").text(),\n        'value': $(this).val()\n\n      });\n    });\n\n    return formData;\n  }\n\n  function clearDeactivatedFilter(args) {\n    let $form = $(args.$form),\n      $place = $form.find('.js-event-filter-by-location'),\n      $dateStart = $form.find('.js-filter-by-date-range__start'),\n      $dateEnd = $form.find('.js-filter-by-date-range__end'),\n      $tags = $form.find('.js-filter-by-tags'),\n      clearedFilter = args.clearedFilter;\n\n    // If the cleared filter button was for a location filter.\n    if (clearedFilter.type === 'location') {\n      $place.find('input').val(\"\");\n      return;\n    }\n    // Clear dates text inputs.\n    if (clearedFilter.type === 'dateRange') {\n      $dateStart.find('input').val(\"\");\n      $dateEnd.find('input').val(\"\");\n      return;\n    }\n    // If the cleared filter button was for a tag filter.\n    if (clearedFilter.type === 'tag') {\n      $tags.find('input[type=checkbox][value=' + clearedFilter.value + ']').prop('checked', false);\n    }\n  }\n\n  function clearForm(args) {\n    let $form = $(args.$form),\n      $place = $('.js-event-filter-by-location', $form).find('input'),\n      $dateStart = $('.js-filter-by-date-range__start', $form).find('input'),\n      $dateEnd = $('.js-filter-by-date-range__end', $form).find('input');\n\n    // Clear location text input.\n    if ($place.length) {\n      $place.val(\"\");\n    }\n\n    // Clear start date text input.\n    if ($dateStart.length) {\n      $dateStart.val(\"\");\n    }\n\n    // Clear end date text input.\n    if ($dateEnd.length) {\n      $dateEnd.val(\"\");\n    }\n\n    // Check for tags and uncheck all checked tags inputs.\n    if (typeof $tags != \"undefined\") {\n      $tags.find('input:checked').prop('checked', false);\n    }\n  }\n\n})(window,document,jQuery);\n","import listings from \"../helpers/listing.js\";\n\nexport default (function (window,document,$,undefined) {\n  let container = '.js-event-listing-interactive',\n      parent = '.js-event-listing-items',\n      row = '.js-event-listing-item';\n\n  $('.js-event-listing-interactive').each(function(i) {\n    let $el = $(this),\n        $resultsHeading = $el.find('.js-results-heading'),\n        $pagination = $el.find('.js-pagination'),\n        $eventFilter = $el.find('.js-event-filters');\n\n    // Get the location listing component data (this could be replaced with an api)\n    const rawData = ma.eventListingInteractive[i]; // Data object created in @organisms/by-author/event-listing-interactive.twig\n\n    let masterData = []; // master data structure to preserve state\n\n    masterData = populateMasterDataSource(rawData); // to preserve state\n\n    // Handle location listings form interaction (triggered by locationFilters.js).\n    $eventFilter.on('ma:EventFilter:FormSubmitted', function (e, formValues) {\n      // transformData() returns a jQuery deferred object which allows us to wait for any asynchronous js execution to return before executing the .done(callback).\n      // @see: https://api.jquery.com/deferred.done/\n      transformData(masterData, formValues).done(function (transformation) {\n        masterData = transformation.data; // preserve state\n        // Update the results heading based on the current items state.\n        transformation.data.resultsHeading = listings.transformResultsHeading({data: transformation.data});\n        // Update pagination data structure, reset to first page\n        transformation.data.pagination = listings.transformPaginationData({data: transformation.data});\n        // Render the listing page.\n        listings.renderListingPage({data: transformation.data});\n        // Trigger child components render with updated data\n        updateChildComponents(transformation);\n      });\n    });\n\n\n    // Handle active filter/tag button interactions (triggered by resultsHeading.js).\n    $resultsHeading.on('ma:ResultsHeading:ActiveTagClicked', function (e, clearedFilter) {\n      // transformData() returns a jQuery deferred object which allows us to wait for any asynchronous js execution to return before executing the .done(callback).\n      // @see: https://api.jquery.com/deferred.done/\n      transformData(masterData, clearedFilter).done(function (transformation) {\n        masterData = transformation.data; // preserve state\n        transformation.clearedFilter = clearedFilter;\n\n        masterData = transformation.data; // preserve state\n        // Update the results heading based on the current items state.\n        transformation.data.resultsHeading = listings.transformResultsHeading({data: transformation.data});\n        // Update pagination data structure, reset to first page\n        transformation.data.pagination = listings.transformPaginationData({data: transformation.data});\n        // Render the listing page.\n        listings.renderListingPage({data: transformation.data});\n        // Trigger child components render with updated data\n        updateChildComponents(transformation);\n      });\n    });\n\n    // Handle pagination click events\n    function handlePagination (e, target) {\n      \"use strict\";\n      let nextPage = parseInt(target, 10);\n\n      masterData.pagination = listings.transformPaginationData({ data: masterData, targetPage: nextPage });\n      masterData.resultsHeading = listings.transformResultsHeading({ data: masterData, page: nextPage });\n      listings.renderListingPage({ data: masterData, page: nextPage });\n\n      // Trigger child components render with updated data\n      updateChildComponents({ data: masterData });\n    }\n    $pagination.on('ma:Pagination:Pagination', handlePagination);\n    let defaultPage = 1;\n    let params = new URLSearchParams(window.location.search);\n    if (history.state) {\n      defaultPage = history.state.page;\n    }\n    if (params) {\n      defaultPage = params.get(\"page\");\n    }\n    handlePagination(null, defaultPage);\n\n\n    // Trigger events to update child components with new data.\n    function updateChildComponents(args) {\n      $resultsHeading.trigger('ma:ResultsHeading:DataUpdated', [args.data.resultsHeading]);\n\n      $pagination.trigger('ma:Pagination:DataUpdated', [args.data.pagination]);\n      if (args.clearedFilter) {\n        $eventFilter.trigger('ma:FormFilter:DataUpdated', [args.clearedFilter]);\n      }\n    }\n\n    /**\n     * Returns a master data structure with page level / listing item level data and markup, to reflect component state.\n     *\n     * @param listing\n     *   The listing data structure to use as a source\n     * @returns {Array}\n     *   An array with the following structure:\n     *    [\n     *      maxItems: the max number of items to show per listing \"page\" if provided, defaults to all\n     *      totalPages: the number of pages of items that should render, given the current filters\n     *      resultsHeading: the data structure necessary to render a resultsHeading component\n     *      items: an array of listing items [\n     *        isActive: whether or not the listing should be shown, given current filters state\n     *        page: the page that the listing, if active, will appear on, given the current sort order\n     *        data: the data structure for the eventTeaser component\n     *        markup: the compiled eventTeaser markup\n     *        start: the momentjs object for the start timestamp\n     *      ]\n     *      pagination: the data structure necessary to render a pagination component,\n     *      selectors: the necessary $selectors for rendering the listing\n     *    ]\n     */\n    function populateMasterDataSource(listing) {\n      // Populate master data structure\n      let masterData = [];\n\n      // Ensure eventListing.events.items is an array (the twig template json_encode()'s a php array)\n      let listArray = [];\n      $.map(listing.eventListing.events, function(val, index) {\n        listArray[index] = val;\n      });\n\n      listing.eventListing.events = listArray;\n\n      // Ensure eventListing.pagination.pages is an array (the twig template json_encode()'s a php array)\n      let pages = [];\n      $.map(listing.pagination.pages, function(val, index) { pages[index] = val; });\n      listing.pagination.pages = pages;\n\n      // Get the listing events, generate markup for each\n      let masterListing = listing.eventListing.events,\n\n      // Pass in listing and template name.\n      masterListingMarkup = listings.transformListing(masterListing, 'eventListingRow');\n\n      // The max number of items per page, if designated in eventListing data structure, else all\n      masterData.maxItems = listing.maxItems ? listing.maxItems : masterListing.length;\n\n      // The initial results heading data structure\n      masterData.resultsHeading = listing.resultsHeading;\n\n      // Create items with listing and markup.\n      masterData.items = getMasterListingWithMarkup(masterListing, masterListingMarkup, masterData.maxItems);\n\n      // The initial pagination data structure;\n      masterData.pagination = listing.pagination;\n\n      // The total number of pages, given the number of items and the maxItems variable\n      masterData.totalPages = Math.ceil(masterData.items.length / masterData.maxItems);\n\n      // Set the selector properties necessary to render\n      masterData.selectors = {};\n      masterData.selectors.container = container;\n      masterData.selectors.parent = parent;\n      masterData.selectors.row = row;\n\n      return masterData;\n    }\n\n    /**\n     * Creates the master data structure items array\n     *\n     * @param listing\n     *   The eventListing data structure\n     * @param markup\n     *   The generated array of item markup\n     * @param max\n     *   The maximum number of items per page\n     * @returns {Array}\n     *  An array of listing items with the following structure:\n     *  [\n     *      isActive: whether or not the listing should be shown, given current filters state\n     *      page: the page that the listing, if active, will appear on, given the current sort order\n     *      data: the data structure for the eventListing component\n     *      markup: the compiled event markup\n     *      start: a momentjs object for this event's start timestamp\n     *   ]\n     */\n    function getMasterListingWithMarkup(listing, markup, max) {\n      let items = [];\n      listing.forEach(function (item, index) {\n        // determine if there is an end date to this event\n        let endDate = listing[index].date.endDay.length;\n\n        items[index] = {\n          isActive: true, // @todo consider checking for this in case of server side preprocessing of state\n          page: Math.ceil((index+1) / max),\n          markup: markup[index],\n          data: listing[index],\n          start: listings.makeMoment({data: listing[index].date, type: 'start'}),\n          end: (endDate) ? listings.makeMoment({data: listing[index].date, type: 'end'}) : endDate\n        };\n      });\n      return items;\n    }\n\n  });\n\n  /**\n   * The main data transformation wrapper, returns an instance of masterData which reflects the component state.\n   *\n   * @param data\n   *  An instance of masterData to start from.\n   * @param transformation\n   *  An object representing the change in state (locationFilter form data, resultsHeading tag interaction, etc.)\n   *\n   * @returns {{data: *, place: *}}\n   *  An object with the current state masterData instance and an array of their related sorted markers to send to map.\n   */\n  function transformData(data, transformation) {\n    // This data transformation potentially involves asynchronous google geocoding.\n    // This jQuery deferered object allows us to wait for a return before moving on inside of the parent function (which invokes this function).\n    // @see https://api.jquery.com/jquery.deferred/\n    let promise = $.Deferred();\n    let transformReturn = {};\n\n    // First filter the data based on component state, then sort alphabetically by default.\n    let filteredData = listings.filterListingData(data, transformation),\n        tags = filteredData.resultsHeading.tags,\n        sortedData = listings.sortDataByDate(filteredData),\n        place = '';\n\n    // Sort data by location, if that filter is present.\n    if (listings.hasFilter(tags, 'location')) {\n      place = listings.getFilterValues(tags, 'location')[0]; // returns array\n      // If place argument was selected from the locationFilter autocomplete (initiated on the zipcode text input).\n      let autocompletePlace = ma.autocomplete.getPlace();\n      // Geocode the address, then sort the markers and instance of locationListing masterData.\n      ma.geocoder = ma.geocoder ? ma.geocoder : new google.maps.Geocoder();\n      if (typeof autocompletePlace !== \"undefined\" && autocompletePlace.hasOwnProperty('place_id')) {\n        // This is an asynchronous function\n        listings.geocodePlaceId(autocompletePlace.place_id, function(result) {\n          transformReturn.data = sortDataAroundPlace(result, filteredData);\n          transformReturn.geocode = result;\n          // Return the data sorted by location and the geocoded place object\n          promise.resolve(transformReturn);\n        });\n      }\n      // If place argument was populated from locationFilter (zipcode text input) but not from Place autocomplete.\n      else {\n        // This is an asynchronous function\n        listings.geocodeAddressString(place, function(result) {\n          transformReturn.data = sortDataAroundPlace(result, filteredData);\n          transformReturn.geocode = result;\n          // Return the data sorted by location and the geocoded place object\n          promise.resolve(transformReturn);\n        });\n      }\n    }\n    else {\n      // Return the data sorted by alphabet and the empty place object\n      promise.resolve({data: sortedData, place: place});\n    }\n\n    return promise;\n  }\n\n  /**\n   * Returns instance of location listing masterData, sorted proximity to place.\n   *\n   * @param place\n   *   The geocode information by which to sort.\n   * @param data\n   *   The instance of location listing masterData.\n   * @returns {*}\n   *   Sorted instance of location listing masterData.\n   */\n  function sortDataAroundPlace(place, data) {\n    let lat = place.geometry.location.lat(),\n        lng = place.geometry.location.lng();\n\n    // Get all existing marker distance from place, assign as marker property.\n    for (let key in data.items) {\n      if (data.items.hasOwnProperty(key)) {\n        data.items[key].distance = listings.calculateDistance(data.items[key].data.position.lat, data.items[key].data.position.lng, lat, lng, \"K\");\n      }\n    }\n\n    // Sort existing markers by closest to the place.\n    data.items.sort(function (a, b) {\n      return a.distance - b.distance;\n    });\n\n    // Update each location listing item's page number based on new marker sort order.\n    let paginated = listings.paginateItems(data.items, data.maxItems);\n    data.items = paginated.items;\n    data.totalPages = paginated.totalPages;\n\n    // Return the newly sorted instance of location listing masterData.\n    return data;\n  }\n\n})(window,document,jQuery);","export default (function(window, document, $) {\n  const $feedbackForm = $(\".ma__mass-feedback-form__form\");\n  const $fields = $(\".ma__mass-feedback-form__fields\");\n  const $textArea = $fields.find(\"textarea\");\n  const $contactForm = $feedbackForm.find(\n    \".ma__mass-feedback-form__contact-form\"\n  );\n  const $loadRadios = $feedbackForm.find('.feedback-load input[type=\"radio\"]');\n  const $contactRadios = $feedbackForm.find(\n    '.user-response__contact input[type=\"radio\"]'\n  );\n  const $Response = $(\".ma__mass-feedback-form__form--user-response\");\n  const $noResponseLink = $Response.find(\".form--no-response\");\n  const $alertToggle = $(\".ma__in-page-alert__hide\");\n\n  // Open no reponse answer accordion.\n  $noResponseLink.on(\"click\", function() {\n    $Response.toggleClass(\"is-open\");\n  });\n\n  // Auto size the text boxes\n  $textArea.each(function() {\n    let $el = $(this);\n\n    $el.on(\"keyup\", function() {\n      if ($el.prop(\"scrollHeight\") > $el.prop(\"clientHeight\")) {\n        $el.css(\"height\", $el.prop(\"scrollHeight\") + \"px\");\n      } else {\n        $el.css(\"height\", \"100%\");\n      }\n    });\n  });\n\n  // Open feedback form on radio button selection.\n  $loadRadios.on(\"change\", function() {\n    let foundIndicator = $loadRadios.filter(\":checked\").val();\n\n    if (foundIndicator === \"Yes\") {\n      $fields.addClass(\"is-open positive\");\n      $fields.removeClass(\"negative\");\n    } else if (foundIndicator === \"No\") {\n      $fields.addClass(\"is-open negative\");\n      $fields.removeClass(\"positive\");\n    }\n  });\n\n  // Open contact form on radio selection.\n  $contactRadios.on(\"change\", function() {\n    let contactGroup = $contactRadios.filter(\":checked\").val();\n    let $submitButton = $(this)\n      .closest(\"form\")\n      .find(\".submitButton\");\n\n    if (contactGroup === \"Yes\") {\n      $contactForm.addClass(\"is-open\");\n      $submitButton.val(\"Send\");\n    } else if (contactGroup === \"No\") {\n      $contactForm.removeClass(\"is-open\");\n      $submitButton.val(\"Send Feedback\");\n    }\n  });\n\n  // Close alert.\n  $alertToggle.on(\"click\", function(e) {\n    e.preventDefault();\n  });\n})(window, document, jQuery);\n","import checkMobile from \"../helpers/cssControlCode.js\";\r\n\r\nexport default (function (window,document,$,undefined) {\r\n\r\n  $('.js-footnote').each(function(){\r\n    let $el = $(this),\r\n        $link = $el.find(\".js-footnote-link\"),\r\n        $messageLink = $link.clone(),\r\n        $rtelink = null,\r\n        isMobile = checkMobile($el);\r\n\r\n    if ($link.attr('href') === \"#\") {\r\n      return;\r\n    } else {\r\n      $rtelink = $($link.attr('href'));\r\n    }\r\n\r\n    $messageLink.text('');\r\n\r\n    $el.find(\".js-footnote-message p:last-child\").append($messageLink);\r\n\r\n    $(window).resize(function() {\r\n      isMobile = checkMobile($el);\r\n    });\r\n\r\n    $el.on('click','.js-footnote-link', function(e) {\r\n      e.preventDefault();\r\n\r\n      let target = $(this).attr('href');\r\n      let position = getPosition($(target).parent());\r\n      \r\n      scrollTo(position.top, target);\r\n    });\r\n\r\n    $rtelink.click(function(e) {\r\n      e.preventDefault();\r\n\r\n      let target = $(this).attr('href');\r\n      let position = getPosition($(target));\r\n      \r\n      scrollTo(position.top, target);\r\n    });\r\n\r\n    function getPosition($target) {\r\n      let pos = $target.offset() || 0;\r\n\r\n      if(isMobile) {\r\n        let headerHeight = $('.js-sticky-header').height() || 0;\r\n        let navHeight = $(\".js-scroll-anchors\").height() || 0;\r\n\r\n        pos.top = pos.top - headerHeight - navHeight;\r\n      }\r\n\r\n      return pos;\r\n    }\r\n\r\n    function scrollTo(position, focus) {\r\n      $(\"html,body\").stop(true,true).animate({scrollTop:position}, '750', function(){\r\n        if(focus) {\r\n          $(focus).focus();\r\n        }\r\n      });\r\n    }\r\n  });\r\n})(window,document,jQuery);\r\n","export default (function (window,document,$,undefined) {\r\n\r\n  $('textarea[maxlength]').each(function(){\r\n    const $el = $(this);\r\n    const maxlength = $el.attr('maxlength');\r\n\r\n    let remaining = maxlength - $el.val().length;\r\n    let message = `${remaining}/${maxlength}`;\r\n\r\n    $el.wrap('<div class=\"ma__textarea__wrapper\"></div>');\r\n\r\n    $el.parent().attr('data-char-left',message);\r\n\r\n    $el.on('keyup mouseup blur', function(){\r\n      remaining = maxlength - $el.val().length;\r\n      message = `${remaining}/${maxlength}`;\r\n      $el.parent().attr('data-char-left',message);\r\n    });\r\n  });\r\n\r\n  // number restricted input based on it's pattern (this must run prior to type=\"number\")\r\n  $('input[type=\"text\"][pattern=\"[0-9]*\"]').on('keydown', function(e){\r\n    // Allow: delte(46), backspace(8), tab(9), escape(27), enter(13) and space(32))\r\n    if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 32]) !== -1 ||\r\n         // Allow: Ctrl/cmd+A\r\n        (e.keyCode == 65 && (e.ctrlKey === true || e.metaKey === true)) ||\r\n         // Allow: Ctrl/cmd+C\r\n        (e.keyCode == 67 && (e.ctrlKey === true || e.metaKey === true)) ||\r\n         // Allow: Ctrl/cmd+X\r\n        (e.keyCode == 88 && (e.ctrlKey === true || e.metaKey === true)) ||\r\n         // Allow: home, end, left, right\r\n        (e.keyCode >= 35 && e.keyCode <= 39)) {\r\n             // let it happen, don't do anything\r\n             return;\r\n    }\r\n    // Ensure that it is a number and stop the keypress\r\n    if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {\r\n        e.preventDefault();\r\n    }\r\n  });\r\n\r\n  // number input type\r\n  $('input[type=\"number\"], .js-input-number').each(function(){\r\n    const $el = $(this);\r\n    const $plus = $('<button type=\"button\" aria-label=\"increase value\" class=\"ma__input-number__plus\"></button>');\r\n    const $minus = $('<button type=\"button\" aria-label=\"decrease value\" class=\"ma__input-number__minus\"></button>');\r\n\r\n    let value = $el.val();\r\n\r\n    // if the input is not an html input and key restrictions\r\n    if($el.attr('type') !== \"number\") {\r\n      $el.on('keydown', function(e){\r\n        // Allow: delte(46), backspace(8), tab(9), escape(27), enter(13) and .(110 & 190))\r\n        if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 190]) !== -1 ||\r\n             // Allow: Ctrl/cmd+A\r\n            (e.keyCode == 65 && (e.ctrlKey === true || e.metaKey === true)) ||\r\n             // Allow: Ctrl/cmd+C\r\n            (e.keyCode == 67 && (e.ctrlKey === true || e.metaKey === true)) ||\r\n             // Allow: Ctrl/cmd+X\r\n            (e.keyCode == 88 && (e.ctrlKey === true || e.metaKey === true)) ||\r\n             // Allow: home, end, left, right\r\n            (e.keyCode >= 35 && e.keyCode <= 39)) {\r\n                 // let it happen, don't do anything\r\n                 return;\r\n        }\r\n        // Ensure that it is a number and stop the keypress\r\n        if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {\r\n            e.preventDefault();\r\n        }\r\n      });\r\n    }\r\n\r\n    $plus.on('click', function(){\r\n      let value = parseInt($el.val().trim(),10);\r\n\r\n      if(value !== value) {\r\n        value = 0;\r\n      }\r\n\r\n      $el.val(value + 1);\r\n    });\r\n\r\n    $minus.on('click', function(){\r\n      let value = parseInt($el.val(),10);\r\n      \r\n      if(value !== value) {\r\n        value = 0;\r\n      }\r\n           \r\n      $el.val(value - 1);\r\n    });\r\n\r\n    $el.wrap('<div class=\"ma__input-number\"></div>');\r\n\r\n    $el.parent().append($plus,$minus);\r\n  });\r\n\r\n\r\n})(window,document,jQuery);\r\n","export default (function (window,document,$,undefined) {\r\n\r\n  $('form').each(function(){\r\n    let $form = $(this),\r\n        requiredFields = [],\r\n        $errorList = $form.find('.js-error-list');\r\n\r\n    // find all required fields\r\n    $('.js-is-required').each(function(){\r\n      let $field = $(this),\r\n          type = $field.data('type'),\r\n          value = $field.val(),\r\n          valid = validate(value,type);\r\n\r\n      requiredFields.push({type,valid,$el:$field});\r\n\r\n      $(this).data('index',requiredFields.length);\r\n    });\r\n\r\n    // if there aren't any required fields, don't do anything\r\n    if(requiredFields.length === 0) {\r\n      return;\r\n    }\r\n\r\n    // $form.on('submit', function(e){\r\n    //   e.preventDefault();\r\n    // });\r\n\r\n    $form.find('button[type=\"submit\"], input[type=\"submit\"]').on('click',function(e){\r\n      let submitForm = true;\r\n\r\n      // validate each required field\r\n      requiredFields.forEach(function(item) {\r\n        let value = item.$el.val();\r\n\r\n        item.valid = validate(value,item.type);\r\n\r\n        if(item.valid) {\r\n          clearError(item.$el);\r\n        } else {\r\n          submitForm = false;\r\n          addError(item.$el);\r\n        }\r\n      });\r\n\r\n      if(!submitForm) {\r\n        // prevent the form from submitting\r\n        e.preventDefault();\r\n        // show the form error message \r\n        $form.addClass('has-error');\r\n        // scroll up to the error message\r\n        let position = $form.offset();\r\n        \r\n        // scroll to the top of the form where the list of errors should be\r\n        // using 100px offset to compenstate for possible sticky headers\r\n        $(\"html,body\").stop(true,true).animate({scrollTop:position.top - 100}, '750', function(){\r\n          // bring focus to the item we just scrolled to\r\n          $errorList.focus();\r\n        });\r\n      }\r\n    });\r\n  });\r\n\r\n  // receives the jquery object of the input\r\n  function clearError($el){\r\n    $el.removeClass('has-error');\r\n    $el.prev('.ma__error-msg').removeClass('has-error');\r\n  }\r\n\r\n  // receives the jquery object of the input\r\n  function addError($el) {\r\n    $el.addClass('has-error');\r\n    $el.prev('.ma__error-msg').addClass('has-error');\r\n  }\r\n\r\n  function validate(value,type='text'){\r\n    let valid = false;\r\n\r\n    switch(type) {\r\n      case 'email':\r\n        valid = !!(value.match(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]+/i));\r\n        break;\r\n      default:\r\n        valid = value.length !== 0;\r\n    }\r\n\r\n    return valid;\r\n  }\r\n\r\n})(window,document,jQuery);\r\n","import getTemplate from \"../helpers/getHandlebarTemplate.js\";\r\n\r\nexport default (function (window,document,$,undefined) {\r\n  // Only run this code if there is a google map component on the page.\r\n  if(!$('.js-google-map').length || typeof ma.googleMapData === 'undefined'){\r\n    return;\r\n  }\r\n\r\n  // Initialize global (at component scope) map properties\r\n  let max = false, // Maximum number of map markers per map, can be updated instance\r\n    mapsInitialized = false; // Flag to set to trigger clearInterval(checkForGoogleMaps)\r\n\r\n  /**\r\n   * Test for presence of google maps default library (without geocode, places, etc.) until we find it.\r\n   * Loaded in _meta/_01.foot.twig with static api key\r\n   * @todo set up config to pull in dynamic api key\r\n   */\r\n  let checkForGoogleMaps = setInterval(function() {\r\n    if (window.google && window.google.maps && !mapsInitialized) {\r\n      initMaps();\r\n    }\r\n  }, 100);\r\n\r\n  // Stop checking for google maps library after 2 minutes.\r\n  let stopChecking = setTimeout(function() {\r\n    clearInterval(checkForGoogleMaps);\r\n  }, 2 * 60 * 1000);\r\n\r\n  // Clear out any potential HTML tags in text\r\n  function sanitizeText (potentialHTML) {\r\n    let d = document.createElement(\"div\");\r\n    d.innerHTML = potentialHTML;\r\n    return d.innerText;\r\n  }\r\n\r\n  // Initialize the map\r\n  function initMaps () {\r\n    // Stop checking for google maps library.\r\n    mapsInitialized = true;\r\n    clearInterval(checkForGoogleMaps);\r\n    clearTimeout(stopChecking);\r\n\r\n    $(\".js-google-map\").each(function(i) {\r\n      const $el = $(this);\r\n      max = ma.googleMapData[i].maxItems ? ma.googleMapData[i].maxItems : ma.googleMapData[i].markers.length;\r\n\r\n      // Get the maps data (this could be replaced with an api)\r\n      const rawData = ma.googleMapData[i]; // Data object created in @molecules/google-map.twig\r\n\r\n      // *** Create the Map *** //\r\n      // Map default config.\r\n      const initMapData = {\r\n        scrollwheel: false\r\n      };\r\n      // Create map data by combining the rawData with the defaults.\r\n      const mapData = Object.assign({}, rawData.map, initMapData);\r\n      // Create google map object assigned to this component instance with map data.\r\n      const map = new google.maps.Map(this, mapData);\r\n      // Initialize global markers, map bounds.\r\n      let bounds = new google.maps.LatLngBounds();\r\n      // Initialize all markers\r\n      let markers = initMarkers(map, rawData.markers);\r\n      // Add up to max markers to the map, zoom map to fit all bounds\r\n      addMarkersToMap(markers, map, bounds);\r\n\r\n      // Trigger map initialized event, broadcast master markers.\r\n      $el.trigger('ma:GoogleMap:MapInitialized', [markers]);\r\n\r\n      // Add keyboard navigation only after the map is rendered (becoming idle).\r\n      google.maps.event.addListenerOnce(map, 'idle', function() {\r\n        let $mapItems = $(\".js-google-map\").find(\r\n          'div[title=\"Show street map\"],' +\r\n          'div[title=\"Show street map with terrain\"],' +\r\n          'div[title=\"Show satellite imagery\"],' +\r\n          'div[title=\"Zoom in to show 45 degree view\"],' +\r\n          'div[title=\"Show imagery with street names\"],' +\r\n          'div[title=\"Pan up\"],' +\r\n          'div[title=\"Pan down\"],' +\r\n          'div[title=\"Pan left\"],' +\r\n          'div[title=\"Pan right\"],' +\r\n          'div[title=\"Return to the last result\"],' +\r\n          'div[title=\"Zoom in\"],' +\r\n          'div[title=\"Zoom out\"],' +\r\n          'img[title=\"Rotate map 90 degrees\"],' +\r\n          '.gmnoprint area'\r\n        );\r\n        $mapItems.each(function(i, o){\r\n          $(o).attr({\r\n            role: 'button',\r\n            tabindex: '0',\r\n            'aria-label': o.title\r\n          }).bind('keydown', function(ev){\r\n            // If enter is pressed on one of these elements, trigger a click of the element.\r\n            if (ev.which == 13){\r\n              ev.preventDefault();\r\n              $(o).trigger('click');\r\n            }\r\n          });\r\n        });\r\n      });\r\n\r\n      // Listen for map recenter event.\r\n      $el.on(\"ma:GoogleMap:MapRecenter\", function (event, markerIndex) {\r\n        if (typeof markers[markerIndex] === \"undefined\") {\r\n          return false;\r\n        }\r\n        let marker = markers[markerIndex];\r\n        // Close all open infoWindows.\r\n        for (let i in markers) {\r\n          if (markers[i].open) {\r\n            markers[i].hideInfo();\r\n          }\r\n        }\r\n        // Show the infoWindow for this marker.\r\n        marker.showInfo();\r\n      });\r\n\r\n      // Listen for map marker bounce event.\r\n      $el.on(\"ma:GoogleMap:MarkerBounce\", function( event, markerIndex ) {\r\n        if(typeof markers[markerIndex] === \"undefined\") {\r\n          return false;\r\n        }\r\n        let marker = markers[markerIndex];\r\n        // Make the marker bounce three times.\r\n        marker.bounce();\r\n      });\r\n\r\n      // Listen for data change event to update markers by filters.\r\n      $el.on(\"ma:GoogleMap:MarkersUpdated\", function (e, args) {\r\n        // Update map based on pre-sorted markers order\r\n        markers = updateMapByMarkers({\r\n          dataMarkers: args.markers,\r\n          map: map,\r\n          markers: markers,\r\n          place: args.place ? args.place : false\r\n        });\r\n\r\n        // Hide all info windows.\r\n        for (let i in markers) {\r\n          if(markers[i].open) {\r\n            markers[i].hideInfo();\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Returns the array of initialized current map markers.\r\n   *\r\n   * @param map\r\n   *  The current map object.\r\n   *\r\n   * @param markers\r\n   *  The markers to be initialized.\r\n   *\r\n   * @return {Array}\r\n   */\r\n  function initMarkers(map, markers) {\r\n    let initializedMarkers = [];\r\n    markers.forEach(function(data) {\r\n      let markerData = {\r\n        position: new google.maps.LatLng({\r\n          lat: data.position.lat,\r\n          lng: data.position.lng\r\n        }),\r\n        label: data.label,\r\n        infoWindow: data.infoWindow,\r\n        title: 'Marker: ' + sanitizeText(data.infoWindow.name)\r\n      };\r\n      let marker =  new google.maps.Marker(markerData);\r\n      let infoData = infoTransform(markerData.infoWindow);\r\n      let compiledTemplate = getTemplate('googleMapInfo');\r\n      let template = compiledTemplate(infoData);\r\n      let infoWindow = new google.maps.InfoWindow({\r\n        content: template\r\n      });\r\n      let markerBouncing = null;\r\n\r\n      marker.addListener('click', function(){\r\n        // hide all info windows\r\n        for (let i in initializedMarkers) {\r\n          if(initializedMarkers[i].open) {\r\n            initializedMarkers[i].hideInfo();\r\n          }\r\n        }\r\n\r\n        // show this info window\r\n        marker.showInfo();\r\n      });\r\n\r\n      marker.showInfo = () => {\r\n        infoWindow.open(map, marker);\r\n        marker.open = true;\r\n      };\r\n\r\n      marker.hideInfo = () => {\r\n        infoWindow.close(map, marker);\r\n        marker.open = false;\r\n      };\r\n\r\n      marker.bounce = () => {\r\n        clearTimeout(markerBouncing);\r\n        marker.setAnimation(null);\r\n        marker.setAnimation(google.maps.Animation.BOUNCE);\r\n        markerBouncing = setTimeout(() => {\r\n          marker.setAnimation(null);\r\n        }, 1500);\r\n      };\r\n\r\n      initializedMarkers.push(marker);\r\n    });\r\n\r\n    return initializedMarkers;\r\n  }\r\n\r\n  /**\r\n   * Return formatted marker infowindow data.\r\n   *\r\n   * @param data\r\n   *   Infowindow data object:\r\n   *   \"infoWindow\": {\r\n   *      \"name\": \"Attleboro District Court\",\r\n   *      \"phone\": \"15082225900\",\r\n   *      \"fax\": \"15082233706\",\r\n   *      \"email\": \"courts@state.ma.us\",\r\n   *      \"address\": \"88 North Main Street\\nAttleboro, MA 02703\"\r\n   *   }\r\n   *\r\n   * @returns {*}\r\n   *   Object with passed data and new infoData property.\r\n   */\r\n  function infoTransform(data) {\r\n    let infoData = {\r\n      phoneFormatted: formatPhone(data.phone),\r\n      faxFormatted: formatPhone(data.fax)\r\n    };\r\n    return Object.assign({},data,infoData);\r\n  }\r\n\r\n  /**\r\n   * Return phone number data formatted for map marker.\r\n   *\r\n   * @param phone\r\n   *   \"15082225900\",\r\n   * @returns {string}\r\n   *    (508) 222-5900\r\n   */\r\n  function formatPhone(phone) {\r\n    let phoneTemp = phone[0] === '1' ? phone.substring(1) : phone;\r\n    return phoneTemp.replace(/(\\d{3})(\\d{3})(\\d{4})/, '($1) $2-$3');\r\n  }\r\n\r\n  /**\r\n   * Location listing specific map helper functions\r\n   */\r\n\r\n\r\n  /**\r\n   * Renders a new map, with markers  reference to passed marker order and length.\r\n   *\r\n   * @param args\r\n   *  arguments object:\r\n   *    {\r\n   *      dataMarkers: args.markers, // sorted array of markers by witch to sort and filter master markers\r\n   *      map: map, // initialized map instance\r\n   *      markers: markers, // master list of current map markers\r\n   *      place: args.place, // optional location filter place input\r\n\r\n   *    }\r\n   */\r\n  function updateMapByMarkers(args) {\r\n    removeMarkersFromMap(args.markers);\r\n\r\n    // Reset bounds to remove previous search locations.\r\n    let bounds = new google.maps.LatLngBounds();\r\n    if (args.place && ma.autocomplete.getPlace()) {\r\n      // Ensure the map includes the provided location based on the place value.\r\n      bounds.extend(args.place.geometry.location);\r\n    }\r\n\r\n    // Add the new markers to the map and set new bounds based on filtered markers.\r\n    addMarkersToMap(args.dataMarkers, args.map, bounds);\r\n\r\n    // If there is only one marker, zoom out to provide some context.\r\n    if (args.dataMarkers.length === 1) {\r\n      args.map.setZoom(16);\r\n    }\r\n\r\n    return args.dataMarkers;\r\n  }\r\n\r\n  /**\r\n   * Removes passed marker objects from a given map.\r\n   *\r\n   * @param markers\r\n   *   Array of map marker objects.\r\n   */\r\n  function removeMarkersFromMap(markers) {\r\n    for(let i = 0; i < markers.length; i++){\r\n      markers[i].setMap(null);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds markers to a given map and sets bounds based on those markers.\r\n   *\r\n   * @param markers\r\n   *   Initialized map marker objects to be added.\r\n   * @param map\r\n   *   Initialized map object.\r\n   * @param bounds\r\n   *   Initialized map bounds object.\r\n   */\r\n  function addMarkersToMap(markers, map, bounds) {\r\n    // Set max number of markers to whichever is smaller: max or the number of markers sent.\r\n    let maxItems = markers.length < max ? markers.length : max;\r\n\r\n    markers.forEach(function(marker, index) {\r\n      if (index < maxItems) {\r\n        marker.setMap(map);\r\n        // Extend the bounds to include each marker's position.\r\n        bounds.extend(marker.position);\r\n      }\r\n    });\r\n\r\n    // Google Maps default behavior with a single marker when calling\r\n    // fitBounds() is to maximize zoom. This can be undesirable behavior.\r\n    // If only a single marker, let mapData define center and zoom.\r\n    if (markers.length > 1) {\r\n      // Make the map zoom to fit the bounds, showing all locations.\r\n      map.fitBounds(bounds);\r\n    }\r\n  }\r\n\r\n})(window,document,jQuery);\r\n","export default (function (window,document,$,undefined) {\n  \"use strict\";\n\n  $('.js-header-tag-link').each(function(index) {\n\n    let $el = $(this),\n        $showHideButton = $('.js-header-tag-button', $el),\n        $dynamicItems = $('a:nth-child(n+4)', $el),\n        $focusItem = $('a:nth-child(4)', $el),\n        id = $el.attr('id') || 'headerTags' + (index + 1),\n        open = $el.hasClass('is-open');\n\n      // Set the id attribute (respects default if set).\n      $el.attr('id', id);\n\n      if ($dynamicItems.length) {\n        // Show our see button if we have more than three items.\n        $showHideButton.attr('aria-expanded',open).attr('aria-controls', id);\n        $showHideButton.show();\n      }\n\n      $showHideButton.on('click', function(e) {\n        e.preventDefault();\n        $el.toggleClass('is-open');\n\n        if ($el.hasClass('is-open')) {\n          $showHideButton.attr('aria-expanded', 'true');\n          $dynamicItems.show();\n          $focusItem.focus();\n        }\n        else {\n          $showHideButton.attr('aria-expanded', 'false');\n          $dynamicItems.hide();\n        }\n      });\n  });\n\n  $('.ma__relationship-indicators--terms').each(function() {\n    let $tagWrapper = $(this);\n    let $button = $tagWrapper.find('.js-relationship-indicator-button');\n    let $buttonCounter = $button.find('.tag-count');\n    let $hiddenTag = $tagWrapper.find('.js-wrapped-link:hidden');\n    let $focusTag = $hiddenTag.first().find('a');\n    let tagCount = $hiddenTag.length;\n    let $tagState = $button.find('.tag-state');\n\n    // If hidden  tags exist, show button.\n    if (tagCount) {\n      $button.toggle();\n    }\n\n    // Use hidden tags to populate button label.\n    $buttonCounter.text(tagCount);\n\n    $button.on('click', function() {\n      let $tagStateText = $tagState.text();\n\n      // Open hidden tags.\n      $tagWrapper.parent().toggleClass('tags-open');\n      $button.toggleClass('is-open');\n      $hiddenTag.toggle();\n\n      // Change button text.\n      $tagState.text($tagStateText === 'fewer' ? 'more' : 'fewer');\n\n      $button.attr('aria-pressed', function(_, attr) { return !(attr == 'true') });\n\n    });\n\n    $button.on('keydown', function(e) {\n      if (e.keyCode === 9 && $tagWrapper.parent().hasClass('tags-open')) { \n        $focusTag.focus();\n        e.preventDefault(); \n      }\n    });\n\n    $(window).resize(function () {\n      // Remove all the screen width specific styles.\n      $buttonCounter.removeAttr('style');\n      $hiddenTag.removeAttr('style');\n\n      setTimeout(function(){\n        let windowWidth = $(window).width();\n        \n        // recount the hidden tags.\n        $hiddenTag = $tagWrapper.find('.ma__relationship-indicators--term:hidden');\n        tagCount = $hiddenTag.length;\n\n        // Update button text.\n        $buttonCounter.text(tagCount);\n        $tagState.text('more');\n        \n        // Reset the button visibility.\n        if(tagCount >= 1 && windowWidth < 910) {\n          $button.show();\n        } \n        else if (tagCount == 0) {\n          $button.hide();\n        }\n        \n      }, 500);\n\n    });\n\n  });\n\n})(window,document,jQuery);\n","import cookies from \"../helpers/cookies.js\";\r\n\r\nexport default (function (window,document,$,undefined) {\r\n\r\n  $('.js-header-alert').each(function(){\r\n    init.apply(this);\r\n  });\r\n\r\n  $(document).on('ma:AjaxPattern:Render', function(e,data){\r\n    let $context = data.el;\r\n    if ($context.find('.js-header-alert').length) {\r\n      $context.find('.js-header-alert').each(function(){\r\n        init.apply(this);\r\n      })\r\n    }\r\n  });\r\n\r\n  function init(){\r\n    let $el = $(this),\r\n        $link = $el.find('.js-header-alert-link'),\r\n        id = $el.data('id'),\r\n        cookieName = \"Alert\" + id,\r\n        cookieExpires = 365,\r\n        cookieValue = cookies.getCookie(cookieName);\r\n\r\n    // show alert if cookie doesn't exist\r\n    if(cookieValue !== \"hide\") {\r\n      $el.fadeIn().fadeOut('fast').fadeIn('slow');\r\n    }\r\n\r\n    // hide the alert\r\n    $link.on('click',function(){\r\n      cookies.setCookie(cookieName,\"hide\",cookieExpires);\r\n      $el.stop(true,true).fadeOut();\r\n    })\r\n  }\r\n})(window,document,jQuery);\r\n\r\n","export default (function (window, document, $, undefined) {\n\n  // Set height of sidebar plus 100 pixels so full width images\n  // don't sit too tight under under the sidebar content.\n  const sidebarHeight = $(\".sidebar\").length > 0 ? $(\".sidebar\").outerHeight(true) + 100 : 0;\n\n  let debounceTimer;\n\n  function mediaWidth() {\n    // Define wrapper width for use.\n    var wrapperWidth = $(\".main-content\").width();\n\n    $(\".ma__figure--full, .ma__iframe--full\").each(function () {\n      var $thisMedia = $(this);\n\n      // Get position of image relative to container.\n      var thisPosition = $thisMedia.position().top;\n\n      // If this image is below the sidebar.\n      if (thisPosition > sidebarHeight) {\n\n        // Make the image the full width of the wrapper.\n        $thisMedia.css(\"width\", wrapperWidth);\n      }\n    });\n\n    // Force Tableau iframe to reload when figure size is x-large when the page has a side column.\n    if(!$(\".page-content\").hasClass(\".no-sidebar\")) {\n      $(\".ma__figure--x-large\").find(\"iframe\").width(\"100%\");\n    }\n  }\n\n  $(window).on(\"load\", function () {\n    mediaWidth();\n  });\n\n  $(window).resize(function () {\n    if (typeof debounceTimer === \"number\") {\n      window.clearTimeout(debounceTimer);\n    }\n    debounceTimer = window.setTimeout(function () {\n      mediaWidth();\n    }, 250);\n  });\n\n})(window, document, jQuery);","\nexport default (function (window,document,$,undefined) {\n  let tocContainerClass = '.js-toc-container';\n  let containerClass = '.js-inline-overlay';\n  let contentClass = '.js-inline-overlay-content';\n  let toggleClass = '.js-inline-overlay-toggle';\n  let titleClass  = '.js-inline-overlay-title';\n  let feedbackButton = $('body').find('.ma__fixed-feedback-button');\n\n  function initialize () {\n    // Add random ID if no ID present.\n    let contentID = $(contentClass).attr('id');\n    if(!contentID) {\n      let id = `overlay-${Math.floor(Math.random()*100000)}`;\n       $(containerClass).attr('id', id);\n       $(toggleClass).attr('aria-controls, id');\n    }\n  }\n\n  function toggleOverlay() {\n    let $containerEl = $(this).closest(tocContainerClass).find(containerClass);\n    let isOpen = $containerEl.hasClass('is-open');\n    $('body').toggleClass('scroll-disabled', !isOpen);\n    $containerEl.toggleClass('is-open', !isOpen);\n\n    $(`${toggleClass}[aria-expanded=${!isOpen}]`).parents(titleClass).focus();\n\n    feedbackButton.toggleClass('hide-button');\n  }\n\n  initialize();\n  $(document).on('click', toggleClass, toggleOverlay);\n  // allow esc key to dismiss overlay\n  $(document).keydown(function(e) {\n    // ESCAPE key pressed\n    if (e.keyCode === 27 && $(containerClass).hasClass('is-open')) {\n      toggleOverlay();\n    }\n  });\n\n\n})(window,document,jQuery);\n","export default (function (window, document, $, undefined) {\n\n  const $pageAlert = $('.js-in-page-alert');\n  const $alertClose = $pageAlert.find('.js-in-page-alert-link');\n\n  $alertClose.on('click', function () {\n    $pageAlert.addClass('is-closed');\n  });\n\n})(window, document, jQuery);\n\n","export default (function (window,document,$,undefined) {\r\n\r\n  $('.js-keyword-search').each(function(){\r\n    let $el = $(this),\r\n        $form = $el.find('form');\r\n\r\n    $form.on('submit',function(e){\r\n      e.preventDefault();\r\n      $el.addClass('is-dirty')\r\n    });\r\n\r\n    $form.on('reset',function(){\r\n      $el.removeClass('is-dirty')\r\n    });\r\n  });\r\n\r\n})(window,document,jQuery);\r\n","export default (function (window,document,$,undefined) {\n\n  $('.ma__link-list--image-blocks, .ma__link-list--image-links').each(function() {\n\n    const $thisList = $(this).find('.ma__link-list__items'),\n    $thisToggle = $(this).find('.ma__link-list__toggle'),\n    $thisToggleLabel = $thisToggle.find('span'),\n    $listItem = $thisList.children(),\n    listItems = $listItem.length;\n\n    let debounceTimer;\n\n    function showToggle() {\n      let width = $(window).width();\n\n      if ((listItems > 3) && (width < 780) || (listItems > 6) && (width < 1201)) {\n        // Show More button only when there are enough to toggle.\n        $thisToggle.addClass('show-toggle');\n      }\n      else {\n        $thisToggle.removeClass('show-toggle');\n      }\n    }\n    showToggle();\n\n    $thisToggle.on('click', function() {\n\n      let thisToggleText = $thisToggleLabel.text();\n      $thisToggle.toggleClass('toggle-open');\n      $thisToggleLabel.text(thisToggleText === \"fewer\" ? \"more\" : \"fewer\");\n\n      $listItem.each(function() {\n        let $item = $(this);\n\n        if ($item.is(':hidden')) {\n          $item.slideDown().addClass('toggle-open');\n        }\n        else if ($item.is(':visible') && $item.hasClass('toggle-open')) {\n          $item.slideUp().removeClass('toggle-open');\n        }\n      });\n    });\n\n    $(window).resize(function () {\n\n      if(typeof debounceTimer === \"number\") {\n        window.clearTimeout(debounceTimer);\n      }\n      debounceTimer = window.setTimeout(function(){\n        showToggle();\n\n        // Remove added attributes at desktop width.\n        if ($(window).width() < 1201) {\n          $thisToggle.removeAttr('style');\n          $listItem.removeAttr('style');\n        }\n      },150);\n    });\n  });\n\n})(window,document,jQuery);\n","export default (function (window,document,$,undefined) {\n  $('.js-location-filters').each(function() {\n    let $el = $(this);\n\n    let $resultHeading = $('.js-results-heading'),\n      $clearAllButton = '.js-results-heading-clear', // events triggered on parent\n      $filterButton = '.js-results-heading-tag'; // events triggered on parent\n\n    // When google map libraries are loaded, initialize places.autocomplete on the location input, if it exists.\n    $(document).on('ma:LibrariesLoaded:GoogleMaps', function() {\n      let $locationFilterParent = $('.js-filter-by-location', $el);\n      let $locationFilter = $locationFilterParent.find('input');\n      if ($locationFilter.length) {\n        // Create the google places autocomplete object and associate it with the zip code text input.\n        let locationInput = document.getElementById($locationFilter.attr('id'));\n        let swLat = $locationFilterParent.data('maPlaceBoundsSwLat');\n        let swLng = $locationFilterParent.data('maPlaceBoundsSwLng');\n        let neLat = $locationFilterParent.data('maPlaceBoundsNeLat');\n        let neLng = $locationFilterParent.data('maPlaceBoundsNeLng');\n\n        let defaultBounds = new google.maps.LatLngBounds(new google.maps.LatLng(swLat,swLng), new google.maps.LatLng(neLat,neLng));\n\n        // See options: https://developers.google.com/maps/documentation/javascript/places-autocomplete#add_autocomplete\n        let options = {\n          bounds: defaultBounds,\n          strictBounds: true,\n          types: ['geocode'],\n          componentRestrictions: {country: 'us'},\n          fields: ['place_id'],\n        };\n        ma.autocomplete = new google.maps.places.Autocomplete(locationInput, options);\n      }\n\n      populateFormData($el, false);\n    });\n\n    // Listen for clear all button click + trigger interaction event on parent.\n    $resultHeading.on('click', $clearAllButton, function () {\n      $resultHeading.trigger('ma:ResultsHeading:ActiveTagClicked', [{clearedFilter: 'all'}]);\n      $el.trigger('ma:FormFilter:DataUpdated', {$form: $el, clearedFilter: 'all'});\n      populateFormData($el, true);\n    });\n\n    // Listen for single filter button click and trigger interaction event on parent.\n    $resultHeading.on('click', $filterButton, function (e) {\n      let clearedFilter = {\n        'type': $(e.target).data('ma-filter-type'),\n        'value': $(e.target).data('ma-filter-value'),\n        'text': $(e.target).text()\n      };\n\n      $resultHeading.trigger('ma:ResultsHeading:ActiveTagClicked', [{clearedFilter: clearedFilter}]);\n      $el.trigger('ma:FormFilter:DataUpdated', {$form: $el, clearedFilter: clearedFilter});\n      populateFormData($el, true);\n    });\n\n    // Listen for new data from another component interaction (i.e. results heading), update form.\n    $el.on('ma:FormFilter:DataUpdated', function(e, data) {\n      renderForm({clearedFilter: data.clearedFilter, $form: $el});\n    });\n\n    // Handle global form submission.\n    $el.submit(function(e) {\n      e.preventDefault();\n\n      // Update master data with the various filter values.\n      populateFormData($el, true);\n    });\n\n  });\n\n  function populateFormData($el, isFormSubmit) {\n    let formData = getFormData({$form: $el});\n\n    if (!isFormSubmit) {\n      let location = getParameterFromUrl('location');\n      let $location = $el.find('.js-filter-by-location');\n\n      // Set the location from the URL.\n      $location.find('input').val(location);\n\n      // Build the form data from the URL params.\n      formData = [];\n\n      // Get location data from URL.\n      if (location) {\n        formData.push({\n          type: 'location',\n          text: location,\n          value: location\n        });\n      }\n\n      let $tags = $el.find('.js-filter-by-tags');\n      let tags = getParameterFromUrl('tags');\n      if (tags) {\n        let splitTags = tags.split(',');\n        splitTags.forEach((tag) => {\n          if (tag) {\n            tag = tag.split(':');\n            formData.push({\n              type: 'tag',\n              text: tag[1],\n              value: tag[0]\n            });\n            $tags.find('input[type=checkbox][value=' + tag[0] + ']').prop('checked', true);\n          }\n        });\n      }\n    }\n\n    pushFilterState(formData, isFormSubmit);\n\n    // Trigger location listing filter event with current filter values.\n    $el.trigger('ma:LocationFilter:FiltersUpdated', [{formData: formData}, isFormSubmit]);\n  }\n\n  function renderForm(args) {\n    let clearedFilter = args.clearedFilter;\n    // The clear all button was pressed.\n    if (clearedFilter === \"all\") {\n      clearForm(args);\n    }\n    // Single filter button was pressed.\n    else {\n      clearDeactivatedFilter(args);\n    }\n  }\n\n  function getParameterFromUrl(param) {\n    let params = new URLSearchParams(window.location.search);\n    return params.get(param);\n  }\n\n  function getFormData(args) {\n    let $form = $(args.$form),\n      $location = $form.find('.js-filter-by-location'),\n      $tags = $form.find('.js-filter-by-tags'),\n      formData = [];\n\n    // Get location\n    if ($location.find('input').length) {\n      let place = $location.find('input').val();\n      if (place) {\n        formData.push({\n          type: 'location',\n          text: place,\n          value: place\n        });\n      }\n    }\n\n    $tags.find('input:checked').each(function() {\n      formData.push({'type': 'tag', 'value': $(this).val(), 'text': $(this).siblings(\"label\").text()});\n    });\n\n    return formData;\n  }\n\n  function clearDeactivatedFilter(args) {\n    let $form = $(args.$form),\n      $place = $form.find('.js-filter-by-location'),\n      $tags = $form.find('.js-filter-by-tags'),\n      clearedFilter = args.clearedFilter;\n\n    // If the cleared filter button was for a location filter.\n    if (clearedFilter.type === 'location') {\n      $place.find('input').val(\"\");\n      return;\n    }\n\n    // If the cleared filter button was for a tag filter.\n    if (clearedFilter.type === 'tag') {\n      $tags.find('input[type=checkbox][value=' + clearedFilter.value + ']').prop('checked', false);\n    }\n  }\n\n  function clearForm(args) {\n    let $form = $(args.$form),\n      $tags = $('.js-filter-by-tags', $form),\n      $place = $('.js-filter-by-location', $form).find('input');\n\n    // Clear location text input.\n    if ($place.length) {\n      $place.val(\"\");\n    }\n    // Uncheck all checked tags inputs.\n    $tags.find('input:checked').prop('checked', false);\n  }\n\n  function pushFilterState(filters, isFormSubmit) {\n    let params = new URLSearchParams(window.location.search);\n    let pageNum = params.get('page');\n\n    if (isFormSubmit) {\n      pageNum = 1;\n      params.set('page', pageNum);\n    }\n\n    params.delete('location');\n    params.delete('tags');\n\n    if (filters.length) {\n      let tagFilters = [];\n      filters.forEach((filter) => {\n        if (filter.type === 'location') {\n          params.set('location', filter.value);\n        }\n        if (filter.type === 'tag') {\n          tagFilters.push(filter.value + ':' + filter.text);\n        }\n      });\n\n      params.set('tags', tagFilters.join(','));\n    }\n\n    history.pushState(\n      { page: pageNum },\n      `${document.title} | page ${pageNum}`, `${window.location.origin}${window.location.pathname}?${params.toString()}`\n    );\n  }\n\n})(window,document,jQuery);\n","import sticky from \"../helpers/sticky.js\";\nimport listings from \"../helpers/listing.js\";\n\nexport default (function (window, document, $) {\n  // Active state classes for location listing rows.\n  let activeClass = \"is-active\",\n    markerActiveClass = \"is-marker-bounce\",\n    // Selectors for event listeners on dynamic content.\n    row = \".js-location-listing-link\",\n    activeLocationListingRow = row + \".\" + activeClass,\n    markerActiveLocationListingRow = row + \".\" + markerActiveClass,\n    // Parent component selectors.\n    container = \".js-location-listing-results\",\n    parent = \".js-image-promos\",\n    mapCol = \".js-location-listing-map\";\n\n  $(\".js-location-listing\").each(function (i) {\n    let $el = $(this),\n      $mapCol = $el.find(\".js-location-listing-map\"),\n      $map = $el.find(\".js-google-map\"),\n      $resultsHeading = $el.find(\".js-results-heading\"),\n      $pagination = $el.find(\".js-pagination\"),\n      $locationFilter = $el.find(\".js-location-filters\");\n\n    sticky.init($mapCol);\n\n    // Get the location listing component data (this could be replaced with an api)\n    const rawData = ma.locationListing[i]; // Data object created in @organisms/by-author/location-listing.twig\n\n    let masterData = []; // master data structure to preserve state\n    // Listen for map initialization, populate master data structure using locationListing, map markers.\n    $map.on(\"ma:GoogleMap:MapInitialized\", function (e, markers) {\n      masterData = populateMasterDataSource(rawData, markers); // to preserve state\n    });\n\n    // Listen for Google Map api library load completion, with geocode, geometry, and places libraries\n    $(document).on(\"ma:LibrariesLoaded:GoogleMaps\", function () {\n      // Set up click handler for location listing rows.\n      $el.on(\"click\", row, function (e) {\n        // If the link has an href, allow the normal link functionality\n        // and exit event handler.\n        if (e.target.href) {\n          e.stopImmediatePropagation();\n          return;\n        }\n\n        let index = $(e.currentTarget).index();\n\n        // Trigger map to recenter on this item based on it's index.\n        $map.trigger(\"ma:GoogleMap:MapRecenter\", index);\n\n        // Mark this link as active.\n        $el.find(activeLocationListingRow).removeClass(activeClass);\n        // In case the event is triggered on a child element.\n        $(e.currentTarget).addClass(activeClass);\n      });\n\n      // Set up hover / focus event for listing rows.\n      $el.on(\"mouseenter focusin\", row, function (e) {\n        // Remove active state from previously selected list item.\n        $el.find(activeLocationListingRow).removeClass(activeClass);\n\n        // Remove \"focus\" class from any \"focused\" location listing row.\n        // (\"focus\" vs focus because hover doesn't bring focus to element.)\n        $el.find(markerActiveLocationListingRow).removeClass(markerActiveClass);\n\n        // Focus moved into listing for first time, so flag with class, recenter + bounce marker.\n        $(e.currentTarget).addClass(markerActiveClass);\n        let index = $(e.currentTarget).index();\n\n        // Trigger map to recenter on this item and make the marker bounce\n        $map.trigger(\"ma:GoogleMap:MarkerBounce\", index);\n      });\n\n      // Remove \"focus\" class from any \"focused\" location listing row.\n      $el.on(\"mouseleave\", row, function (e) {\n        $el.find(markerActiveLocationListingRow).removeClass(markerActiveClass);\n      });\n\n      // Handle location listings form interaction (triggered by locationFilters.js).\n      $locationFilter.on(\"ma:LocationFilter:FiltersUpdated\", function (e, formValues, resetValues) {\n        // Only update things if masterData contains data.\n        if (masterData.items && masterData.items.length > 0) {\n          // transformData() returns a jQuery deferred object which allows us to wait for any asynchronous js execution to return before executing the .done(callback).\n          // @see: https://api.jquery.com/deferred.done/\n          transformData(masterData, formValues).done(function (transformation) {\n            let page = 1;\n            if (!resetValues) {\n              page = parseInt(getPage(), 10);\n            }\n            masterData = transformation.data; // preserve state\n            // Update the results heading based on the current items state.\n            transformation.data.resultsHeading = listings.transformResultsHeading({\n              data: transformation.data,\n              page: page\n            });\n            // Update pagination data structure, reset to first page\n            transformation.data.pagination = listings.transformPaginationData({\n              data: transformation.data,\n              targetPage: page\n            });\n            // Render the listing page.\n            listings.renderListingPage({data: transformation.data, page: page});\n            // Get the associated markers based on the listing items.\n            transformation.markers = getActiveMarkers({data: transformation.data, page: page});\n            // Trigger child components render with updated data\n            updateChildComponents(transformation);\n          });\n        }\n      });\n\n      // Handle active filter/tag button interactions (triggered by resultsHeading.js).\n      $resultsHeading.on(\"ma:ResultsHeading:ActiveTagClicked\", function (e, clearedFilter) {\n        // transformData() returns a jQuery deferred object which allows us to wait for any asynchronous js execution to return before executing the .done(callback).\n        // @see: https://api.jquery.com/deferred.done/\n        transformData(masterData, clearedFilter).done(function (transformation) {\n          masterData = transformation.data; // preserve state\n          transformation.clearedFilter = clearedFilter;\n\n          masterData = transformation.data; // preserve state\n          // Update the results heading based on the current items state.\n          transformation.data.resultsHeading = listings.transformResultsHeading({ data: transformation.data });\n          // Update pagination data structure, reset to first page\n          transformation.data.pagination = listings.transformPaginationData({ data: transformation.data });\n          // Render the listing page.\n          listings.renderListingPage({ data: transformation.data });\n          // Get the associated markers based on the listing items.\n          transformation.markers = getActiveMarkers({ data: transformation.data });\n          // Trigger child components render with updated data\n          updateChildComponents(transformation);\n        });\n      });\n\n      function handlePagination(e, target) {\n        let nextPage = parseInt(target, 10);\n        // If this is happening during page load, e will be null, and focus should not be updated.\n        let focus = !!e;\n\n        masterData.pagination = listings.transformPaginationData({ data: masterData, targetPage: nextPage });\n        masterData.resultsHeading = listings.transformResultsHeading({ data: masterData, page: nextPage });\n        listings.renderListingPage({ data: masterData, page: nextPage, focus });\n\n        let markers = getActiveMarkers({ data: masterData, page: nextPage });\n        // Trigger child components render with updated data\n        updateChildComponents({ data: masterData, markers: markers });\n      }\n\n      function getPage() {\n        let defaultPage = 1;\n        let params = new URLSearchParams(window.location.search);\n        if (history.state) {\n          defaultPage = history.state.page;\n        }\n        if (params) {\n          defaultPage = params.get(\"_page\");\n        }\n        return defaultPage;\n      }\n\n      // Handle pagination event (triggered by pagination.js), render targetPage.\n      $pagination.on(\"ma:Pagination:Pagination\", handlePagination);\n      let defaultPage = getPage();\n\n      handlePagination(null, defaultPage);\n    });\n\n    // Trigger events to update child components with new data.\n    function updateChildComponents(args) {\n      $resultsHeading.trigger(\"ma:ResultsHeading:DataUpdated\", [args.data.resultsHeading]);\n      $map.trigger(\"ma:GoogleMap:MarkersUpdated\", [{ markers: args.markers, place: args.place }]);\n      $pagination.trigger(\"ma:Pagination:DataUpdated\", [args.data.pagination]);\n      if (args.clearedFilter) {\n        $locationFilter.trigger(\"ma:FormFilter:DataUpdated\", [args.clearedFilter]);\n      }\n    }\n  });\n\n  /**\n   * Data initialization.\n   */\n\n  /**\n   * Returns a master data structure with page level / listing item level data and markup, to reflect component state.\n   *\n   * @param listing\n   *   The locationListing data structure to use as a source\n   * @param markers\n   *   The array of map markers created by component google map (googleMaps.js module)\n   * @returns {Array}\n   *   An array with the following structure:\n   *    [\n   *      maxItems: the max number of items to show per listing \"page\" if provided, defaults to all\n   *      totalPages: the number of pages of items that should render, given the current filters\n   *      resultsHeading: the data structure necessary to render a resultsHeading component\n   *      items: an array of listing items [\n   *        isActive: whether or not the listing should be shown, given current filters state\n   *        page: the page that the listing, if active, will appear on, given the current sort order\n   *        promo: the data structure for the imagePromo component\n   *        markup: the compiled imagePromo markup\n   *        marker: the related map marker data structure for the listing item\n   *      ]\n   *      pagination: the data structure necessary to render a pagination component\n   *      selectors: the selectors for the listing, listing items, listing row, and map\n   *    ]\n   */\n  function populateMasterDataSource(listing, markers) {\n    // Populate master data structure\n    let masterData = [];\n\n    // Ensure locationListing.imagePromos.items is an array (the twig template json_encode()'s a php array)\n    let promosArray = [];\n    $.map(listing.imagePromos.items, function (val, index) { promosArray[index] = val; });\n    listing.imagePromos.items = promosArray;\n\n    // Ensure locationListing.pagination.pages is an array (the twig template json_encode()'s a php array)\n    let pages = [];\n    $.map(listing.pagination.pages, function (val, index) { pages[index] = val; });\n    listing.pagination.pages = pages;\n\n\n    let masterListing = listing.imagePromos.items;\n\n    let masterListingMarkup = listings.transformListing(masterListing, \"locationListingRow\");\n    // The max number of items per page, if designated in locationListing data structure, else all\n    masterData.maxItems = listing.maxItems ? listing.maxItems : listing.imagePromos.items.length;\n    // The initial results heading data structure\n    masterData.resultsHeading = listing.resultsHeading;\n    // The array of items and their respective page, in/active status, marker data, imagePromo data, and markup\n    masterData.items = getMasterListingWithMarkupAndMarkers(masterListing, masterListingMarkup, markers, masterData.maxItems);\n    // The initial pagination data structure;\n    masterData.pagination = listing.pagination;\n    // The total number of pages, given the number of items and the maxItems variable\n    masterData.totalPages = Math.ceil(masterData.items.length / masterData.maxItems);\n    // Set the selector properties necessary to render\n    masterData.selectors = {};\n    masterData.selectors.container = container;\n    masterData.selectors.parent = parent;\n    masterData.selectors.row = row;\n    masterData.selectors.map = mapCol;\n\n    return masterData;\n  }\n\n  /**\n   * Creates the master data structure items array\n   *\n   * @param listing\n   *   The locationListing data structure\n   * @param markup\n   *   The generated array of item markup\n   * @param markers\n   *   The associated map markers for each item\n   * @param max\n   *   The maximum number of items per page\n   * @returns {Array}\n   *  An array of listing items with the following structure:\n   *  [\n   *      isActive: whether or not the listing should be shown, given current filters state\n   *      page: the page that the listing, if active, will appear on, given the current sort order\n   *      promo: the data structure for the imagePromo component\n   *      markup: the compiled imagePromo markup\n   *      marker: the related map marker data structure for the listing item\n   *   ]\n   */\n  function getMasterListingWithMarkupAndMarkers(listing, markup, markers, max) {\n    let items = [];\n    markers.forEach(function (item, index) {\n      items[index] = {\n        isActive: true, // @todo consider checking for this in case of server side preprocessing of state\n        page: Math.ceil((index + 1) / max),\n        marker: item,\n        markup: markup[index],\n        data: listing[index]\n      };\n    });\n    return items;\n  }\n\n  /**\n   * Data transformation.\n   */\n\n  /**\n   * The main data transformation wrapper, returns an instance of masterData which reflects the component state.\n   *\n   * @param data\n   *  An instance of masterData to start from.\n   * @param transformation\n   *  An object representing the change in state (locationFilter form data, resultsHeading tag interaction, etc.)\n   *\n   * @returns {{data: *, markers: *}}\n   *  An object with the current state masterData instance and an array of their related sorted markers to send to map.\n   */\n  function transformData(data, transformation) {\n    // This data transformation potentially involves asynchronous google geocoding.\n    // This jQuery deferered object allows us to wait for a return before moving on inside of the parent function (which invokes this function).\n    // @see https://api.jquery.com/jquery.deferred/\n    let promise = $.Deferred();\n    let transformReturn = {};\n\n    // First filter the data based on component state, then sort alphabetically by default.\n    let filteredData = listings.filterListingData(data, transformation),\n      sortedData = listings.sortDataAlphabetically(filteredData),\n      place = \"\";\n\n    // Sort data by location, if that filter is present.\n    if (listings.hasFilter(filteredData.resultsHeading.tags, \"location\")) {\n      place = listings.getFilterValues(filteredData.resultsHeading.tags, \"location\")[0]; // returns array\n      // If place argument was selected from the locationFilter autocomplete (initiated on the zipcode text input).\n      if (typeof ma.autocomplete !== \"undefined\") {\n        let autocompletePlace = ma.autocomplete.getPlace();\n      }\n      // Geocode the address, then sort the markers and instance of locationListing masterData.\n      ma.geocoder = ma.geocoder ? ma.geocoder : new google.maps.Geocoder();\n      if (typeof autocompletePlace !== \"undefined\" && autocompletePlace.hasOwnProperty(\"place_id\")) {\n        // This is an asynchronous function\n        listings.geocodePlaceId(autocompletePlace.place_id, function (result) {\n          transformReturn.data = sortDataAroundPlace(result, filteredData);\n          transformReturn.geocode = result;\n          // Return the data sorted by location and the geocoded place object\n          promise.resolve(transformReturn);\n        });\n      }\n      // If place argument was populated from locationFilter (zipcode text input) but not from Place autocomplete.\n      else {\n        // This is an asynchronous function\n        var reasonable_formatted_location = place + \" MA, USA\";\n        listings.geocodeAddressString(reasonable_formatted_location, function (result) {\n          transformReturn.data = sortDataAroundPlace(result, filteredData);\n          transformReturn.geocode = result;\n          // Return the data sorted by location and the geocoded place object\n          promise.resolve(transformReturn);\n        });\n      }\n    }\n    else {\n      // Return the data sorted by alphabet and the empty place object\n      promise.resolve({ data: sortedData, place: place });\n    }\n\n    return promise;\n  }\n\n  /**\n   * Returns the markers which correspond to a given \"page\" of location listing data.\n   *\n   * @param args\n   *  An object with the following structure:\n   *    {\n   *      data: instance of filtered, sorted masterData off of which to base markers\n   *      page: the target page of items/markers to render\n   *    }\n   *\n   * @returns\n   *   An array of corresponding map marker objects which should be rendered\n   */\n  function getActiveMarkers(args) {\n    let data = args.data,\n      page = args.page ? args.page : 1; // default to first page if non provided\n\n    // Get just the markers from our active sorted/filtered data listing.\n    return data.items.filter(function (item) {\n      return item.isActive && item.page === page;\n    }).map(function (item) {\n      return item.marker;\n    });\n  }\n\n  /**\n   * Returns instance of location listing masterData, sorted proximity to place.\n   *\n   * @param geocode\n   *   The geocode information by which to sort.\n   * @param data\n   *   The instance of location listing masterData.\n   * @returns {*}\n   *   Sorted instance of location listing masterData.\n   */\n  function sortDataAroundPlace(geocode, data) {\n    // Get all existing marker distance from place, assign as marker property.\n    for (let key in data.items) {\n      if (data.items.hasOwnProperty(key)) {\n        data.items[key].marker.distance = google.maps.geometry.spherical.computeDistanceBetween(geocode.geometry.location, data.items[key].marker.getPosition());\n      }\n    }\n\n    // Sort existing markers by closest to the place.\n    data.items.sort(function (a, b) {\n      return a.marker.distance - b.marker.distance;\n    });\n\n    // Update each location listing item's page number based on new marker sort order.\n    let paginated = listings.paginateItems(data.items, data.maxItems);\n    data.items = paginated.items;\n    data.totalPages = paginated.totalPages;\n    data.place = geocode;\n\n    // Return the newly sorted instance of location listing masterData.\n    return data;\n  }\n}) (window, document, jQuery);\n","const body = document.querySelector(\"body\");\r\nlet width = body.clientWidth;\r\nconst menuButton = document.querySelector(\".js-header-menu-button\");\r\nlet menuButtonText = menuButton.querySelector('.js-header__menu-text');\r\nlet buttonLabel = menuButtonText.textContent;\r\nconst feedbackButton = document.querySelector('.ma__fixed-feedback-button');\r\nconst mainMenu = document.querySelector('.js-main-nav');\r\nlet menuItems = document.querySelectorAll('.js-main-nav-toggle');\r\nconst menuOverlay = document.querySelector('.menu-overlay');\r\nconst searchForm = document.querySelector(\".js-header-search-menu .js-header-search-form\");\r\n\r\n// Open and close the menu\r\nif (null !== menuButton) {\r\n  menuButton.addEventListener(\"click\", function (event) {\r\n    event.preventDefault();\r\n\r\n    if (body.classList.contains(\"show-menu\")) {\r\n      closeMenu();\r\n    } else {\r\n      menuButton.focus();\r\n      openMenu();\r\n    }\r\n  });\r\n\r\n  menuButton.addEventListener('keydown', function (e) {\r\n\r\n    if (e.code == 'ArrowDown') {\r\n      event.preventDefault();\r\n      openMenu();\r\n\r\n      if (window.innerWidth > 620) {\r\n        setTimeout(function timeoutFunction() {\r\n          menuItems[0].querySelector(\".js-main-nav__top-link\").focus();\r\n        }, 500);\r\n      } else {\r\n        setTimeout(function timeoutFunction() {\r\n          document.querySelector('.js-header__nav-search input').focus();\r\n        }, 500);\r\n      }\r\n    }\r\n\r\n    if (e.code == 'Tab') {\r\n      e.preventDefault();\r\n      document.querySelector('.ma__header-search__input').focus();\r\n    }\r\n\r\n    if (e.shiftKey && e.code == 'Tab') {\r\n      closeMenu();\r\n    }\r\n\r\n    if (e.code == 'Escape' || e.which == '27') {\r\n      closeMenu();\r\n    }\r\n  });\r\n}\r\n\r\nif (null !== searchForm) {\r\n  searchForm.addEventListener(\"submit\", function (event) {\r\n    if (window.innerWidth > 620) {\r\n      return;\r\n    }\r\n    event.preventDefault();\r\n\r\n    openMenu();\r\n\r\n    setTimeout(function timeoutFunction() {\r\n\r\n      document.querySelector('.js-header__nav-search input').focus();\r\n\r\n    }, 500);\r\n  });\r\n}\r\n\r\n[].forEach.call(menuItems, function (item) {\r\n\r\n  const itemButton = item.querySelector('.js-main-nav__top-link');\r\n  const subMenu = item.querySelector('.js-main-nav-content');\r\n  const subItems = subMenu.querySelector('.js-main-nav__container');\r\n  let subMenuItems = subMenu.querySelectorAll('.js-main-nav__subitem');\r\n\r\n  subItems.style.opacity = \"0\";\r\n\r\n  itemButton.addEventListener('focus', function(e){\r\n    closeSubMenus(item);\r\n  });\r\n\r\n  itemButton.addEventListener('click', function (e) {\r\n\r\n    closeSubMenus(item);\r\n\r\n\r\n    if (item.classList.contains(\"submenu-open\")) {\r\n      item.classList.remove(\"submenu-open\");\r\n      itemButton.setAttribute('aria-expanded', 'false');\r\n      itemButton.setAttribute('aria-label', 'show menu');\r\n      item.style.pointerEvents = \"none\";\r\n\r\n      setTimeout(function timeoutFunction() {\r\n        item.removeAttribute('style');\r\n      }, 700);\r\n    } else {\r\n      item.classList.add(\"submenu-open\");\r\n      itemButton.setAttribute('aria-expanded', 'true');\r\n      item.style.pointerEvents = \"none\";\r\n      itemButton.setAttribute('aria-label', 'hide menu');\r\n      setTimeout(function timeoutFunction() {\r\n        item.removeAttribute('style');\r\n      }, 700);\r\n    }\r\n\r\n\r\n    if (subMenu.classList.contains('is-closed')) {\r\n\r\n      /** Show the subMenu. */\r\n\r\n      subMenu.classList.remove('is-closed');\r\n      subMenu.style.height = \"auto\";\r\n\r\n      /** Get the computed height of the subMenu. */\r\n      var height = subMenu.clientHeight + \"px\";\r\n\r\n\r\n      /** Set the height of the submenu as 0px, */\r\n      /** so we can trigger the slide down animation. */\r\n      subMenu.style.height = \"0\";\r\n\r\n      setTimeout(function timeoutFunction() {\r\n        subMenu.style.height = height;\r\n        subItems.style.opacity = \"1\";\r\n      }, 50);\r\n\r\n      /** Slide up. */\r\n    } else {\r\n      subMenu.style.height = \"0\";\r\n      subItems.style.opacity = \"0\";\r\n\r\n      setTimeout(function timeoutFunction() {\r\n        subMenu.classList.add('is-closed');\r\n\r\n      }, 500);\r\n    }\r\n  });\r\n\r\n  itemButton.addEventListener('keydown', function (e) {\r\n\r\n    if (e.code == 'ArrowDown') {\r\n      let first = subItems.getElementsByTagName(\"li\")[0];\r\n      first.querySelector('.js-main-nav__link').focus()\r\n    }\r\n\r\n    if (e.code == 'Escape' || e.which == '27') {\r\n      if (item.classList.contains('submenu-open')) {\r\n        subItems.style.opacity = \"0\";\r\n        subMenu.style.height = \"0\";\r\n        itemButton.parentElement.classList.remove('submenu-open');\r\n        itemButton.setAttribute('aria-expanded', 'false');\r\n        itemButton.setAttribute('aria-label', 'show menu');\r\n\r\n        setTimeout(function timeoutFunction() {\r\n          subMenu.classList.add('is-closed');\r\n        }, 500);\r\n        \r\n      }\r\n      else {\r\n        closeMenu();\r\n      }\r\n    }\r\n\r\n    if (e.shiftKey && e.code == 'Tab') {\r\n      subItems.style.opacity = \"0\";\r\n      subMenu.style.height = \"0\";\r\n      item.classList.remove('submenu-open');\r\n      itemButton.setAttribute('aria-expanded', 'false');\r\n      itemButton.setAttribute('aria-label', 'show menu');\r\n\r\n      setTimeout(function timeoutFunction() {\r\n        subMenu.classList.add('is-closed');\r\n      }, 500);\r\n    }\r\n\r\n    if (width > 840 && e.key == 'Tab') {\r\n      if (!itemButton.parentElement.nextElementSibling \r\n      && !itemButton.parentElement.classList.contains('submenu-open')) {\r\n        closeMenu();\r\n      }\r\n    }\r\n  });\r\n\r\n  [].forEach.call(subMenuItems, function (subItem) {\r\n    const prevSib = subItem.previousElementSibling;\r\n    const nextSib = subItem.nextElementSibling;\r\n\r\n    subItem.addEventListener('keydown', function (e) {\r\n      \r\n      switch (e.code) {\r\n        case 'ArrowUp':\r\n        case 'ArrowLeft':\r\n          if (subItem = prevSib) {\r\n            prevSib.querySelector('.js-main-nav__link').focus();\r\n          }\r\n          break;\r\n        case 'ArrowDown':\r\n        case 'ArrowRight':\r\n          if (subItem = nextSib) {\r\n            nextSib.querySelector('.js-main-nav__link').focus();\r\n          }\r\n          break;\r\n        case 'Escape':\r\n          itemButton.focus();\r\n\r\n           break;\r\n      }\r\n    });\r\n  });\r\n});\r\n\r\nfunction closeMenu() {\r\n  body.classList.remove(\"show-menu\");\r\n  menuOverlay.classList.remove(\"overlay-open\");\r\n  menuButtonText.textContent = \"Menu\";\r\n  menuButton.setAttribute('aria-pressed', 'false');\r\n  menuButton.setAttribute('aria-expanded', 'false');\r\n  menuButton.setAttribute('aria-label', 'Open the main menu for mass.gov');\r\n  buttonLabel = \"Menu\";\r\n  feedbackButton.classList.remove('hide-button');\r\n}\r\n\r\nfunction openMenu() {\r\n  body.classList.add(\"show-menu\");\r\n  menuOverlay.classList.add(\"overlay-open\");\r\n  menuButtonText.textContent = \"Close\";\r\n  buttonLabel = \"Close\";\r\n  menuButton.setAttribute('aria-pressed', 'true');\r\n  menuButton.setAttribute('aria-expanded', 'true');\r\n  menuButton.setAttribute('aria-label', 'Close the main menu for mass.gov');\r\n  feedbackButton.classList.add('hide-button');\r\n}\r\n\r\nfunction closeSubMenus(item) {\r\n  //Close other open submenus\r\n  let siblings = [];\r\n  let thisSibling = item.parentNode.firstChild;\r\n\r\n  while (thisSibling) {\r\n    if (thisSibling !== item && thisSibling.nodeType === Node.ELEMENT_NODE)\r\n      siblings.push(thisSibling);\r\n    thisSibling = thisSibling.nextElementSibling || thisSibling.nextSibling;\r\n  }\r\n\r\n  for (let i = 0; i < siblings.length; i++) {\r\n    if (siblings[i].classList.contains('submenu-open')) {\r\n\r\n      setTimeout(function timeoutFunction() {\r\n        siblings[i].querySelector('.js-main-nav-content').style.height = \"0\";\r\n        siblings[i].querySelector('.js-main-nav-content').classList.add('is-closed');\r\n        siblings[i].querySelector('.js-main-nav__container').style.opacity = \"0\";\r\n        siblings[i].classList.remove('submenu-open');\r\n        siblings[i].querySelector('.js-main-nav__top-link').setAttribute('aria-expanded', 'false');\r\n        siblings[i].querySelector('.js-main-nav__top-link').setAttribute('aria-label', 'show menu');\r\n        \r\n      }, 500);\r\n\r\n    }\r\n  }\r\n}\r\n\r\n// Close menu when utility nav is clicked\r\ndocument.querySelector('.js-utility-nav--wide').addEventListener('click', function () {\r\n  closeMenu();\r\n});\r\n\r\n// Close and reset menu on overlay click\r\nmenuOverlay.addEventListener(\"click\", function () {\r\n  closeMenu();\r\n});\r\n\r\nlet debouncer;\r\nwindow.onresize = function () {\r\n  clearTimeout(debouncer);\r\n  debouncer = setTimeout(function () {\r\n    width = body.clientWidth;\r\n  }, 100);\r\n};\r\n","import getTemplate from \"../helpers/getHandlebarTemplate.js\";\r\n\r\nexport default (function (window,document,$,undefined) {\r\n  \r\n  $('.js-org-selector').each(function(i){\r\n    let $el = $(this);\r\n    let data = orgSelector[i];\r\n    let compiledTemplate = getTemplate('orgInfo');\r\n    let $select = $el.find('select').first();\r\n    let $placeholder = $el.find('.js-org-info');\r\n\r\n    //render the template based on the current value\r\n    renderTemplate($select.val());\r\n\r\n    // When the select changes\r\n    $select.change(() => {\r\n      //render the template based on the new value\r\n      renderTemplate($select.val());\r\n    });\r\n\r\n    // Render the template based on value\r\n    function renderTemplate(value) {\r\n      if (typeof(data.organizations[value]) === \"undefined\") {\r\n        $placeholder.html(\"\");\r\n        return false;\r\n      }\r\n\r\n      $placeholder.html(compiledTemplate(data.organizations[value]));\r\n\r\n      return true;\r\n    }\r\n  });\r\n\r\n})(window,document,jQuery);\r\n","export default (function (window, document, $, undefined) {\n\n  $('.ma__organization-navigation').each(function () {\n    // Org Nav Wrapper.\n    const $orgNav = $(this);\n    const $orgNavItems = $orgNav.find('.ma__organization-navigation__items');\n    const $menuWrapper = $orgNav.find('.ma__organization-navigation--inner-wrapper');\n\n    // Page wrapper and fillers. \n    const $pageWrapper = $orgNav.parent().next();\n    let $newsLink = $pageWrapper.find('.ma__press-listing');\n    let $eventsLink = $pageWrapper.find('.ma__event-listing');\n    let $locationsLink = $pageWrapper.find('.ma__mapped-locations');\n    let $relatedOrgs = $pageWrapper.find('.ma__our-organizations');\n\n    const feedbackButton = $('body').find('.ma__fixed-feedback-button');\n\n    $orgNav.find('svg').each(function () {\n      $(this).attr('focusable', 'false');\n    });\n\n    // Mobile Menu vars.\n    const $mobileToggle = $orgNav.find('.ma__organization-navigation__mobile-toggle');\n    const mobileBreak = 910;\n\n    // Search Wrapper vars.\n    const $orgNavSearchForm = $orgNav.find('.js-organization-navigation__search');\n    const $orgNavSearchInput = $orgNav.find('#organization-navigation-search');\n    const $searchToggle = $orgNav.find('.ma__organization-navigation__search .js-search-toggle');\n\n    // Subnav buttons. \n    let $menuButton = $orgNav.find('.subnav-toggle');\n\n    // I want to section.\n    let $sectionButton = $orgNav.find('.ma__org-nav-i-want-to-section .ma__comp-heading');\n\n    // Sticky on scroll.\n    if ($('.pre-content').length) {\n      const bannerBottom = $('.ma__page-banner').offset().top + $('.ma__page-banner').height();\n      let menuHeight = $orgNav.height();\n      $(window).scroll(function () {\n        const orgWindowTop = $(window).scrollTop();\n        let windowWidth = $(window).width();\n\n        // Active Sticky TOC when on page TOC scrolls past.\n        if (bannerBottom > orgWindowTop) {\n          $('.pre-content').removeAttr('style');\n          $orgNav.removeClass('stuck');\n        }\n        else {\n          $('.pre-content').css('padding-top', menuHeight);\n          $orgNav.addClass('stuck');\n        }\n      });\n    }\n\n    // Mobile toggle. \n    $mobileToggle.on('click', function () {\n\n      if (!$orgNav.hasClass('stuck')) {\n        $orgNav.addClass('stuck')\n      }\n\n      $mobileToggle.add($menuWrapper).toggleClass('menu-open');\n      // Close items when closing menu.\n      $('.item-open').removeClass('item-open');\n      // Remove cloned button if present. \n      $('.section-toggle').remove();\n\n      // Lock body scroll on mobile open/close.\n      $('body').toggleClass('scroll-disabled');\n\n      feedbackButton.toggle();\n\n    });\n\n    // Search form swing open/closed.\n    $searchToggle.on('click', function () {\n      $menuWrapper.toggleClass('form-open');\n\n      let $buttonLabel = $searchToggle.find('.search-label');\n      $buttonLabel.text($buttonLabel.text() == \"Close\" ? \"Search this organization\" : \"Close\");\n    });\n\n    $orgNavSearchForm.on('submit', function () {\n      let searchAction = $(this).attr('action') + \"&q=\";\n      let searchParams = $orgNavSearchInput.val();\n      $(this).attr('action', searchAction + searchParams);\n    });\n\n    // Open the dropdowns.\n    $menuButton.each(function () {\n      let $button = $(this);\n      let $buttonParent = $button.parent('.has-subnav');\n      let $thisMenu = $buttonParent.find('.ma__organization-navigation__subitems');\n      let $otherMenus = $('.ma__organization-navigation__subitems').not($thisMenu);\n      let menuHeight = $menuWrapper.outerHeight();\n\n      $buttonParent.on('mouseenter mouseleave', function () {\n        let windowWidth = $(window).width();\n\n        if (windowWidth > mobileBreak) {\n          $('.section-toggle').remove();\n          $buttonParent.toggleClass('item-open');\n          $thisMenu.css('top', menuHeight);\n        }\n        else {\n          return false;\n        };\n      });\n\n      $button.on('focus', function () {\n        $thisMenu.find(\"a[href]\").attr(\"tabindex\", -1);\n        $otherMenus.find(\"a[href]\").attr(\"tabindex\", -1);\n\n        $button.keyup(function (e) {\n\n          $('.item-open').removeClass('item-open');\n\n          if (e.keyCode == 13 || e.keyCode == 32) {\n            $('.section-toggle').remove();\n\n            $thisMenu.find(\"a[href]\").attr(\"tabindex\", 0);\n            $buttonParent.toggleClass('item-open');\n            $thisMenu.css('top', menuHeight);\n\n            $buttonParent.add($thisMenu).on('mouseenter mouseleave', function () {\n              return false;\n            });\n          }\n        });\n      });\n\n      $button.on('click', function () {\n        let windowWidth = $(window).width();\n\n        if (windowWidth < mobileBreak) {\n          $buttonParent.toggleClass('item-open');\n          let $buttonClone = $button.clone(true);\n\n          // Copy the link as a close button inside the menu section.\n          if (!$('.section-toggle').length) {\n            $buttonClone.addClass('section-toggle').prependTo($thisMenu);\n          }\n        }\n        else {\n          return false;\n        };\n      });\n\n    });\n\n    $('body').on('click', '.section-toggle', function () {\n      $('.section-toggle').remove();\n    });\n\n    // Mobile view open the \"I want to sections\".\n    $sectionButton.each(function () {\n\n      let $button = $(this);\n      let $seeAll = $button.parent().find('.ma__link-list__see-all');\n      $button.on('click', function () {\n        let windowWidth = $(window).width();\n        if (windowWidth < mobileBreak) {\n          $button.toggleClass('item-open');\n          $button.next('.ma__link-list__container').add($seeAll).toggleClass('item-open');\n        }\n      });\n\n    });\n\n    if ($relatedOrgs.length) {\n      $relatedOrgs.attr('id', 'organizations');\n      $orgNavItems.append('<li class=\"ma__organization-navigation__item\"><a class=\"internal-link\" href=\"#organizations\">Our organizations</a></li>');\n    }\n\n    if ($newsLink.length) {\n      $newsLink.attr('id', 'news');\n      $orgNavItems.append('<li class=\"ma__organization-navigation__item\"><a class=\"internal-link\" href=\"#news\">News</a></li>');\n    }\n\n    if ($eventsLink.length) {\n      $eventsLink.attr('id', 'events');\n      $orgNavItems.append('<li class=\"ma__organization-navigation__item\"><a class=\"internal-link\" href=\"#events\">Events</a></li>');\n    }\n\n    if ($locationsLink.length) {\n      $locationsLink.attr('id', 'locations');\n      $orgNavItems.append('<li class=\"ma__organization-navigation__item\"><a class=\"internal-link\" href=\"#locations\">Locations</a></li>');\n    }\n\n    $('.ma__organization-navigation__item.mobileLogin').appendTo($orgNavItems);\n\n    $(\".internal-link\").on('focus', function (e) {\n      $('.item-open').removeClass('item-open');\n    });\n\n    $(\".internal-link\").on('click', function (e) {\n      // Close open menus and reset markup.\n      $('.menu-open').removeClass('menu-open');\n      $('.item-open').removeClass('item-open');\n      $('.form-open').removeClass('form-open');\n      $('.section-toggle').remove();\n\n      e.preventDefault();\n      let location = $(this).attr('href');\n      $('html, body').animate({ scrollTop: $(location).offset().top - 120 }, 1000);\n\n      if (feedbackButton.is(\":hidden\")) {\n        feedbackButton.show();\n      }\n    });\n\n    $(window).on(\"resize\", function () {\n      let windowWidth = $(window).width();\n      let $contactGroups = $orgNav.find('.ma__org-nav-contact-us .ma__contact-group');\n\n      if (windowWidth > mobileBreak) {\n        // Check if already wrapped.\n        if ($('.wrappedGroup').length === 0) {\n\n          if (!$('.ma__contact-group__seeAll').length) {\n            // If no 'see all link', wrap address separately.\n            $('.ma__contact-group:first-child').addClass('wrappedGroup');\n            $contactGroups = $contactGroups.not(':first');\n          }\n          else {\n            $contactGroups.slice(0, 2).wrapAll(\"<div class='wrappedGroup' />\");\n            $contactGroups = $contactGroups.slice(2);\n          }\n\n          if ($contactGroups.length < 3) {\n            $contactGroups.wrap(\"<div class='wrappedGroup' />\");\n          }\n          else {\n            // Wrap contact groups in sets of 2 for layout.\n            for (let i = 0; i < $contactGroups.length; i += 2) {\n              $contactGroups.slice(i, i + 2).wrapAll(\"<div class='wrappedGroup' />\");\n            }\n          }\n        }\n      }\n      else {\n        $('.wrappedGroup').find($contactGroups).unwrap();\n        $('body').removeClass('scroll-disabled');\n      }\n\n    }).resize();\n  });\n})(window, document, jQuery);\n","import twiggy from '../helpers/twiggy';\n\nexport default (function (window, document, $, undefined) {\n  if ($('.js-pagination').length === 0) {\n    return;\n  }\n\n  // Set up global component config\n  let prevButton = '.js-pagination-prev',\n    nextButton = '.js-pagination-next',\n    pageButton = '.js-pagination-page';\n\n  $('.js-pagination').each(function () {\n    let $el = $(this);\n    let targetPageNumber = 1;\n    let params = new URLSearchParams(window.location.search);\n    if (history.state && history.state.page) {\n      targetPageNumber = history.state.page;\n    } else if (params.has('_page')) {\n      targetPageNumber = params.get('_page');\n    }\n\n    // Listen for previous page button click and trigger pagination event.\n    $el.on('click', prevButton, function () {\n      targetPageNumber = parseInt(targetPageNumber) - 1;\n      pushPaginationState(targetPageNumber);\n      $el.trigger('ma:Pagination:Pagination', [history.state.page]);\n    });\n    // Listen for next button click and trigger pagination event.\n    $el.on('click', nextButton, function () {\n      targetPageNumber = parseInt(targetPageNumber) + 1;\n      pushPaginationState(targetPageNumber);\n      $el.trigger('ma:Pagination:Pagination', [history.state.page]);\n    });\n    // Listen for page number button click and trigger pagination event;\n    $el.on('click', pageButton, function (e) {\n      targetPageNumber = $(e.target).data('page');\n      pushPaginationState(targetPageNumber);\n      $el.trigger('ma:Pagination:Pagination', [history.state.page]);\n    });\n\n    window.onpopstate = function (e) {\n      if (e.state) {\n        if (e.state.page) {\n          $el.trigger(\"ma:Pagination:Pagination\", [e.state.page]);\n        }\n      }\n    };\n\n    // Listen for new data, render new pagination.\n    $el.on('ma:Pagination:DataUpdated', function (e, data) {\n      renderPagination({ data: data, $el: $el });\n    });\n\n    // if we already have a state or a query parameter, initialize things\n    pushPaginationState(targetPageNumber, true);\n  });\n\n  /**\n   * Renders the contents of a specific results pagination component.\n   *\n   * @param args\n   *   The arguments object, can contain the following properties:\n   *      data: data object from which to populate handlebars template variables (required),\n   *      context: the parent component selector\n   */\n  function renderPagination(args) {\n    // Don't attempt to render anything if we don't have new data.\n    if (!args.data) {\n      return;\n    }\n\n    // Render async with Twig.\n    return twiggy('@molecules/pagination.twig')\n      .then(template => {\n        // Truncate the pagination with ellipsis to prevent it from showing\n        // all page numbers if there are a lot.\n        let pagination = truncatePaginationDisplay(args.data);\n        // Render the pagination Twig async.\n        return template.renderAsync({ pagination: pagination });\n      })\n      .then(markup => {\n        // twiggy is appending the entire pagiantion.twig template\n        // to itself, causing a double .ma__pagination wrapper\n        // unwrappedMarkup is the markup unwrapped and still contains the \n        // original handlers \n        const unwrapperMarkup = $($.parseHTML(markup)).html();\n        args.$el.html(unwrapperMarkup);\n      });\n  }\n\n  /**\n   * Returns a truncated version of the pagination structure.\n   *\n   * @param data\n   *   The the pagination data to transform.\n   */\n  function truncatePaginationDisplay(data) {\n    if (!data) {\n      return;\n    }\n\n    let truncatedPagination = data,\n      current = data.currentPage,\n      last = data.totalPages,\n      delta = 1;\n\n    // For the first and last pages, set the delta to 2 so 2 page numbers\n    // within the current page can be shown.\n    if (current === 1 || current === last) {\n      delta = 2;\n    }\n\n    let left = current - delta,\n      right = current + delta + 1,\n      range = [],\n      rangeWithEllipsis = [],\n      l;\n\n    for (let i = 1; i <= last; i++) {\n      if (i == 1 || i == last || i >= left && i < right) {\n        range.push(i);\n      }\n    }\n\n    for (let i of range) {\n      if (l) {\n        if (i - l === 2) {\n          rangeWithEllipsis.push({ text: l + 1, active: false });\n        }\n        else if (i - l !== 1) {\n          rangeWithEllipsis.push({ text: 'spacer', active: false });\n        }\n      }\n\n      let active = false;\n      if (i === current) {\n        active = true;\n      }\n      rangeWithEllipsis.push({ text: i, active: active });\n      l = i;\n    }\n\n    truncatedPagination.pages = rangeWithEllipsis;\n\n    return truncatedPagination;\n  }\n\n  function pushPaginationState(pageNum, replace = false) {\n    let params = new URLSearchParams(window.location.search);\n    params.set('_page', pageNum);\n\n    if (replace) {\n      history.replaceState(\n        { page: pageNum },\n        `${document.title} | page ${pageNum}`, `${window.location.origin}${window.location.pathname}?${params.toString()}`\n      );\n    }\n    else {\n      history.pushState(\n        { page: pageNum },\n        `${document.title} | page ${pageNum}`, `${window.location.origin}${window.location.pathname}?${params.toString()}`\n      );\n    }\n  }\n\n})(window, document, jQuery);\n","export default (function (window,document,$,undefined) {\r\n  \r\n  $('.js-input-date').each(function(){\r\n    let $el = $(this);\r\n    let restrict = $el.data('restrict');\r\n    let picker = new Pikaday({ \r\n      field: this,\r\n      format: 'MM/DD/YYYY',\r\n    });\r\n\r\n    switch(restrict) {\r\n      case 'max':\r\n        picker.setMaxDate(new Date());\r\n        break;\r\n      case 'min':\r\n        picker.setMinDate(new Date());\r\n        break;\r\n    }\r\n\r\n    $el.attr('type','text');\r\n  });\r\n\r\n})(window,document,jQuery);\r\n","/**\n * Adjust width of horizontal lists to prevent single items on lines by themselves.\n */\nfunction preventWidows($list) {\n  // Get array of list items, but not whitespace nodes.\n  const $items = Array.from($list.childNodes).filter(function(node) {\n    return node.nodeType == Node.ELEMENT_NODE;\n  });\n\n  const itemCount = $items.length;\n\n  for(var i = 0; i < itemCount; i++) {\n    $items[i].classList.remove('expand-left');\n    $items[i].classList.remove('expand-right');\n  }\n\n  // Assuming that all items have the same width and margins.\n  // If they can ever be different, this will need rewriting\n  // to calculate the widths of all items individually.\n  const itemStyle = window.getComputedStyle($items[0]);\n  const itemWidth = \n    parseFloat(itemStyle.marginLeft) +\n    parseFloat(itemStyle.paddingLeft) +\n    parseFloat(itemStyle.width) +\n    parseFloat(itemStyle.paddingRight) +\n    parseFloat(itemStyle.marginRight)\n  ;\n\n  const listStyle = window.getComputedStyle($list);\n  const listWidth =\n    parseFloat(listStyle.width) -\n    parseFloat(listStyle.borderLeft) - \n    parseFloat(listStyle.paddingLeft) -\n    parseFloat(listStyle.paddingRight) -\n    parseFloat(listStyle.borderRight)\n  ;\n\n  const itemsPerRow = Math.floor(listWidth / itemWidth);\n\n  // Widows are okay if there are only two items across.\n  if(itemsPerRow < 3) {\n    return;\n  }\n\n  const itemsInLastRow = itemCount % itemsPerRow;\n\n  if(itemsInLastRow !== 1) {\n    return;\n  }\n  \n  // The item third from the end gets expanded right margin.\n  $items[itemCount - 1 - 2].classList.add('expand-right');\n  // The first item in the last (formerly) full row gets expanded left margin.\n  $items[itemCount - 1 - itemsPerRow].classList.add('expand-left');\n}\n\n/**\n * Prevent widows now and on all future window resizes.\n */\nfunction preventWidowsForever($list) {\n\n  var timeout = false;\n\n  preventWidows($list);\n\n  window.addEventListener('resize', function() {\n    window.clearTimeout(timeout);\n    timeout = window.setTimeout(\n      function() {\n        preventWidows($list);\n      },\n      250\n    );\n  });\n}\n\nexport default (function (window, document, undefined) {\n  const $horizontalLists = document.querySelectorAll('.ma__horizontal-list');\n  const length = $horizontalLists.length;\n\n  for(var i = 0; i < length; i++) {\n    preventWidowsForever($horizontalLists[i]);\n  }\n})(window, document);\n  ","export default (function (window, document, $, undefined) {\n\n  $('.ma__related-orgs-and-topics__column .ma__link-list').each(function (index) {\n    init.apply(this, [index]);\n  });\n\n  function init(index) {\n    const $thisList = $(this);\n    const $thisWrapper = $thisList.closest('.ma__related-orgs-and-topics__column');\n    const $toggleButton = $thisList.next('.js-ma__related-orgs-and-topics--toggle');\n\n    $toggleButton.on('click', function () {\n      $toggleButton.toggleClass('open');\n      $thisWrapper.toggleClass('open');\n    });\n\n    if ($thisList.find('.ma__link-list__item').length < 10) {\n      $toggleButton.addClass('short-list');\n    }\n  }\n\n})(window, document, jQuery);\n","export default (function (window, document, $) {\n\n  // Responsive table HTML structure\n  // <div class=\"ma__table--responsive\">\n  //   <div class=\"ma__table--responsive__wrapper\">\n  //    <table> ... </table>\n  //   </div>\n  // </div>\n\n  const $window = $(window);\n  let responsiveTables = [];\n\n  // Set the width of each sticky header cell and the width of the sticky\n  // header table.\n  function setWidths(rt) {\n\n    rt.$table\n      .find(\"thead th\")\n      .each(function (i) {\n        rt.$stickyHeader\n          .find(\"th\")\n          .eq(i)\n          .width($(this).width());\n      });\n\n    if (rt.$stickyHeader) {\n      // Set width of sticky table head.\n      rt.$stickyHeader.find(\"table\").width(rt.$table.width());\n      rt.$stickyHeader.width(rt.$stickyHeader.parent().width());\n    }\n  }\n\n  // Initialize or reset the responsive tables. This includes creating a copy\n  // of the header and setting its fixed position properly.\n  function initializeTable(element, reset = false, index = false) {\n    const $element = $(element);\n    let $table = $element.find(\"table\").not(\"table table\");\n    let $thead = $table.find(\"thead\").not(\"table table thead\");\n    const hasThead = $thead.length;\n    let theadHeight = 0;\n    const isNestedThead = $thead.closest(\"table table\").length;\n    const hasTh = $table.find(\"th\").length;\n    let $stickyHeader = null;\n    const canScroll = $table.width() > $table.parent().width();\n\n    // If the table has a thead with th elements, setup the sticky version.\n    if (hasThead && hasTh && !isNestedThead) {\n      theadHeight = $thead[0].offsetHeight;\n\n      // Only wrap the table if this is the first time we have encountered it.\n      if (!reset) {\n        $thead = $thead.clone();\n        $table.after(\"<div class='sticky-thead'><div class='sticky-thead-wrapper'><table></table></div></div>\");\n\n        $stickyHeader = $element.find(\".sticky-thead\");\n        $stickyHeader.find(\"table\").append($thead);\n      }\n      else {\n        $stickyHeader = $element.find(\".sticky-thead\");\n      }\n\n      // Setting it in a fixed position, but initially invisible.\n      let tableLeft = $element.offset().left;\n      $stickyHeader\n        .css({\n          \"position\": \"fixed\",\n          \"left\": tableLeft,\n          \"top\": getAdditionalOffset(),\n          \"opacity\": 0,\n          \"height\": theadHeight\n        });\n      $stickyHeader[0].scrollLeft = 0;\n    }\n\n    // Add class, remove margins, reset width and wrap table.\n    $table\n      .addClass(\"sticky-enabled\")\n      .css({\n        margin: 0,\n        width: \"100%\"\n      });\n\n    $element.toggleClass(\"has-horizontal-scroll\", canScroll);\n    // Make sure the scrollbar is the width of the table.\n    $element.find(\".ma__table__horizontal-nav\").width($table.parent().width());\n\n    // If we are not resetting, use the length as the index.\n    if (index === false) {\n      index = responsiveTables.length;\n    }\n\n    let rt = {\n      index: index,\n      $root: $element,\n      $table: $table,\n      $stickyHeader: $stickyHeader,\n      theadHeight: theadHeight,\n      headerStuck: false,\n      scrollStuck: false,\n      canScroll\n    };\n    // Set the widths of the header.\n    setWidths(rt);\n    // Setup the scrollbar deminsions.\n    recalcScrollbar(rt);\n\n    // If we are reseting, replace the element. Otherwise, add it.\n    if (reset) {\n      responsiveTables[index] = rt;\n    }\n    else {\n      responsiveTables.push(rt);\n      rt.$root[0].addEventListener(\"scroll\", handleTableScroll, true);\n    }\n    // Decide what should be showing or stuck.\n    checkVisibility(rt);\n\n    // Reset scroll since this may have changed the max scroll amount.\n    if (rt.canScroll) {\n      const tableWrapper = element.getElementsByClassName(\"ma__table--responsive__wrapper\")[0];\n      const scrollbar = element.getElementsByClassName(\"ma__scroll-indicator\")[0];\n      tableWrapper.scrollLeft = 0;\n      scrollbar.scrollLeft = scrollbar.scrollWidth - scrollbar.offsetWidth;\n    }\n\n  }\n\n  // Certain other components that stick to the top of the page need to be accounted for.\n  // This calculates the additional offset that a table sticky header should drop down.\n  function getAdditionalOffset() {\n    let additionalOffset = 0;\n    if (document.documentElement.clientWidth <= 825) {\n      const $jsStickyHeader = $(\".js-sticky-header\");\n      if ($jsStickyHeader) {\n        additionalOffset += $jsStickyHeader.height();\n      }\n    }\n    if ($(\".js-scroll-anchors\")[0] &&\n      document.documentElement.clientWidth <= 765) {\n      additionalOffset += $(\".js-scroll-anchors\").height();\n    }\n    if (document.documentElement.classList.contains('stickyTOC')) {\n      if (document.documentElement.clientWidth <= 841) {\n        additionalOffset += 75;\n      }\n      else {\n        additionalOffset += 70;\n      }\n    }\n    return additionalOffset > 0 ? additionalOffset + \"px\" : 0;\n  }\n\n  // Based on the scroll position, decide whether or not to show or hide or scroll\n  // or stick the header and scrollbar.\n  function checkVisibility(rt) {\n    const elementTop = rt.$root.offset().top;\n    const windowTop = $window.scrollTop();\n    const windowBottom = windowTop + $window.height();\n    // + 50 to accommodate table padding for stickyNav \n    const elementBottom = (elementTop + (rt.$root.height() + 50));\n    const tableBottom = elementTop + rt.$table.height();\n\n    // Handle header visibility.\n    if (rt.$stickyHeader) {\n      const stuckTop = rt.$stickyHeader.offset().top;\n      const stuckBottom = stuckTop + rt.$stickyHeader.height();\n      if (!rt.headerStuck && elementTop < stuckTop && tableBottom > stuckBottom) {\n        responsiveTables[rt.index].headerStuck = true;\n        rt.$stickyHeader.css(\"opacity\", 1);\n      }\n      else if (rt.headerStuck && (elementTop > stuckTop || tableBottom < stuckBottom)) {\n        responsiveTables[rt.index].headerStuck = false;\n        rt.$stickyHeader.css(\"opacity\", 0);\n      }\n    }\n\n    // Handle scrollbar stuck / unstuck.\n    if (rt.canScroll) {\n      let headerBottom = elementTop;\n      if (rt.$stickyHeader) {\n        headerBottom += rt.$stickyHeader.height();\n      }\n      if (!rt.scrollStuck && windowBottom < elementBottom && headerBottom < windowBottom) {\n        responsiveTables[rt.index].scrollStuck = true;\n        rt.$root.addClass(\"stickNav\");\n        const tableLeft = rt.$root[0].getBoundingClientRect().left + $window[\"scrollLeft\"]();\n        rt.$root.find(\".ma__table__horizontal-nav\").css(\"left\", tableLeft);\n      }\n      else if (rt.scrollStuck &&\n        (windowBottom > elementBottom && windowTop < elementBottom ||\n          headerBottom > windowBottom || elementBottom < windowTop)) {\n\n        responsiveTables[rt.index].scrollStuck = false;\n        rt.$root.removeClass(\"stickNav\");\n        rt.$root.find(\".ma__table__horizontal-nav\").css(\"left\", \"\");\n      }\n    }\n  }\n\n  // When scrolling the window, handle header / scrollbar visibility and position.\n  function handleScroll() {\n    responsiveTables.forEach((rt) => {\n      checkVisibility(rt);\n    });\n  }\n\n  // When the window is resized, reset the tables.\n  function handleWindowResize() {\n    responsiveTables.forEach((rt) => {\n      initializeTable(rt.$root[0], true, rt.index);\n    });\n  }\n\n  // Scroller click handler.\n  function handleScrollerClick(e) {\n    const $scrollContainer = $(this).parents(\".js-ma-responsive-table\").find(\".ma__table--responsive__wrapper\");\n    let posX = $(this).position().left;\n    let midpoint = $(e.target).offset().left + $(e.target).width() / 2;\n    let clickpoint = e.pageX - posX;\n\n    if (clickpoint < midpoint) {\n      // Scroll left.\n      $scrollContainer.animate({\n        scrollLeft: $scrollContainer.scrollLeft() - Math.abs(midpoint - clickpoint)\n      }, 250);\n    }\n    else {\n      // Scroll right.\n      $scrollContainer.animate({\n        scrollLeft: $scrollContainer.scrollLeft() + Math.abs(midpoint - clickpoint)\n      }, 250);\n    }\n  }\n\n  // Handle dragging the scrollbar.\n  function handleScrollerInteraction(e) {\n    const $scrollContainer = $(this).parents(\".js-ma-responsive-table\").find(\".ma__table--responsive__wrapper\");\n\n    let initialPosition = {\n      x: e.pageX,\n      y: e.pageY\n    };\n\n    function handleMouseUp() {\n      // Remove listeners.\n      $(\"body\")\n        .off(\"mousemove\", handleMouseMove)\n        .off(\"mouseup\", handleMouseUp);\n    }\n\n    function handleMouseMove(e) {\n      let newPosition = {\n        x: e.pageX,\n        y: e.pageY\n      };\n\n      $scrollContainer.scrollLeft($scrollContainer.scrollLeft() + newPosition.x - initialPosition.x);\n    }\n    // Attach to body so you don't get a\n    // disconnected handler if you drag off the bar.\n    $(\"body\")\n      .on(\"mouseup\", handleMouseUp)\n      .on(\"mousemove\", handleMouseMove);\n\n  }\n\n  // Handle additional interactions with scrollbars.\n  function scrollbarEventHandlers() {\n    // @todo make this amount calculated based on a percentage of the scroll amount.\n    const amountToScroll = 200;\n\n    // Scrollbar left arrow.\n    $(\".ma__table__horizontal-nav__left\").click(function () {\n      const $scrollContainer = $(this).parents(\".js-ma-responsive-table\").find(\".ma__table--responsive__wrapper\");\n      // On click of left arrow element, animate the movement of the scrollbar\n      // to the left by the integer amount defined in `amountToScroll`.\n      const currentScrollLeft = $scrollContainer.scrollLeft();\n\n      $scrollContainer.animate({\n        scrollLeft: (currentScrollLeft - amountToScroll) < 0 ? 0 : (currentScrollLeft - amountToScroll)\n      }, 250);\n    });\n\n    // Scrollbar right arrow.\n    $(\".ma__table__horizontal-nav__right\").click(function () {\n      const $scrollContainer = $(this).parents(\".js-ma-responsive-table\").find(\".ma__table--responsive__wrapper\");\n      // On click of left arrow element, animate the movement of the scrollbar\n      // to the left by the integer amount defined in `amountToScroll`.\n      $scrollContainer.animate({\n        scrollLeft: $scrollContainer.scrollLeft() + amountToScroll\n      }, 250);\n    });\n\n    // Scroll indicator element.\n    $(\".ma__scroll-indicator\").on(\"click\", handleScrollerClick);\n\n    $(\".ma__scroll-indicator__button\")\n      .on(\"mousedown\", handleScrollerInteraction)\n      // Deaden clicking on the scroll button\n      // in order to handle click on parent.\n      .on(\"click\", e => e.stopPropagation());\n\n  }\n\n  // Calculate and set the widths of scrollbar elements.\n  function recalcScrollbar(rt) {\n    // Table width.\n    const tableWidth = rt.$table.width();\n    // Table container width.\n    const tableContainerWidth = rt.$table.parent().width();\n    // Width of the arrows: < and >.\n    const scrollArrowWidth = 16;\n    // Margin to the left or right of the arrows: < and >.\n    const scrollArrowMargin = 15;\n    // Scrollbar container width = table container width minus arrows and arrow margin.\n    const scrollbarContainerWidth = tableContainerWidth - (scrollArrowWidth + scrollArrowMargin) * 2;\n    // Scrollbar width.\n    const scrollbarWidth = scrollbarContainerWidth + scrollbarContainerWidth * (tableWidth - tableContainerWidth) / tableWidth;\n    // Button width.\n    const buttonWidth = scrollbarContainerWidth * tableContainerWidth / tableWidth;\n\n    const $scrollbar = rt.$root.find(\".clip-scrollbar\");\n    const $scrollbarIndicator = $scrollbar.find(\".ma__scroll-indicator\");\n\n    $scrollbar.find(\".ma__scroll-indicator--bar\").css(\"width\", `${scrollbarWidth}px`);\n    $scrollbarIndicator.css(\"width\", `${scrollbarContainerWidth}px`);\n    $scrollbarIndicator.find(\".ma__scroll-indicator__button\").css(\"width\", `${buttonWidth}px`);\n  }\n\n  // Allow a parameter to prevent triggering scrolling in an infinite loop.\n  let skip = 0;\n\n  // Calculate and set the scroll position of the other components when one component is scrolled.\n  function handleTableScroll(e) {\n    if (skip === 0) {\n      const t = e.target;\n      // No matter the element, the percentage as a decimal should be the amount of pixels scrolled\n      // divided by the max amount that can be scrolled which is the scroll width minus the width.\n      const scrollPercent = t.scrollLeft / (t.scrollWidth - t.offsetWidth);\n      [\"ma__table--responsive__wrapper\", \"ma__scroll-indicator\", \"sticky-thead-wrapper\"].map(scrollable => {\n        if (t.className !== scrollable) {\n          const elements = this.getElementsByClassName(scrollable);\n          if (elements.length > 0) {\n            let el = elements[0];\n            // If we are scrolling the scrollbar or the target is the scrollbar, inverse the scroll.\n            if (scrollable === \"ma__scroll-indicator\" || t.className === \"ma__scroll-indicator\") {\n              skip++;\n              el.scrollLeft = (el.scrollWidth - el.offsetWidth) * (1 - scrollPercent);\n            }\n            // Set the scroll to the same as the target.\n            else {\n              skip++;\n              el.scrollLeft = t.scrollLeft;\n            }\n          }\n        }\n      });\n    }\n    else {\n      skip--;\n    }\n  }\n\n  // Initialize the tables.\n  $(\".js-ma-responsive-table\").each((i, el) => initializeTable(el));\n\n  // Set the scrollbar event handlers.\n  scrollbarEventHandlers();\n\n  // Set window scroll handler.\n  $window.on(\"scroll\", handleScroll);\n  // Set window resize.\n  $window.on(\"resize\", handleWindowResize);\n\n})(window, document, jQuery);\n","export default (function () {\n\n  fitvids('.js-ma-responsive-video');\n\n})();","import twiggy from '../helpers/twiggy';\n\nexport default (function (window,document,$,undefined) {\n  // Set up global component config\n  let  clearAllButton = '.js-results-heading-clear', // events triggered on parent\n    filterButton = '.js-results-heading-tag'; // events triggered on parent\n\n  $(\".js-results-heading\").each(function() {\n    const $el = $(this);\n\n    // Listen for clear all button click + trigger interaction event on parent.\n    $el.on('click', clearAllButton, function () {\n      $el.trigger('ma:ResultsHeading:ActiveTagClicked', [{clearedFilter: 'all'}]);\n    });\n\n    // Listen for single filter button click and trigger interaction event on parent.\n    $el.on('click', filterButton, function (e) {\n      let clearedFilter = {\n        'type': $(e.target).data('ma-filter-type'),\n        'value': $(e.target).data('ma-filter-value'),\n        'text': $(e.target).text()\n      };\n\n      $el.trigger('ma:ResultsHeading:ActiveTagClicked', [{clearedFilter: clearedFilter}]);\n    });\n\n    // Listen for new results heading data, render new results heading.\n    $el.on('ma:ResultsHeading:DataUpdated', function (e, data) {\n      renderResultsHeading({data: data, $el: $el});\n    });\n  });\n\n  /**\n   * Renders the contents of a specific results heading component.\n   *\n   * @param args\n   *   The arguments object, can contain the following properties:\n   *      data: data object from which to populate handlebars template variables (required),\n   *      context: the parent component selector\n   */\n  function renderResultsHeading(args) {\n    // Don't attempt to render anything if we don't have new data.\n    if (!args.data) {\n      return;\n    }\n    // Asynchronously render via TwigJS.\n    twiggy('@molecules/results-heading.twig')\n        .then(t => t.renderAsync({resultsHeading: args.data}))\n        .then(markup => args.$el.html($(markup).children()))\n  }\n\n})(window,document,jQuery);\n","import checkMobile from \"../helpers/cssControlCode.js\";\r\n\r\nexport default (function (window,document,$,undefined) {\r\n\r\n  $(\".js-scroll-anchors\").each(function() {\r\n    let $el = $(this),\r\n        $elParent = $el.parent().css('position') === 'relative' ? $el.parent() : $el.parent().offsetParent(),\r\n        $titleLink = $el.find('.is-title'),\r\n        $links = $el.find('.js-scroll-anchors-link'),\r\n        elHeight,\r\n        headerBuffer = 0,\r\n        lowerLimit,\r\n        upperLimit,\r\n        debounceTimer,\r\n        activeClass = \"is-active\",\r\n        activeAnchorIndex = 0,\r\n        anchors = [],\r\n        numAnchors = 0,\r\n        isMobile = false,\r\n        linkScrolling = false;\r\n\r\n    setVariables();\r\n\r\n    // default assumption as to where the screen will load\r\n    $el.attr('data-sticky','top');\r\n\r\n    // update variables one more time to catch any post page load changes\r\n    window.setTimeout(function(){\r\n      setVariables();\r\n    },1000);\r\n\r\n    $links.on('click',function(e) {\r\n      e.preventDefault();\r\n\r\n      let $link = $(this);\r\n\r\n      // is the menu closed on mobile\r\n      if(!$el.hasClass('is-open') && isMobile) {\r\n        // just show the menu\r\n        $el.addClass('is-open');\r\n        return;\r\n      }\r\n\r\n      activeAnchorIndex = $(this).data('index');\r\n      // find the location of the desired link and scroll the page\r\n      let position = anchors[activeAnchorIndex].position;\r\n      // close the menu\r\n      $el.removeClass('is-open');\r\n      // prevent the scroll event from updating active links\r\n      linkScrolling = true;\r\n\r\n      $(\"html,body\").stop(true,true).animate({scrollTop:position}, '750', function(){\r\n        linkScrolling = false;\r\n        // Get the link hash target so we can bring focus to it\r\n        let hash = anchors[activeAnchorIndex].hash;\r\n        // bring focus to the item we just scrolled to\r\n        $(hash).focus();\r\n        // timing issue with window.scroll event firing.\r\n        setTimeout(function(){\r\n          // set this link as active.\r\n          $el.find('.' + activeClass).removeClass(activeClass);\r\n          $link.addClass(activeClass);\r\n        },30);\r\n      });\r\n    });\r\n\r\n    // if the content contains accordions,\r\n    // readjust settings when there state changes.\r\n    $('.js-accordion-link').on('click',function() {\r\n      if(typeof debounceTimer === \"number\") {\r\n        window.clearTimeout(debounceTimer);\r\n      }\r\n      debounceTimer = window.setTimeout(function(){\r\n        setVariables();\r\n        setPosition();\r\n        activateLink();\r\n      },400);\r\n    })\r\n\r\n    $el.find(\".js-scroll-anchors-toggle\").on('click',function() {\r\n      $el.toggleClass('is-open');\r\n    });\r\n\r\n    // make the links sticky\r\n    $(window).resize(function() {\r\n      if(typeof debounceTimer === \"number\") {\r\n        window.clearTimeout(debounceTimer);\r\n      }\r\n      debounceTimer = window.setTimeout(function(){\r\n        setVariables();\r\n        setPosition();\r\n        activateLink();\r\n      },300);\r\n    });\r\n\r\n    $(window).scroll(function () {\r\n      setPosition();\r\n\r\n      if(!linkScrolling){\r\n        activateLink();\r\n      }\r\n    });\r\n\r\n    function setVariables() {\r\n      let topOffset = 0;\r\n\r\n      headerBuffer = 0;\r\n      elHeight = $el.outerHeight(true);\r\n      upperLimit = $elParent.offset().top;\r\n      isMobile = checkMobile($el);\r\n\r\n      if($elParent[0].hasAttribute(\"style\") && !isMobile) {\r\n        $elParent.removeAttr('style');\r\n      }\r\n\r\n      if(isMobile) {\r\n        headerBuffer = $('.js-sticky-header').height() || 0;\r\n        upperLimit -= headerBuffer;\r\n        topOffset = elHeight;\r\n\r\n        mobileTitleOn();\r\n      }\r\n      else {\r\n        mobileTitleOff();\r\n      }\r\n      \r\n      lowerLimit = upperLimit + $elParent.outerHeight(true) - $el.height();\r\n\r\n      // locate the position of all of the anchor targets\r\n      anchors = new Array;\r\n      $links.each(function(i,e){\r\n        let $el = $(this),\r\n          $link = $el.is('a') ? $el : $el.find('a'),\r\n          hash = $link[0].hash,\r\n          position = $(hash).offset() ? $(hash).offset().top - headerBuffer - topOffset : upperLimit;\r\n\r\n        anchors[i] = { hash, position };\r\n\r\n        $el.data('index',i);\r\n      });\r\n\r\n      // record the number of anchors for performance\r\n      numAnchors = anchors.length;\r\n    }\r\n\r\n    function setPosition() {\r\n      let windowTop = $(window).scrollTop(),\r\n          attr = $el.attr('data-sticky'),\r\n          top = attr !== 'top' && windowTop <= upperLimit,\r\n          middle = attr !== 'middle' && windowTop < lowerLimit && windowTop > upperLimit,\r\n          bottom = attr !== 'bottom' && windowTop >= lowerLimit;\r\n\r\n      if($elParent[0].hasAttribute(\"style\") && !isMobile) {\r\n        $elParent.removeAttr('style');\r\n      }\r\n\r\n      if(!$elParent[0].hasAttribute(\"style\") && isMobile && attr === 'middle') {\r\n        $elParent.css({'paddingTop':elHeight});\r\n      }\r\n\r\n      if(top) {\r\n        $el.attr('data-sticky','top');\r\n\r\n        if(isMobile){\r\n          $elParent.removeAttr('style');\r\n\r\n          mobileTitleOn();\r\n        }\r\n      }\r\n      else if (middle) {\r\n        $el.attr('data-sticky','middle');\r\n\r\n        if(isMobile){\r\n          $elParent.css({'paddingTop':elHeight});\r\n\r\n         mobileTitleOff();\r\n        }\r\n      }\r\n      else if (bottom) {\r\n        $el.attr('data-sticky','bottom');\r\n\r\n        if(isMobile){\r\n          $elParent.removeAttr('style');\r\n        }\r\n      }\r\n    }\r\n\r\n    function activateLink() {\r\n      // do we have more than one anchor\r\n      if(numAnchors < 2 || linkScrolling) {\r\n        return;\r\n      }\r\n\r\n      // get the current scroll position and trigger change when new link is 10% down the page\r\n      let windowTop = $(window).scrollTop() + (window.innerHeight/9),\r\n          currentAnchor = activeAnchorIndex;\r\n         \r\n\r\n      // is there a prev target\r\n      // and\r\n      // is the current scroll position above the current target\r\n      if(currentAnchor > 0 && windowTop < anchors[activeAnchorIndex].position) {\r\n        // make the prev link active\r\n        --activeAnchorIndex;\r\n      }\r\n\r\n      // is there a next target\r\n      // and\r\n      // is the current scroll position below the next target\r\n      else if(currentAnchor < numAnchors-1 && windowTop > anchors[activeAnchorIndex+1].position) {\r\n        // make the next link active\r\n        ++activeAnchorIndex;\r\n      }\r\n\r\n      if (currentAnchor !== activeAnchorIndex) {\r\n        // move the active flag\r\n        $el.find('.' + activeClass).removeClass(activeClass);\r\n        $links.eq(activeAnchorIndex).addClass(activeClass);\r\n      }\r\n    }\r\n\r\n    function mobileTitleOn() {\r\n      if($titleLink.length) {\r\n        $titleLink.addClass(activeClass);\r\n        $links.removeClass(activeClass);\r\n      }\r\n    }\r\n    \r\n    function mobileTitleOff() {\r\n      if($titleLink.length) {\r\n        $titleLink.removeClass(activeClass);\r\n        $links.first().addClass(activeClass);\r\n      }\r\n    }\r\n  });\r\n})(window,document,jQuery);\r\n","export default (function (window, document) {\n\n  const tocs = Array.from(document.getElementsByClassName(\"ma__sticky-toc\"));\n  tocs.forEach((toc) => {\n    // The container for the links in the table of contents.\n    const tocContent = toc.querySelector(\".ma__sticky-toc__links\");\n    // The parent that should be checked for sections.\n    const tocParent = toc.closest(toc.dataset.parent);\n    let tocSections = {\n      headings: tocParent.querySelectorAll(toc.dataset.sections + \":not(.ma__sticky-toc__title)\"),\n      links: []\n    };\n\n    let tocSectionCount = tocSections.headings.length;\n    var additionalCount = 0;\n    var i;\n    var totalSections = tocSectionCount;\n\n    // Remove Related and Contact sections from total amount of sections.\n    for (i = 0; i < tocSectionCount; i++) {\n      if (tocSections.headings[i].innerText.toLowerCase() == \"related\" || tocSections.headings[i].innerText.toLowerCase() == \"contact\") {\n        totalSections--;\n      }\n    };\n    tocSectionCount = totalSections;\n    // Another wrapper around the links, probably originally to put the links in two columns.\n    const tocColumn = toc.querySelector(\".ma__sticky-toc__column\");\n    // Container in the sticky header to hold the current sections header.\n    const stickyToc = toc.querySelector(\".ma__sticky-toc__current-section\");\n    // The minimum number of sections required on the page to display the table of contents.\n    const minSectionsToShow = toc.dataset[\"min-to-show\"] ? toc.dataset[\"min-to-show\"] : 2;\n    // The overlay div that shows when the stuck menu is shown.\n    const stuckOverlay = toc.querySelector(\".ma__sticky-toc__overlay\");\n    // The stuck header.\n    const stuckNav = toc.querySelector(\".ma__sticky-toc__stuck\");\n    // The menu that slides out after the sticky menu is clicked.\n    let stuckMenu;\n    let pauseScroll = false;\n\n    // Initialize the TOC by creating links and target spans.\n    function initializeToc() {\n      // Add a class to the parent to help with consistent handling across applications.\n      tocParent.classList.add(\"toc-parent\");\n      // Use headers to fill TOC.\n      Array.from(tocSections.headings).forEach((section) => {\n        let sectionId = section.id;\n        const sectionTitle = section.innerHTML;\n        // If the section doesn't have an ID, create one from the heading text.\n        if (!sectionId) {\n          sectionId = section.textContent.replace(/\\s+/g, \"-\").toLowerCase();\n        }\n        // Create a link for the sticky TOC.\n        const tocLink = document.createElement(\"div\");\n        tocLink.className = \"ma__sticky-toc__link\";\n        tocLink.innerHTML = `<a href=\"#${sectionId}\"><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" aria-hidden=\\\"true\\\" width=\\\"35\\\" height=\\\"35\\\" viewBox=\\\"0 0 35 35\\\"><path class=\\\"st0\\\" d=\\\"M17.5 35C7.8 35 0 27.2 0 17.5 0 7.8 7.8 0 17.5 0 27.2 0 35 7.8 35 17.5 35 27.2 27.2 35 17.5 35zM16 9l-3 2.9 5.1 5.1L13 22.1l3 2.9 8-8L16 9z\\\"/></svg>${sectionTitle}</a>`;\n        tocColumn.appendChild(tocLink);\n        tocSections.links.push(tocLink);\n\n        // To scroll all the way to the heading would make the heading covered by the sticky header.\n        // Instead, add a span that will be invisible, but be placed above each heading as the scroll target.\n        const dest = document.createElement(\"span\");\n        dest.className = \"sticky-toc-jump-target\";\n        dest.id = sectionId;\n\n        section.id = \"\";\n        section.parentElement.insertBefore(dest, section);\n      });\n    }\n\n    // Set the various visibility rules.\n    function handleResize() {\n      tocSectionCount = 0;\n      additionalCount = 0;\n      Array.from(tocSections.headings).forEach((heading, index) => {\n        // If the section isn't visible, set the link not to display.\n        const isVisible = heading.offsetHeight * heading.offsetWidth;\n        if (isVisible) {\n          tocSections.links[index].style.display = \"\";\n          // If the section is the related or contact sections we don't want to count those.\n          if ((heading.innerText.toLowerCase() != 'related') && (heading.innerText.toLowerCase() != 'contact')) {\n            tocSectionCount++;\n          }\n          else if (heading.innerText.toLowerCase() == 'contact') {\n            additionalCount++;\n          }\n        }\n        else {\n          tocSections.links[index].style.display = \"none\";\n        }\n      });\n\n      // Get the final count of sections we'll use to determine if we display.\n      if ((tocSectionCount >= 1) && (additionalCount >= 1)) {\n        tocSectionCount = tocSectionCount + additionalCount;\n      }\n\n      // Remove wrapper if not enough links.\n      if (tocSectionCount < minSectionsToShow) {\n        toc.style.display = \"none\";\n      }\n      else {\n        // To set an overflow rule for jumpy IE wrapping\n        document.documentElement.classList.add(\"stickyTOC\");\n        toc.style.display = \"block\";\n      }\n\n      // Show expander when more than 10 links.\n      if (tocSectionCount <= 9 && window.innerWidth > 480 ) {\n        toc.querySelector(\".ma__sticky-toc__footer\").style.display = \"none\";\n      }\n    }\n\n    // Add the event listeners to handle all of the interaction.\n    function setEventListeners() {\n      // Update the sticky header text when a link is clicked, even if another header is visible.\n      tocParent.addEventListener(\"click\", (e) => {\n        if (e.target.matches(\".ma__sticky-toc__link a\").textContent) {\n          pauseScroll = true;\n          setTimeout(() => { pauseScroll = false; }, 20);\n          stickyToc.innerHTML = e.target.innerHTML;\n          toc.classList.add(\"stuck\");\n        }\n      }, true);\n\n      // Toggle mobile TOC open.\n      toc.querySelector(\".ma__sticky-toc__toggle-link\").addEventListener(\"click\", () => {\n        tocContent.classList.toggle(\"is-open\");\n        // Update aria-expanded.\n        const tocButton  = document.querySelector(\".ma__sticky-toc__toggle-link\");\n        let expanderState = tocButton.getAttribute('aria-expanded') === 'true' ? (tocButton.setAttribute('aria-expanded', 'false')) : (tocButton.setAttribute('aria-expanded', 'true'));\n        // Button label for screen reader.\n        const popupLabel = tocButton.querySelector(\".js-sticky-toc__state\");\n        let popupLabelContent = popupLabel.innerHTML === \"Show\" ? popupLabel.innerHTML = \"Hide\" : popupLabel.innerHTML= \"Show\";\n      });\n\n      // Expander for additional links to show.\n      toc.querySelector(\".ma__sticky-toc__footer button\").addEventListener(\"click\", function() {\n        // Toggle hidden links open.\n        tocContent.classList.toggle(\"open\");\n        this.classList.toggle(\"open\");\n\n        // Toggle button text.\n        this.textContent = (this.textContent === \"show less\" ? \"show more\" : \"show less\");\n      });\n\n      // Handle window resize events.\n      window.addEventListener(\"resize\", () => {\n        // Reset menu for each form factor on resize.\n        const button = toc.querySelector(\".ma__sticky-toc__footer button\");\n        tocContent.classList.remove(\"open\");\n        button.classList.remove(\"open\");\n        button.textContent = \"show more\";\n        // Reset visibility.\n        handleResize();\n      });\n\n      // Handler for showing or hiding the sticky TOC.\n      window.addEventListener(\"scroll\", () => {\n        if (!pauseScroll) {\n          const windowTop = window.pageYOffset;\n          const windowBottom = window.innerHeight;\n          const docHeight = document.documentElement.scrollHeight;\n          const stickyNavDemensions = toc.getBoundingClientRect();\n          const stickyNavActive  = stickyNavDemensions.top + stickyNavDemensions.height;\n          const stuckNavDemensions = stuckNav.getBoundingClientRect();\n          const stuckNavBottom = stuckNavDemensions.top + stuckNavDemensions.height;\n          // The text of the last heading.\n          const lastHeading = tocSections.headings[tocSectionCount - 1].innerHTML;\n\n          // Active Sticky TOC when on page TOC scrolls past.\n          if (stickyNavActive > 0) {\n            toc.classList.remove(\"stuck\");\n          }\n          else {\n            toc.classList.add(\"stuck\");\n\n            // Force showing the last heading if we are at the bottom of the page.\n            if (windowTop + windowBottom === docHeight) {\n              stickyToc.innerHTML = lastHeading;\n            }\n            else {\n              // Identify the section to show for the heading.\n              const active = Array.from(tocSections.headings).reverse().find((section) => {\n                const top = section.getBoundingClientRect().top;\n                return top <= stuckNavBottom;\n              });\n              if (active) {\n                stickyToc.innerHTML = active.innerHTML;\n              }\n            }\n          }\n        }\n      });\n\n      // Back to top button in the sticky header.\n      toc.querySelector(\".stickyTOC-top\").addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        window.scroll({top: 0, left: 0, behavior: \"smooth\"});\n        tocParent.focus();\n      });\n\n      // Add and/or open the sticky table of contents when the button is clicked.\n      toc.querySelector(\".stickyTOC-open\").addEventListener(\"click\", () => {\n        // Append sticky menu when first called\n        if (typeof stuckMenu === \"undefined\") {\n          const menuCopy = tocColumn.cloneNode(true);\n          menuCopy.classList.add(\"ma__sticky-toc__stuck-menu\");\n          stuckMenu = tocParent.appendChild(menuCopy);\n\n          // Move focus from the button.stickyTOC-open to the flyout toc\n          focusSwitch();\n\n          // When the last item in the TOC flyout is tabbed, focus is set on the first focusable element in the flyout container.\n          stuckMenu.lastChild.getElementsByTagName(\"a\")[0].addEventListener(\"keyup\", (e) => {\n            stuckMenu.querySelector(\".secondary-label-close\").focus();\n          });\n\n          // Close button.\n          stuckMenu.querySelector(\".secondary-label-close\").addEventListener(\"click\", () => {\n            menuToggle();\n            // Move the focus to the Table of Contents button.\n            toc.querySelector(\".stickyTOC-open\").focus();\n            stuckMenu.setAttribute(\"tabindex\", \"-1\");\n          });\n\n          // Wait a beat so the slide in can work on first click.\n          setTimeout(() => {\n            menuToggle();\n          }, 100);\n        }\n        else {\n          menuToggle();\n          focusSwitch();\n        }\n      });\n\n      // Close sticky menu on click off or link click.\n      document.body.addEventListener(\"click\", (e) => {\n        if (!e.target.matches(\".ma__sticky-toc__stuck-menu\")\n          && (e.target.closest(\".ma__sticky-toc__stuck-menu\") === null\n          || e.target.matches(\".ma__sticky-toc__stuck-menu a\"))) {\n          if (typeof stuckMenu !== \"undefined\" && stuckMenu.matches(\".sticky-nav-open\")) {\n            menuToggle();\n          }\n        }\n      }, true);\n    }\n\n    // The toggle function to show hide the slide out menu.\n    function menuToggle() {\n      stuckMenu.classList.toggle(\"sticky-nav-open\");\n      stuckOverlay.style.display = stuckOverlay.style.display === \"block\" ? \"none\" : \"block\";\n    }\n\n    // Move focus from the button.stickyTOC-open to the flyout toc\n    function focusSwitch() {\n      stuckMenu.setAttribute(\"tabindex\", \"0\");\n      stuckMenu.focus();\n    }\n\n    initializeToc();\n    handleResize();\n    if (tocSectionCount > 0) {\n      setEventListeners();\n    }\n  });\n})(window, document);\n","export default (function (window, document, $, undefined) {\n\n    let $toggle, $root, $sections;\n    let hiddenClass = 'is-initially-hidden';\n\n    function bindVars () {\n        $root = $('.js-teaser-listing-group');\n        $toggle = $root.find('.js-teaser-listing-group-toggle');\n        $sections = $root.find('.ma__teaser-listing');\n    }\n\n    function markForAccordion () {\n        let totalShown = $root.data('totalVisible');\n        let teaserItems = $root.find('.ma__general-teaser');\n\n        // Hide the toggle if the number of items is less than or equal to the number shown.\n        if (teaserItems.length <= totalShown) {\n          $toggle.hide();\n        }\n\n        // set excess items to be hidden\n        teaserItems.slice(totalShown, teaserItems.length).each((i, el) => {\n            // Items can be siblings or within an <li>, add class to the <li> if present\n            if ($(el).parent().prop('tagName') === \"LI\") {\n                $(el).parent().addClass(hiddenClass);\n            } else {\n                $(el).addClass(hiddenClass);\n            }\n        });\n\n        $sections.each( (i, el) => {\n            let $section = $(el);\n            let totalTeaserItems = $section.find('.ma__general-teaser');\n            let hiddenItems = $section.find('.'+hiddenClass);\n            // If the total number of teasers and total number of hidden things are the same, hide the whole section.\n            if (totalTeaserItems.length === hiddenItems.length) {\n                $section.addClass(hiddenClass);\n            }\n        });\n\n\n    }\n\n    function handleToggle () {\n        $toggle.click(() => {\n            $root.toggleClass('is-open');\n        });\n    }\n\n\n\n    $(document).ready( () => {\n        bindVars();\n        markForAccordion();\n        handleToggle();\n    });\n\n})(window, document, jQuery);\n","export default (function (window,document,$,undefined) {\n\n  $('.ma__featured-item .ma__featured-item__title span').each(function() {\n    const $this = $(this);\n    const $thisParent = $this.parent();\n    const $thisWrapper = $thisParent.closest('.ma__featured-item');\n    let thisTitle = $this.text();\n\n    // Links are truncated to 60 characters\n    // The wrappers only accommodate 50 with ellipses and the icon\n    if (thisTitle.length > 50) {\n      // Add a class for styling.\n      $thisParent.addClass('truncated');\n      // Add the full title to the aria label to keep value\n      $thisWrapper.attr('aria-label', thisTitle);\n\n      // Truncate title at last full word before 50th character\n      var truncatedTitle = thisTitle.substring(0, 50);\n      truncatedTitle = truncatedTitle.substr(0, Math.min(truncatedTitle.length, truncatedTitle.lastIndexOf(\" \")));\n      thisTitle = truncatedTitle;\n    }\n    $this.text(thisTitle);\n  });\n\n})(window,document,jQuery);\n","export default (function (window, document, $, undefined) {\r\n  const $menuButton = $('.js-header-menu-button');\r\n  let $panels = $('.js-utility-nav--wide .js-util-nav-content');\r\n  const $mobileLogins = $('.js-utility-nav--narrow .js-util-nav-content');\r\n  let $utilityButtons = $('.js-utility-nav--wide .js-util-nav-toggle');\r\n  const $mobileUtilityNav = $('.js-utility-nav--narrow');\r\n  const $mobileLanguageSelect = $mobileUtilityNav.find('.ma__utility-nav__item').first();\r\n  const $stateOrgs = $mobileUtilityNav.find('#stateOrgs');\r\n  const $logInto = $mobileUtilityNav.find('#logInTo');\r\n\r\n  $mobileLanguageSelect.remove();\r\n  $stateOrgs.find('.js-util-nav-content').remove();\r\n\r\n  $stateOrgs.on('click', function() {\r\n    window.location.pathname = 'state-a-to-z';\r\n  });\r\n\r\n  $logInto.on('click', function() {\r\n    $(this).toggleClass('submenu-open');\r\n    $mobileLogins.toggleClass('is-closed');\r\n  });\r\n\r\n  function closeMenu() {\r\n    $('body').removeClass('show-menu');\r\n    $('.menu-overlay').removeClass('overlay-open');\r\n    $('.ma__header__menu-text').text('Menu');\r\n    $menuButton.attr('aria-pressed', 'false');\r\n    $menuButton.attr('aria-label', 'Open the main menu for mass.gov');\r\n    $('.feedback-button').removeClass('hide-button');\r\n  }\r\n\r\n  $logInto.find('button').on('keydown', function (e) {\r\n    if (!$(this).parent().hasClass('submenu-open')) {\r\n      if (e.key == \"Tab\") {\r\n        closeMenu();\r\n      }\r\n    }\r\n  });\r\n\r\n  $('#ma__site-logo-link').on('focus', function() {\r\n    closeMenu();\r\n    \r\n    $('.js-util-nav-content').each(function() {\r\n        $(this).css('top', '-' + $(this).height() + 'px');\r\n        $(this).toggleClass('is-closed');\r\n        $(this).attr(\"aria-hidden\", \"true\");\r\n    });\r\n  });\r\n\r\n  $panels.each(function () {\r\n    const $panel = $(this);\r\n    const height = $panel.height();\r\n    const $closeButton = $panel.find('.js-close-util-nav');\r\n    const $loopStart = $panel.find('a:first');\r\n\r\n    $panel.css('top', '-' + height + 'px');\r\n\r\n    $(window).on('resized', function () {\r\n      if ($(window).width() > 840) {\r\n        $panel.css('top', '-' + height + 'px');\r\n      }\r\n      else {\r\n        $panel.removeAttr('style')\r\n      }\r\n    });\r\n\r\n    $closeButton.on('click', function () {\r\n      $panel.css('top', '-' + height + 'px');\r\n      $panel.toggleClass('is-closed');  \r\n      $panel.attr(\"aria-hidden\", \"true\");\r\n\r\n    });\r\n\r\n    $closeButton.on('keydown', function(e) {\r\n      if (e.key == \"Tab\") {\r\n        $loopStart.focus();\r\n        e.preventDefault();\r\n      }\r\n    });\r\n\r\n    $panel.on('keydown', function (e) {\r\n      console.log(e.code);\r\n      if (e.code == 'Escape' || e.which == '27') {\r\n        console.log('esc');\r\n        $panel.css('top', '-' + height + 'px');\r\n        $panel.toggleClass('is-closed');\r\n        $panel.attr(\"aria-hidden\", \"true\");\r\n      }\r\n    });\r\n  });\r\n\r\n  $utilityButtons.each(function () {\r\n    const $thisButton = $(this);\r\n    const $thisPanel = $thisButton.next('.js-util-nav-content');\r\n\r\n    $thisButton.on('click', function () {\r\n      $thisPanel.removeClass('is-closed');\r\n      $thisPanel.removeAttr('style');\r\n      $thisPanel.attr(\"aria-hidden\", \"false\");\r\n\r\n      $('body').addClass('show-submenu');\r\n\r\n    });\r\n\r\n    $thisButton.on('focus', function() {\r\n      $('.js-util-nav-content').each(function() {\r\n        $(this).css('top', '-' + $(this).height() + 'px');\r\n        $(this).toggleClass('is-closed');\r\n        $(this).attr(\"aria-hidden\", \"true\");\r\n      });\r\n    });\r\n  });\r\n\r\n  $('.js-close-sub-nav').on('click', function () {\r\n    $('.js-util-nav-content').addClass('is-closed');\r\n    $('.js-util-nav-content').removeAttr('style');\r\n    $('body').removeClass('show-submenu');\r\n  });\r\n\r\n  // debouncer\r\n  var resize_timeout;\r\n  $(window).on('resize orientationchange', function () {\r\n    clearTimeout(resize_timeout);\r\n\r\n    resize_timeout = setTimeout(function () {\r\n      $(window).trigger('resized');\r\n    }, 150);\r\n  });\r\n})(window, document, jQuery);\r\n"]}