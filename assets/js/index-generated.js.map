{"version":3,"sources":["node_modules/browser-pack/_prelude.js","source/assets/js/helpers/cookies.js","source/assets/js/helpers/cssControlCode.js","source/assets/js/helpers/getElementOuterHtml.js","source/assets/js/helpers/getHandlebarTemplate.js","source/assets/js/helpers/jQueryExtend.js","source/assets/js/helpers/jQueryExtend_ajaxPattern.js","source/assets/js/helpers/listing.js","source/assets/js/helpers/slugify.js","source/assets/js/helpers/sticky.js","source/assets/js/helpers/throttle.js","source/assets/js/helpers/twiggy.js","source/assets/js/index.js","source/assets/js/modules/accordions.js","source/assets/js/modules/ajaxPattern.js","source/assets/js/modules/ajaxPatternOverride.js","source/assets/js/modules/back2top.js","source/assets/js/modules/clickable.js","source/assets/js/modules/dropdown.js","source/assets/js/modules/emergencyAlerts.js","source/assets/js/modules/eventFilters.js","source/assets/js/modules/eventListingInteractive.js","source/assets/js/modules/footnote.js","source/assets/js/modules/formInputs.js","source/assets/js/modules/formValidation.js","source/assets/js/modules/googleMap.js","source/assets/js/modules/headerTags.js","source/assets/js/modules/hideAlert.js","source/assets/js/modules/imageFill.js","source/assets/js/modules/inlineOverlay.js","source/assets/js/modules/keywordSearch.js","source/assets/js/modules/linkListToggle.js","source/assets/js/modules/locationFilters.js","source/assets/js/modules/locationListing.js","source/assets/js/modules/mainNav.js","source/assets/js/modules/mobileNav.js","source/assets/js/modules/orgSelector.js","source/assets/js/modules/organizationNavigation.js","source/assets/js/modules/pagination.js","source/assets/js/modules/pikaday.js","source/assets/js/modules/responsiveTable.js","source/assets/js/modules/responsiveVideo.js","source/assets/js/modules/resultsHeading.js","source/assets/js/modules/richText.js","source/assets/js/modules/scrollAnchors.js","source/assets/js/modules/stickyTOC.js","source/assets/js/modules/teaserListingGroup.js","source/assets/js/modules/truncateTitle.js","source/assets/js/modules/utilNav.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","document","window","setCookie","name","value","expires","d","Date","setTime","getTime","toUTCString","cookie","getCookie","parts","split","pop","shift","$el","getComputedStyle","getPropertyValue","replace","err","el","outerHTML","container","createElement","appendChild","cloneNode","innerHTML","undefined","Handlebars","templates","jQuery","ajax","url","ma","themePath","success","data","compile","async","$","extend","expr","focusable","index","selector","is","ajaxCache","ajaxPattern","_twiggy","element","options","endpoint","pattern","renderPattern","patternTransform","transform","self","this","$element","updatePattern","getPatternData","then","patternData","isEmptyObject","console","error","fail","_twiggy2","default","template","renderAsync","markup","html","trigger","getPatternPath","pathParts","namespace","patternPath","join","patternPaths","type","cache","dataType","jqXHR","textStatus","errorThrown","fn","MassAjaxPattern","each","defaults","moment","transformTag","tag","label","svg","id","_getElementOuterHtml2","find","siblings","hasFilter","filters","some","filter","hasOwnProperty","getFilterValues","map","transformActiveTagsData","args","filterData","clearedFilter","resultsHeading","tags","getActiveFilters","formData","paginateItems","items","max","page","pageTotal","item","isActive","totalPages","clearListingPage","listing","parent","makeAllActive","filterDataByTags","haystack","every","v","Boolean","Object","keys","indexOf","filterDataByDateTags","filterStart","filterEnd","start","end","isSameOrAfter","isSameOrBefore","isSame","paginated","maxItems","renderListingPage","warn","selectors","forEach","append","focus","row","first","eq","_sticky2","init","transformPaginationData","targetPage","pages","push","text","toString","active","pagination","prev","disabled","next","currentPage","transformResultsHeading","totalActive","firstItem","Number","lastItem","totalResults","numResults","filterListingData","sortDataAlphabetically","sort","b","nameA","title","toUpperCase","nameB","sortDataByDate","dateType","dateA","dateB","isBefore","isAfter","geocodeAddressString","address","callback","geocoder","geocode","results","status","google","maps","GeocoderStatus","OK","place","geocodePlaceId","place_id","placeId","calculateDistance","lat1","lon1","lat2","lon2","unit","radlat1","Math","PI","radlat2","theta","radtheta","dist","sin","cos","acos","transformListing","compiledTemplate","_getHandlebarTemplate2","listingMarkup","itemData","val","tagsData","tagsFormatted","assign","itemTransform","makeMoment","startTimestamp","endTimestamp","toLowerCase","_cssControlCode","$elParent","elWidth","lowerLimit","upperLimit","runCode","updateData","newRunCode","_cssControlCode2","removeAttr","height","width","offset","top","outerHeight","setPosition","attr","windowTop","scrollTop","middle","bottom","css","offsetParent","setTimeout","resize","scroll","threshhold","scope","last","deferTimer","context","now","arguments","clearTimeout","apply","Twig","extendFunction","twig","href","iconPath","render","patternName","Promise","resolve","reject","allowInlineIncludes","namespaces","base","atoms","molecules","organisms","meta","load","$link","$content","$status","open","hasClass","stop","slideDown","on","preventDefault","slideUp","toggleClass","temp","removeClass","$context","ajaxData","emergencyAlerts","alerts","these","are","animate","addClass","click","event","dest","location","dropdownMenu","querySelectorAll","_loop","parentEl","selectEl","querySelector","link","onchange","elem","selectedIndex","srcElement","innerText","_cookies","cookieName","cookieValue","_cookies2","$button","$locationFilterParent","$locationFilter","locationInput","getElementById","swLat","swLng","neLat","neLng","bounds","LatLngBounds","LatLng","strictBounds","types","componentRestrictions","country","placeIdOnly","autocomplete","places","Autocomplete","$form","$place","$dateStart","$dateEnd","$tags","prop","submit","$location","dateRange","startDate","endDate","useToday","format","getFormData","_listing","transformData","transformation","promise","Deferred","transformReturn","filteredData","_listing2","sortedData","autocompletePlace","getPlace","Geocoder","result","sortDataAroundPlace","lat","geometry","lng","key","distance","position","$resultsHeading","$pagination","$eventFilter","rawData","eventListingInteractive","masterData","handlePagination","target","nextPage","parseInt","updateChildComponents","listArray","eventListing","events","masterListing","masterListingMarkup","date","endDay","ceil","populateMasterDataSource","formValues","done","defaultPage","params","URLSearchParams","search","history","state","get","$messageLink","clone","$rtelink","isMobile","getPosition","$target","pos","headerHeight","navHeight","scrollTo","maxlength","remaining","message","wrap","inArray","keyCode","ctrlKey","metaKey","shiftKey","$plus","$minus","trim","validate","valid","match","requiredFields","$errorList","$field","submitForm","_getHandlebarTemplate","googleMapData","mapsInitialized","checkForGoogleMaps","setInterval","clearInterval","stopChecking","markers","initializedMarkers","mapData","scrollwheel","Map","potentialHTML","infoData","markerData","infoWindow","marker","Marker","phoneFormatted","formatPhone","phone","faxFormatted","fax","InfoWindow","content","markerBouncing","addListener","hideInfo","showInfo","close","bounce","setAnimation","Animation","BOUNCE","addMarkersToMap","addListenerOnce","$mapItems","role","tabindex","aria-label","bind","ev","which","markerIndex","_i","_i2","setMap","removeMarkersFromMap","dataMarkers","setZoom","updateMapByMarkers","substring","fitBounds","$showHideButton","$dynamicItems","show","hide","$tagWrapper","$buttonCounter","$hiddenTag","tagCount","$tagState","toggle","$tagStateText","windowWidth","fadeIn","fadeOut","sidebarHeight","debounceTimer","mediaWidth","wrapperWidth","$thisMedia","thisPosition","containerClass","toggleOverlay","$containerEl","closest","isOpen","parents","floor","random","initialize","keydown","$thisList","$thisToggle","$thisToggleLabel","$listItem","children","listItems","showToggle","thisToggleText","$item","populateFormData","isFormSubmit","getParameterFromUrl","pageNum","set","delete","tagFilters","pushState","origin","pathname","pushFilterState","param","$resultHeading","clearDeactivatedFilter","activeClass","markerActiveClass","activeLocationListingRow","markerActiveLocationListingRow","getActiveMarkers","spherical","computeDistanceBetween","$mapCol","$map","locationListing","promosArray","imagePromos","getPage","stopImmediatePropagation","currentTarget","resetValues","innerWidth","openClass","closeClass","submenuClass","$parent","$mainNavToggle","$mainNavItems","breakpoint","delay","$topLevelLinks","$openContent","$focusedElement","activeElement","menuFlipped","$topLevelItem","$topLevelLink","$dropdownLinks","dropdownLinksLength","focusIndexInDropdown","keycode","action","skip","left","right","up","down","linkCount","menuButton","addEventListener","classList","searchForm","orgSelector","$select","$placeholder","renderTemplate","organizations","change","$orgNav","$orgNavItems","$menuWrapper","$pageWrapper","$newsLink","$eventsLink","$locationsLink","$relatedOrgs","feedbackButton","$mobileToggle","$orgNavSearchForm","$orgNavSearchInput","$searchToggle","$menuButton","$sectionButton","bannerBottom","menuHeight","orgWindowTop","add","remove","$buttonLabel","searchAction","searchParams","$buttonParent","$thisMenu","$buttonClone","prependTo","$seeAll","appendTo","$contactGroups","slice","wrapAll","not","unwrap","targetPageNumber","has","pushPaginationState","onpopstate","truncatedPagination","current","delta","range","rangeWithEllipsis","l","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","return","truncatePaginationDisplay","renderPagination","replaceState","restrict","picker","Pikaday","field","setMaxDate","setMinDate","_throttle","$scrollContainer","$window","responsiveTables","initializeTable","reset","$table","$thead","hasThead","theadHeight","offsetHeight","isNestedThead","hasTh","$stickyHeader","canScroll","after","tableLeft","getBoundingClientRect","x","additionalOffset","documentElement","clientWidth","$jsStickyHeader","getAdditionalOffset","opacity","scrollLeft","margin","rt","$root","headerStuck","scrollStuck","handleTableScroll","checkVisibility","tableWrapper","getElementsByClassName","scrollWidth","offsetWidth","elementTop","windowBottom","elementBottom","stuckTop","containerWidth","tableWidth","mobileLoad","buttonWidth","$scrollbar","$scrollbarIndicator","scrollbarHeight","clientHeight","recalcScrollbar","handleScrollerClick","posX","midpoint","clickpoint","pageX","abs","handleScrollerInteraction","initialPosition","y","pageY","handleMouseMove","newPosition","handleMouseUp","off","_this","scrollAmount","scrollInverse","scrollable","className","currentScrollLeft","stopPropagation","fitVids","_slugify","richTextIndex","$this","$tableNav","prepend","heading","nextUntil","_slugify2","before","$titleLink","$links","elHeight","headerBuffer","activeAnchorIndex","anchors","numAnchors","linkScrolling","setVariables","topOffset","hasAttribute","mobileTitleOn","mobileTitleOff","Array","hash","paddingTop","activateLink","innerHeight","currentAnchor","$toc","$tocContent","$tocSections","lastHeading","tocSectionCount","$tocColumn","$tocToggle","$tocFooter","$stickyToc","minSectionsToShow","menuToggle","$section","sectionId","sectionTitle","$tocLink","$buttonText","docHeight","stickyNavActive","section","log","$toggle","$sections","hiddenClass","ready","totalShown","teaserItems","totalTeaserItems","hiddenItems","$thisParent","$thisWrapper","thisTitle","truncatedTitle","substr","min","lastIndexOf","waitForIt","preventdefault"],"mappings":"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","file":"index-generated.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","export default (function(window, document, undefined){\r\n  \"use strict\";\r\n\r\n  function setCookie(name, value, expires) {\r\n    if(typeof(expires) === 'number') {\r\n      var d = new Date();\r\n      d.setTime(d.getTime() + (expires*24*60*60*1000));\r\n      var expires = \"expires=\"+d.toUTCString();\r\n      document.cookie = name + \"=\" + value + \"; \" + expires + \"; path=/\";\r\n    } else {\r\n      document.cookie = name + \"=\" + value + \"; path=/\";\r\n    }\r\n\r\n  }\r\n\r\n  function getCookie(name) {\r\n    var value = \"; \" + document.cookie;\r\n    var parts = value.split(\"; \" + name + \"=\");\r\n    if (parts.length == 2) return parts.pop().split(\";\").shift();\r\n  }\r\n\r\n  return {\r\n    setCookie,\r\n    getCookie\r\n  };\r\n\r\n})(window, document);\r\n\r\n","// check the value of the css :before psuedo element\r\n// values look for \"true\" or \"false\"\r\n\r\nexport default ($el) => {\r\n  let value = \"true\";\r\n  try {\r\n    value = window.getComputedStyle($el[0], ':before').getPropertyValue('content').replace(/\\\"/g, '');\r\n  } catch(err) {}\r\n  return value === \"false\" ? false : true;\r\n};\r\n","/**\n  * Get outerHTML of elements, taking care\n  * of SVG elements in IE as well.\n  *\n  * @param {Element} DOM object\n  * @return {String}\n  */\n\nexport default function (el) {\n  if (el.outerHTML) {\n    return el.outerHTML\n  }\n  else {\n    let container = document.createElement('div');\n        container.appendChild(el.cloneNode(true));\n    return container.innerHTML;\n  }\n}\n","module.exports = function(name) {\r\n  if (Handlebars.templates === undefined || Handlebars.templates[name] === undefined) {\r\n      jQuery.ajax({\r\n          url : ma.themePath + '/js/templates/' + name + '.html',\r\n          success : function(data) {\r\n              if (Handlebars.templates === undefined) {\r\n                  Handlebars.templates = {};\r\n              }\r\n              Handlebars.templates[name] = Handlebars.compile(data);\r\n          },\r\n          async : false\r\n      });\r\n  }\r\n  return Handlebars.templates[name];\r\n};\r\n","export default (function (window,document,$,undefined) {\n  $.extend($.expr[':'], {\n    // jQuery find all focusable elements\n    // see: https://coderwall.com/p/jqsanw/jquery-find-every-focusable-elements\n    focusable: function(el, index, selector){\n      return $(el).is('a, button, :input, [tabindex]');\n    }\n  });\n})(window,document,jQuery);\n","import twiggy from './twiggy';\n\nexport default (function (window,document,$,undefined) {\n  'use strict';\n\n  // Plain old javascript object to hold cached alert data.\n  // This prevents duplicate calls to endpoints on pages that\n  // display alerts in both the header and the body.\n  let ajaxCache = {};\n\n  // Object-orientated approach to jQuery plugin building, so as to not\n  // pollute global namespace or a complicated switch based on passed params.\n  let ajaxPattern = function(element, options) {\n    let endpoint = options.endpoint;\n    const pattern = options.renderPattern;\n    let patternTransform = options.transform;\n    let self = this;\n    let $element = $(element);\n\n    /**\n     * Wrapper function to get and render data for a given pattern.\n     */\n    self.updatePattern = function() {\n      self.getPatternData()\n        .then(function (patternData) {\n          // If a custom transform function was passed in, invoke it.\n          if (patternTransform && typeof patternTransform === \"function\") {\n            patternData = patternTransform(patternData);\n          }\n\n          //@todo validate the data against a schema: https://github.com/tdegrunt/jsonschema\n\n          // Only attempt to render a pattern if there is data.\n          if ($.isEmptyObject(patternData)) {\n            return;\n          }\n          // Render the pattern with the data.\n          try {\n            self.renderPattern(pattern,patternData);\n          }\n          catch (e) {\n            console.error(e);\n          }\n        })\n        .fail(function () {\n          console.error('MA::AjaxPattern::Could not get data at endpoint:', endpoint);\n        });\n    };\n\n    /**\n     * Use TwigJS to render the pattern with its data from the twig template.\n     *\n     * @param pattern\n     *  A namespaced path to a twig template for the pattern we want to render (i.e. @atoms/decorative-link.twig)\n     * @param data\n     *  The data structure which the pattern expects in order to render.\n     */\n    self.renderPattern = function(pattern,data) {\n      return twiggy(pattern)\n          .then(template => template.renderAsync(data))\n          .then(markup => {\n            $element.html(markup)\n              $(document).trigger('ma:AjaxPattern:Render', [{'el': $element}]);\n          });\n    };\n\n    /**\n     * Returns the gettable path to a pattern based on its namespaced path.\n     *\n     * @param pattern\n     *   The namespaced path to a pattern (i.e. @atoms/decorative-link.twig)\n     *\n     * @returns {string}\n     *   The path to a pattern which can be used in a get request (i.e. /assets/patterns/atoms/decorative-link.twig )\n     */\n    self.getPatternPath = function(pattern) {\n      let pathParts = pattern.split(\"/\");\n      let namespace = pathParts.shift();\n      let patternPath = pathParts.join(\"/\");\n      // Set ma.patternPaths in your implementation's env.js file (see /source/_meta/_00-foot.twig)\n      return ma.patternPaths[namespace] + patternPath;\n    };\n\n    /**\n     * Asynchronous function which makes ajax request to passed in endpoint to get emergency alerts data.\n     *\n     * @returns {*}\n     *   A promise.\n     */\n    self.getPatternData = function() {\n      if (!endpoint) {\n        // throw an error\n        throw new Error('MA::AjaxPattern::An endpoint argument is required.');\n      }\n\n      // Check if we have a request already made or in-flight for this endpoint.\n      if (ajaxCache[endpoint]) {\n        return ajaxCache[endpoint];\n      }\n\n      // Make ajax request to endpoint (returns promise)\n      return ajaxCache[endpoint] = $.ajax({\n          type: 'GET',\n          url: endpoint,\n          cache: true,\n          dataType: 'json'\n      }).fail(function(jqXHR, textStatus, errorThrown) {\n          console.error('MA::AjaxPattern::Ajax Error: ', errorThrown);\n      });\n    };\n\n    self.updatePattern();\n    return true;\n  };\n\n\n  /**\n   * Create a custom Transform plugin.\n   */\n  $.fn.MassAjaxPattern = function(options) {\n\n    return this.each(function(i, el) {\n      let $element = $(el);\n      // Returns early if plugin is already there.\n      if ($element.data('mass-ajax-data')) {\n        return;\n      }\n      let data = new ajaxPattern(this, options);\n      $element.data('mass-ajax-data', data);\n    });\n\n  };\n\n  // Plugin defaults.\n  $.fn.MassAjaxPattern.defaults = {\n    endpoint: '',\n    pattern: '',\n    transform: undefined\n  };\n})(window,document,jQuery);\n","import getTemplate from \"../helpers/getHandlebarTemplate.js\";\nimport sticky from \"../helpers/sticky.js\";\nimport getOuterHtml from \"../helpers/getElementOuterHtml.js\";\n\nexport default (function(window, document, undefined, $, moment){\n  \"use strict\";\n\n  /**\n   * Common Helpers between event + location listings\n   */\n\n\n  /**\n   * Renders the new page of location listing image promos and broadcasts the rendered master data instance.\n   *\n   * @param args\n   *   Arguments object with the following structure:\n   *   {\n   *      page: (optional) the page to be rendered, defaults to 1\n   *      data: the instance of master data to render\n   *   }\n   */\n  function renderListingPage(args) {\n    if (args.data.hasOwnProperty('selectors')) {\n      clearListingPage(args.data.selectors.container, args.data.selectors.parent);\n      let $el = $(args.data.selectors.container).find(args.data.selectors.parent),\n          page = args.page ? args.page : 1;\n\n      args.data.items.forEach(function (item) {\n        if (item.isActive && item.page === page) {\n          $el.append(item.markup);\n        }\n      });\n\n      if (args.focus) {\n        // Focus on the first focusable element in the first listing\n        let $firstListing = $el.find(args.data.selectors.row).first();\n        // :focusable is possible with helpers/jQueryExtend.js\n        let $firstFocus = $firstListing.find(':focusable').eq(0);\n        $firstFocus.focus();\n      }\n\n      if (args.data.selectors.hasOwnProperty('map') && args.data.selectors.map) {\n        sticky.init($(args.data.selectors.map));\n      }\n    }\n    else {\n      console.warn(\"masterData.selectors must be set for this listing.\");\n      return false;\n    }\n  }\n\n\n  /**\n   * Returns the data structure necessary to render pagination component, reflecting current state.\n   *\n   * @param args\n   *   An object with the following structure:\n   *   {\n   *     data: [instance of filtered, sorted master data],\n   *     targetPage: (optional) the page which should be active\n   *   }\n   *\n   * @returns {*}\n   *   Data structure necessary to render pagination component\n   */\n  function transformPaginationData(args) {\n    let data = args.data;\n    let targetPage = args.targetPage ? args.targetPage : 1; // default to first page if none passed\n    let totalPages = data.totalPages;\n    let pages = [];\n\n    for (let i = 1; i <= totalPages; i++) {\n      pages.push({\n        text: i.toString(),\n        active: i === targetPage\n      });\n    }\n\n    data.pagination.prev = {\n      text: \"Previous\",\n      disabled: targetPage === 1\n    };\n\n    data.pagination.next = {\n      text: \"Next\",\n      disabled: targetPage === totalPages\n    };\n\n    data.pagination.pages = pages;\n    data.pagination.currentPage = targetPage;\n    data.pagination.totalPages = totalPages;\n\n    return data.pagination;\n  }\n\n  /**\n   * Updates the resultsHeading data structure to reflect the current component state.\n   *\n   * @param args\n   *    Arguments object with the following structure:\n   *    args: {\n   *      data: the current instance of master data,\n   *      page: (optional) the current page, defaults to 1\n   *    }\n   *\n   * @returns {resultsHeading|{numResults, totalResults}|*}\n   */\n  function transformResultsHeading(args) {\n    let pageTotal = 0,\n        totalActive = 0,\n        page = args.page ? args.page : 1,\n        data = args.data,\n        resultsHeading = data.resultsHeading; // preserve active resultsHeading.tags\n\n    // Tally the total active and page length.\n    data.items.map(function(item){\n      if (item.isActive) {\n        totalActive += 1;\n        if (item.page === page) {\n          pageTotal += 1;\n        }\n      }\n    });\n\n    // Get the index (from 1) of the first and last items on this page.\n    let firstItem = (Number(data.maxItems) * Number(page)) - (Number(data.maxItems) - 1),\n        lastItem = firstItem + (Number(pageTotal) - 1);\n\n    resultsHeading.totalResults = totalActive;\n    resultsHeading.numResults = firstItem + \" - \" + lastItem; // @todo add accessibility consideration here\n\n    return resultsHeading;\n  }\n\n  /**\n   * Creates an array with generated markup for location listing items, preserving original index.\n   *\n   * @param listing\n   *  The array of items\n   * @param template\n   *  The string name of the template\n   *\n   * @returns {Array}\n   *  An array of compiled markup\n   */\n  function transformListing(listing, template) {\n    // Get template for location listing (organisms > imagePromo)\n    let compiledTemplate = getTemplate(template);\n    let listingMarkup = [];\n    listing.forEach(function (data, index) {\n      let itemData = itemTransform(data);\n      listingMarkup[index] = compiledTemplate(itemData);\n    });\n    return listingMarkup;\n  }\n\n\n  /**\n   * Returns transformed item data object.\n   *\n   * @param item\n   *   The item.item[]{} being transformed.\n   *\n   * @returns {*}\n   *   The original item object with a formatted tag property.\n   */\n  function itemTransform(item) {\n    // Ensure tags are an array.\n    let tags = [];\n\n    $.map(item.tags, function(val, index) {\n      tags[index] = val;\n    });\n\n    item.tags = tags;\n\n    let tagsData = {\n      tagsFormatted: item.tags.map(transformTag)\n    };\n    return Object.assign({}, item, tagsData);\n  }\n\n  /**\n   * Returns a formatted item.tag object with a label and svg icon markup.\n   *\n   * @param tag\n   *   The tag being transformed.\n   *\n   * @returns {{label, svg: boolean}}\n   */\n  function transformTag(tag) {\n    return {\n      label: tag.label,\n      svg: getSvgFromTag(tag.id)\n    };\n  }\n\n  /**\n   * Returns the svg element markup from the corresponding tag filter checkbox label icon\n   *\n   * @param tag\n   *  The imagePromo tag.id whose icon we need\n   *\n   * @return string\n   *  The svg element for the matching filter form tag input.\n   */\n  function getSvgFromTag(tag) {\n    // Get the existing corresponding icon markup so we don't have to worry about outdated markup.\n    // return $('.js-filter-by-tags').find(\"#\" + tag).parent().siblings('svg').prop('outerHTML');\n    // Get outerHtml of svgElement shim for IE\n    // See: https://stackoverflow.com/questions/12592417/outerhtml-of-an-svg-element\n    return getOuterHtml($('.js-filter-by-tags').find(\"#\" + tag).siblings('svg')[0]);\n  }\n\n  /**\n   * Returns true if the passed filters array includes an item with the passed type.\n   *\n   * @param filters\n   *   Array of filters.\n   * @param type\n   *   The type of filter to search for.\n   *\n   * @returns {*|boolean}\n   */\n  function hasFilter(filters, type) {\n    return filters.some(function (filter) {\n      return filter.hasOwnProperty('type') && filter['type'] === type;\n    });\n  }\n\n  /**\n   * Returns the value(s) of the passed filters of the passed type.\n   *\n   * @param filters\n   *   Array of filters from which to abstract values.\n   * @param type\n   *   The type of filter to search for.\n   *\n   * @return array\n   *   An array of filter values of type.\n   */\n  function getFilterValues(filters, type) {\n    return filters.filter(function(data) {\n      return data.type === type;\n    }).map(function(data) {\n      return data.value;\n    })\n  }\n\n  /**\n   * Creates the active filter object based on either cleared or submitted filter data.\n   *\n   * @param args\n   *   An object with the following structure:\n   *   data {\n   *    [masterData current instance]\n   *   },\n   *   filterData: {\n   *     clearedFilter: (optional cleared filter data)\n   *     {\n   *       type: '[filter type]: location || tag',\n   *       text: '[filter text or label]',\n   *       value: '[filter value]'\n   *     }, || 'all' (if clear all button was pressed)\n   *     {\n   *       formData: (optional submitted form filter data)\n   *       [\n   *         {\n   *           type: '[filter type] location || tag',\n   *           text: '[filter label]',\n   *           value: '[filter value]'\n   *         }, ...\n   *       ]\n   *     }\n   *   }\n   *\n   * @returns {*}\n   */\n  function transformActiveTagsData(args) {\n    if (args.filterData.hasOwnProperty('clearedFilter')) {\n      return getActiveFilters(args.data, args.filterData); // This was an active tag interaction, get remaining filters.\n    }\n    else {\n      return args.filterData.formData; // This was a form submission, so just return the applied form data.\n    }\n  }\n\n  /**\n   * Returns an array of the currently active filters, based on passed filterData.\n   *\n   * @param data\n   *   The current instance of master data structure.\n   *\n   * @param filterData\n   *  An object representing the cleared filter:\n   *  {\n   *    clearedFilter: {\n   *       type: '[filter type]: location || tag',\n   *       text: '[filter text or label]',\n   *       value: '[filter value]'\n   *     } || 'all' (if clear all button was pressed)\n   *  }\n   *\n   * @returns {Array}\n   *   An array of the currently active filters:\n   *   [  {\n   *        type:\n   *        text:\n   *        value:\n   *      }, ... ]\n   */\n  function getActiveFilters(data, filterData) {\n    // Single filter button clicked, so remove that filter from the list.\n    if (filterData.clearedFilter !== \"all\") {\n      let filters = data.resultsHeading.tags;\n      // Remove the clicked tag from the tags array.\n      return filters.filter(function (tag) {\n        return tag.value !== filterData.clearedFilter.value;\n      });\n    }\n    else {\n      // Clear all button was clicked so remove all filters.\n      return [];\n    }\n  }\n\n\n  /**\n   * Assigns page values to masterData items, based on the provided max number.\n   *\n   * @param items\n   *   The master data items.\n   *\n   * @param max\n   *   The max number of items to show per page.\n   *\n   * @returns\n   *   The updated master data items.\n   */\n  function paginateItems(items, max) {\n    let page = 1,\n        pageTotal = 0;\n    let paginatedItems = items.map(function(item){\n      if (item.isActive) {\n        if (pageTotal < max){\n          item.page = page;\n        }\n        else {\n          page += 1;\n          pageTotal = 0;\n          item.page = page;\n        }\n        pageTotal += 1;\n      }\n      return item;\n    });\n\n    return {\n      items: paginatedItems,\n      totalPages: page\n    }\n  }\n\n  // Remove the listing content children on the current listing page.\n  function clearListingPage(listing, parent) {\n    $(listing).find(parent).html('');\n  }\n\n  /**\n   * Filters the listing data based on component filter state.\n   *\n   * @param data\n   *  An instance of masterData to start from.\n   * @param filterData\n   *  Data structure representing either the newly applied or cleared filters.\n   * @returns {*}\n   */\n  function filterListingData(data, filterData) {\n    // Get the currently active filters.\n    let filters = transformActiveTagsData({data: data, filterData: filterData});\n    // Update the results heading tags with the new active filters.\n    data.resultsHeading.tags = filters;\n\n    // If tag (checkbox) filter is present, filter based on current tag values.\n    if (hasFilter(filters, 'tag')) {\n      // Get just the tag values from the filters array.\n      let tags = getFilterValues(filters, 'tag');\n      // Identify active data based on filter.\n      return filterDataByTags(tags, data);\n    }\n\n    // If a date filter is present, filter based on the date filter values.\n    if (hasFilter(filters, 'dateRange')) {\n      return filterDataByDateTags(filters, data);\n    }\n\n\n    // Either there are no filters or the only active filter is location, make all items active\n    return makeAllActive(data);\n  }\n\n  /**\n   * Returns an instance of master data which is sorted alphabetically by item data.title.text\n   *\n   * @param data\n   *    The instance of master data being sorted.\n   *\n   * @returns {*}\n   *    Sorted instance of master data.\n   */\n  function sortDataAlphabetically(data) {\n    let items = data.items.sort(function(a, b) {\n      let nameA = a.data.title.text.toUpperCase();\n      let nameB = b.data.title.text.toUpperCase();\n\n      // Sort the items alphabetically\n      return (nameA < nameB) ? -1 : (nameA > nameB) ? 1 : 0;\n    });\n\n    let paginated = paginateItems(items, data.maxItems);\n    data.items = paginated.items;\n    data.totalPages = paginated.totalPages;\n    return data;\n  }\n\n  /**\n   * Geocodes an address string arg and executes callback upon successful return.\n   *\n   * @param address\n   *   Address string to be geocoded.\n   * @param callback\n   *   Callback function to call upon successful geocode return.\n   *\n   * @returns {*}\n   *   Upon success, the return value of the passed callback function.\n   */\n  function geocodeAddressString(address, callback) {\n    // Only attempt to execute if google's geocode library is loaded.\n    if (typeof ma.geocoder === \"undefined\") {\n      return;\n    }\n\n    // Geocode address string, then execute callback with argument upon success.\n    ma.geocoder.geocode({address: address}, function (results, status) {\n      if (status === google.maps.GeocoderStatus.OK) {\n        let place =  results[0];\n        return callback(place);\n      }\n      else {\n        console.warn('Geocode was not successful for the following reason: ' + status);\n      }\n    });\n  }\n\n  /**\n   * Geocodes an address string arg and executes callback upon successful return.\n   *\n   * @param address\n   *   Address string to be geocoded.\n   * @param callback\n   *   Callback function to call upon successful geocode return.\n   *\n   * @returns {*}\n   *   Upon success, the return value of the passed callback function.\n   */\n  function geocodePlaceId(place_id, callback) {\n    // Only attempt to execute if google's geocode library is loaded.\n    if (typeof ma.geocoder === \"undefined\") {\n      return;\n    }\n\n    // Geocode address string, then execute callback with argument upon success.\n    ma.geocoder.geocode({ 'placeId': place_id}, function(results, status) {\n      if (status === google.maps.GeocoderStatus.OK) {\n        let place =  results[0];\n        return callback(place);\n      }\n      else {\n        console.warn('Geocode was not successful for the following reason: ' + status);\n      }\n    });\n  }\n\n  /**\n   * Resets all items in a master data instance to active (i.e. not filtered out).\n   *\n   * @param data\n   *    The instance of master data whose items are being made active.\n   *\n   * @returns {*}\n   *    The master data instance with all active items.\n   */\n  function makeAllActive(data) {\n    data.items = data.items.map(function(item){\n      item.isActive = true;\n      return item;\n    });\n    return data;\n  }\n\n  /**\n   * Returns masterData with necessary filtered items flagged inactive.\n   *\n   * @param tags\n   *  The array of filters by which to filter.\n   *\n   * @param data\n   *   The current instance of master data being filtered.\n   *\n   * @returns {*}\n   *   The 'filtered' (flagged) instance of master data.\n   */\n  function filterDataByTags(tags, data){\n    // @todo use map similar to sortDataAlphabetically\n    data.items = data.items.map(function(item) {\n      item.isActive = doesItemContainTags(item.data.tags, tags);\n      return item;\n    });\n\n    return data;\n  }\n\n  /**\n   * Location Listing Specific\n   */\n\n  /**\n   * Determines if an masterData item contains the necessary tag(s).\n   *\n   * @param haystack\n   *  The data object in question.\n   *\n   * @param needle\n   *   The tag(s) being searched for.\n   *\n   * @returns {boolean|*}\n   */\n  function doesItemContainTags(haystack, needle) {\n    return needle.every(function(v) {\n      return Boolean(haystack.filter(function(item){\n        // return Object.values(item).indexOf(v) !== -1;\n        // return Object.values(item).indexOf(v) !== -1;\n        // Object.values shim for IE11\n        return Object.keys(item).map(function(i) { return item[i]; }).indexOf(v) !== -1;\n      }).length);\n    });\n  }\n\n  /**\n   * Event Listing specific helpers\n   */\n\n  /**\n   * Calculate distance from lat/lng.\n   *\n   * @param lat1\n   *    Latitude 1 input.\n   * @param lon1\n   *    Longitude 1 input.\n   * @param lat2\n   *    Latitude 2 input.\n   * @param lon2\n   *    Longitude 2 input.\n   * @param unit\n   *\n   * @returns {*}\n   *    Return the distance from points.\n   */\n  function calculateDistance(lat1, lon1, lat2, lon2, unit) {\n    let radlat1 = Math.PI * lat1/180;\n    let radlat2 = Math.PI * lat2/180;\n    let radlon1 = Math.PI * lon1/180;\n    let radlon2 = Math.PI * lon2/180;\n    let theta = lon1-lon2;\n    let radtheta = Math.PI * theta/180;\n    let dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n    dist = Math.acos(dist);\n    dist = dist * 180/Math.PI;\n    dist = dist * 60 * 1.1515;\n\n    if (unit === \"K\") {\n      dist = dist * 1.609344\n    }\n    if (unit === \"N\") {\n      dist = dist * 0.8684\n    }\n    return dist\n  }\n\n  /**\n   * Create a moment.js object for a passed eventTeaser date data\n   *\n   * @param args\n   *   Data structure for eventTeaser.date and a type (\"start\" || \"end\") property\n   * @returns\n   *   A moment.js object for the event start/end date in MM/D format.\n   *   See: https://momentjs.com/docs/#/parsing/string-format/\n   */\n  function makeMoment(args) {\n    /**\n     * args: {\n     *   data: {\n     *     summary: \"March 2, 2017 - April 25, 2017\",\n     *     startMonth: \"Mar\",\n     *     startDay: \"2\",\n     *     startTimestamp: \"3/2/2017 - 14:00\",\n     *     endMonth: \"Apr\",\n     *     endDay: \"25\",\n     *     endTimestamp: \"4/25/2017 - 15:00\"\n     *   },\n     *   type: 'start' || 'end'\n     * }\n     */\n    // Create moment.js object for start timestamp\n    if (args.hasOwnProperty('type') && args.type === 'start') {\n      return moment(args.data.startTimestamp, 'M/DD/YYYY')\n    }\n    // Create a moment.js object for end timestamp\n    if (args.hasOwnProperty('type') && args.type === 'end') {\n      return args.data.endTimestamp ? moment(args.data.endTimestamp, 'M/DD/YYYY') : \"\";\n    }\n    return false;\n  }\n\n  /**\n   * Returns an instance of master data which is sorted by start timestamp then alphabetically by item data.title.text\n   *\n   * @param data\n   *    The instance of master data being sorted.\n   * @param dateType\n   *    The type of date by which to sort: start || end\n   *\n   * @returns {*}\n   *    Sorted instance of master data.\n   */\n  function sortDataByDate(data, dateType) {\n    let type = dateType ? dateType : 'start';\n    let dateA = '';\n    let dateB = '';\n    let items = data.items.sort(function(a, b) {\n      if (type !== \"end\") {\n        dateA = a.start;\n        dateB = b.start;\n      }\n      else {\n        dateA = a.end;\n        dateB = b.end;\n      }\n\n      let nameA = a.data.title.text.toUpperCase();\n      let nameB = b.data.title.text.toUpperCase();\n\n      // Sort the items by start date timestamp, then alphabetically.\n      // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\n      return (dateA.isBefore(dateB, 'minute')) ? -1 : (dateA.isAfter(dateB, 'minute')) ? 1 : (nameA < nameB) ? -1 : (nameA > nameB) ? 1 : 0;\n    });\n\n    let paginated = paginateItems(items, data.maxItems);\n    data.items = paginated.items;\n    data.totalPages = paginated.totalPages;\n    return data;\n  }\n\n  /**\n   * Returns data with necessary items flagged inactive according to date/date range.\n   *\n   * @param tags\n   *  The array of filters by which to filter.\n   *\n   * @param data\n   *   The current instance of master data being filtered.\n   *\n   * @returns {*}\n   *   The 'filtered' instance of data after checking date(s).\n   */\n  function filterDataByDateTags(tags, data) {\n    data.items = data.items.map(function(item) {\n      item.isActive = isEventInDateRange(item, tags);\n      return item;\n    });\n    let paginated = paginateItems(data.items, data.maxItems);\n    data.items = paginated.items;\n    data.totalPages = paginated.totalPages;\n    return data;\n  }\n\n  /**\n   * Returns an item's isActive value depending on the date range from date filters.\n   *\n   * @param item\n   *   The item.item[]{} being transformed.\n   *\n   * @param tags\n   *  The array of filters by which to filter.\n   *\n   * @returns\n   *   The updated item.\n   */\n  function isEventInDateRange(item, tags) {\n    let filterStart = '';\n    let filterEnd = '';\n\n    tags.map(function(tag) {\n      if (tag.type == 'dateRange') { filterStart = moment(tag.start, 'M/DD/YYYY'); }\n      if (tag.type == 'dateRange') { filterEnd = moment(tag.end, 'M/DD/YYYY'); }\n    });\n\n    if (filterEnd && filterStart) {\n      return item.start.isSameOrAfter(filterStart, 'day') && item.start.isSameOrBefore(filterEnd, 'day') ? true : false;\n    }\n    else {\n      return item.start.isSame(filterStart, 'day') ? true : false;\n    }\n  }\n\n  return {\n    renderListingPage,\n    transformPaginationData,\n    transformResultsHeading,\n    filterListingData,\n    hasFilter,\n    getFilterValues,\n    filterDataByTags,\n    filterDataByDateTags,\n    transformActiveTagsData,\n    paginateItems,\n    clearListingPage,\n    sortDataAlphabetically,\n    sortDataByDate,\n    geocodeAddressString,\n    geocodePlaceId,\n    makeAllActive,\n    calculateDistance,\n    transformListing,\n    makeMoment\n  };\n\n})(window, document, undefined, jQuery, moment);\n","\"use strict\";\n\nexport default function slugify(text) {\n    return text.toString().toLowerCase()\n        .replace(/\\s+/g, '-')           // Replace spaces with -\n        .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n        .replace(/\\-\\-+/g, '-')         // Replace multiple - with single -\n        .replace(/^-+/, '')             // Trim - from start of text\n        .replace(/-+$/, '');            // Trim - from end of text\n}\n","import checkActive from \"../helpers/cssControlCode.js\";\r\n\r\nexport default (function (window,document,$,undefined) {\r\n  let $el,\r\n    $elParent,\r\n    elHeight,\r\n    elWidth,\r\n    lowerLimit,\r\n    upperLimit,\r\n    debounceTimer,\r\n    runCode = false;\r\n\r\n  function init(element) {\r\n    $el = element;\r\n    $elParent = $el.parent().css('position') === 'relative' ? $el.parent() : $el.parent().offsetParent();\r\n\r\n    // default assumption as to where the screen will load\r\n    $el.attr('data-sticky','top');\r\n\r\n    updateData();\r\n\r\n    // update variables one more time to catch any post page load changes\r\n    window.setTimeout(function(){\r\n      updateData();\r\n    },1000);\r\n    \r\n    $(window).resize(function() {\r\n      updateData();\r\n      setPosition();\r\n    });\r\n\r\n    // toggle the sticky positioning\r\n    $(window).scroll(function () {\r\n      setPosition();\r\n    });\r\n  }\r\n\r\n  function updateData(){\r\n    let newRunCode = checkActive($el);\r\n\r\n    if(runCode && !newRunCode) {\r\n      $el.removeAttr('style');\r\n    }\r\n\r\n    runCode = newRunCode;\r\n\r\n    if(!runCode){\r\n      return;\r\n    }\r\n    \r\n    runCode = newRunCode;\r\n    elHeight = $el.height();\r\n    elWidth = $elParent.width();\r\n    upperLimit = $elParent.offset().top;\r\n    lowerLimit = upperLimit + $elParent.outerHeight(true) - $el.height();\r\n\r\n    $el.width(elWidth);      \r\n  }\r\n\r\n  function setPosition() {\r\n    if(!runCode){\r\n      $el.attr('data-sticky','top');\r\n      return false;\r\n    }\r\n\r\n    let windowTop = $(window).scrollTop(),\r\n        attr = $el.attr('data-sticky'),\r\n        top = attr !== 'top' && windowTop <= upperLimit, \r\n        middle = attr !== 'middle' && windowTop < lowerLimit && windowTop > upperLimit,\r\n        bottom = attr !== 'bottom' && windowTop >= lowerLimit;\r\n    \r\n    if(top) {\r\n      $el.attr('data-sticky','top');\r\n    } \r\n    else if (middle) {\r\n      $el.attr('data-sticky','middle');\r\n    } \r\n    else if (bottom) {\r\n      $el.attr('data-sticky','bottom');\r\n    }\r\n  }\r\n\r\n  return {init};\r\n\r\n})(window,document,jQuery);","// @todo: This doesn't seem to be used anymore.\n\nexport default function throttle (fn, threshhold, scope) {\n    threshhold || (threshhold = 250); // default threshold is 250 ms\n    let last,\n        deferTimer;\n    return function () {\n        let context = scope || this;\n\n        let now = +new Date,\n            args = arguments;\n        if (last && now < last + threshhold) {\n            // hold on to it\n            clearTimeout(deferTimer);\n            deferTimer = setTimeout(function () {\n                last = now;\n                fn.apply(context, args);\n            }, threshhold);\n        } else {\n            last = now;\n            fn.apply(context, args);\n        }\n    };\n}\n","\nexport default (function(Twig, ma) {\n    'use strict';\n\n    /**\n     * Returns the gettable path to a pattern based on its namespaced path.\n     *\n     * @param pattern\n     *   The namespaced path to a pattern (i.e. @atoms/decorative-link.twig)\n     *\n     * @returns {string}\n     *   The path to a pattern which can be used in a get request (i.e. /assets/patterns/atoms/decorative-link.twig )\n     */\n    function resolveTwigPath(patternName) {\n        let pathParts = patternName.split(\"/\");\n        let namespace = pathParts.shift();\n        let patternPath = pathParts.join(\"/\");\n        // Set ma.patternPaths in your implementation's env.js file (see /source/_meta/_00-foot.twig)\n        return ma.patternPaths[namespace] + patternPath;\n    }\n\n    /**\n     * Returns the gettable path to an icon based on its name.\n     *\n     * @param name\n     *   The name of an icon (i.e. arrow)\n     *\n     * @returns {string}\n     *   The path to an icon SVG file which can be used in a get request (i.e. /images/svg-icons/arrow.svg )\n     */\n    function getIconPath(name) {\n        return ma.iconPath + '/' + name + '.svg';\n    };\n\n    /**\n     * Extend Twig with an icon function that embeds an SVG directly.\n     */\n    Twig.extendFunction('icon', function(name) {\n        // Just use Twig to fetch the SVG and render it like a template.\n        var svg = Twig.twig({\n            href: getIconPath(name),\n            async: false,\n        });\n        // Don't choke here if we aren't able to load the SVG.\n        return svg ? svg.render() : '';\n    });\n\n    /**\n     * Asynchronously loads a Twig template based on the internal name.\n     *\n     * @param patternName\n     *   The namespaced path to a pattern (i.e. @atoms/decorative-link.twig)\n     *\n     * @return {Promise<Twig.Template>}\n     *   The loaded and compiled Twig template.\n     */\n    return function twiggy(patternName) {\n        return new Promise(function(resolve, reject) {\n            Twig.twig({\n                href: resolveTwigPath(patternName),\n                allowInlineIncludes: true,\n                namespaces: {\n                    'base': ma.patternPaths['@base'],\n                    'atoms': ma.patternPaths['@atoms'],\n                    'molecules': ma.patternPaths['@molecules'],\n                    'organisms': ma.patternPaths['@organisms'],\n                    'templates': ma.patternPaths['@templates'],\n                    'pages': ma.patternPaths['@pages'],\n                    'meta': ma.patternPaths['@meta']\n                },\n                async: true, // Included/extended patterns loaded synchronously: https://github.com/twigjs/twig.js/issues/426\n                load: resolve\n            })\n        })\n    };\n\n}(Twig, ma))","import                            \"./helpers/jQueryExtend.js\";\nimport                            \"./helpers/jQueryExtend_ajaxPattern.js\";\nimport ajaxPattern                from \"./modules/ajaxPattern.js\";\nimport ajaxPatternOverride        from \"./modules/ajaxPatternOverride.js\";\nimport accordions                 from \"./modules/accordions.js\";\nimport googleMap                  from \"./modules/googleMap.js\";\nimport back2top                   from \"./modules/back2top.js\";\nimport clickable                  from \"./modules/clickable.js\";\nimport dropdown                   from \"./modules/dropdown.js\";\nimport emergencyAlerts            from \"./modules/emergencyAlerts.js\";\nimport eventFilters               from \"./modules/eventFilters\";\nimport eventListingInteractive    from \"./modules/eventListingInteractive\";\nimport footnote                   from \"./modules/footnote.js\";\nimport formValidation             from \"./modules/formValidation.js\";\nimport headerTags                 from \"./modules/headerTags.js\";\nimport hideAlert                  from \"./modules/hideAlert.js\";\nimport inlineOverlay              from \"./modules/inlineOverlay.js\";\nimport imageFill                  from \"./modules/imageFill.js\";\nimport keywordSearch              from \"./modules/keywordSearch.js\";\nimport linkListToggle            from \"./modules/linkListToggle.js\";\nimport locationListing            from \"./modules/locationListing.js\";\nimport locationFilters            from \"./modules/locationFilters.js\";\nimport mainNav                    from \"./modules/mainNav.js\";\nimport mobileNav                  from \"./modules/mobileNav.js\";\nimport orgSelector                from \"./modules/orgSelector.js\";\nimport organizationNavigation     from \"./modules/organizationNavigation.js\";\nimport pagination                 from \"./modules/pagination.js\";\nimport pikaday                    from \"./modules/pikaday.js\";\n// `richText` is needed above `responsiveTable` to setup tables.\nimport richText                   from \"./modules/richText.js\";\nimport responsiveTable            from \"./modules/responsiveTable.js\";\nimport responsiveVideo            from \"./modules/responsiveVideo.js\";\nimport resultsHeading             from \"./modules/resultsHeading.js\";\nimport scrollAnchors              from \"./modules/scrollAnchors.js\";\nimport teaserListingGroup         from \"./modules/teaserListingGroup\";\nimport truncateTitle              from \"./modules/truncateTitle.js\";\nimport formInputs                 from \"./modules/formInputs.js\";\nimport utilNav                    from \"./modules/utilNav.js\";\nimport stickyTOC                  from \"./modules/stickyTOC.js\";\n","import checkActive from \"../helpers/cssControlCode.js\";\r\n\r\nexport default (function (window,document,$,undefined) {\r\n\r\n  $('.js-accordion').each(function(index){\r\n    init.apply(this, [index]);\r\n  });\r\n\r\n  $(document).on('ma:AjaxPattern:Render', function(e,data){\r\n    let $context = data.el;\r\n    if ($context.find('.js-accordion').length) {\r\n      $context.find('.js-accordion').each(function(index){\r\n        // Try to ensure we don't collide with the index values from DOM load.\r\n        let offset = 100;\r\n        let offsetIndex = offset + index;\r\n        init.apply(this, [offsetIndex]);\r\n      })\r\n    }\r\n  });\r\n\r\n  function init(index) {\r\n    let $el = $(this),\r\n        $link = $el.find('.js-accordion-link'),\r\n        $content = $el.find('.js-accordion-content'),\r\n        $status = $el.find('.js-accordion-status'),\r\n        id = $content.attr('id') || 'accordion' + (index + 1),\r\n        active = checkActive($el),\r\n        open = $el.hasClass('is-open');\r\n\r\n    $content.attr('id', id);\r\n    $link.attr('aria-expanded',open).attr('aria-controls', id);\r\n\r\n    if(open) {\r\n      // setup the inline display block\r\n      $content.stop(true,true).slideDown();\r\n    }\r\n\r\n    $link.on('click',function(e){\r\n      if(active) {\r\n        e.preventDefault();\r\n        open = $el.hasClass('is-open');\r\n        if(open){\r\n          $content.stop(true,true).slideUp();\r\n          $status.attr('aria-label', 'click to show info');\r\n        } else {\r\n          $content.stop(true,true).slideDown();\r\n          $status.attr('aria-label', 'click to hide info');\r\n        }\r\n        $link.attr('aria-expanded',!open);\r\n        $el.toggleClass('is-open');\r\n      }\r\n    });\r\n\r\n    $(window).resize(function () {\r\n      let temp = checkActive($el);\r\n\r\n      if(temp !== active && !temp) {\r\n        $content.removeAttr('style');\r\n        $el.removeClass('is-open');\r\n        $link.attr('aria-expanded','false');\r\n      }\r\n\r\n      active = temp;\r\n    }).resize();\r\n  }\r\n\r\n})(window,document,jQuery);\r\n","/**\n * @file\n * Ajax Alert js has to execute prior to its dependent accordion and emergency alert js modules.\n */\n\nexport default (function (window,document,$,undefined) {\n\n  $('.js-ajax-pattern').each(function(){\n    // Get the endpoint which is passed in as ajaxAlerts.endpoint to organism data attribute.\n    let endpoint = $(this).data('ma-ajax-endpoint');\n    if (!endpoint) {\n      console.error(\"MA::AjaxPattern::This pattern requires an endpoint to be passed in as an argument.\");\n      return false;\n    }\n\n    let renderPattern = $(this).data('ma-ajax-render-pattern');\n    if (!renderPattern) {\n      console.error(\"MA::AjaxPattern::This pattern requires a child pattern to be passed as an argument.\");\n      return false;\n    }\n    try {\n      $(this).MassAjaxPattern({\"endpoint\": endpoint, \"renderPattern\": renderPattern});\n    }\n    catch (e) {\n      console.error(e);\n    }\n  });\n\n})(window,document,jQuery);\n","/**\n * @file\n * This demonstrates how to pass a transform function to MassAjaxPattern.\n */\n\nexport default (function (window,document,$,undefined) {\n\n  // Note that this selector is passed into the template so that this is run instead of the\n  // default 'js-ajax-pattern'.  See the ajaxPattern.customSelector in guide.json page object.\n  // In an implementation of this you would want to create your own selector and avoid\n  // js-ajax-pattern and js-ajax-pattern-override since Mayflower will attach to these.\n  $('.js-ajax-pattern-override').each(function(){\n    // Get the endpoint which is passed in as ajaxAlerts.endpoint to organism data attribute.\n    let endpoint = $(this).data('ma-ajax-endpoint');\n    if (!endpoint) {\n      console.error(\"MA::AjaxPattern::This pattern requires an endpoint to be passed in as an argument.\");\n      return false;\n    }\n\n    let renderPattern = $(this).data('ma-ajax-render-pattern');\n    if (!renderPattern) {\n      console.error(\"MA::AjaxPattern::This pattern requires a child pattern to be passed as an argument.\");\n      return false;\n    }\n    try {\n      $(this).MassAjaxPattern({\n        \"endpoint\": endpoint,\n        \"renderPattern\": renderPattern,\n        \"transform\": function(ajaxData) {\n          // Example of some custom data transformation being done to the data according to implementation needs.  This will often include restructuring of data.\n          // If business logic indicates that the pattern should not render (for example, if the endpoint returns no emergency alert data) then this function should return an empty js object {}.\n          var data = ajaxData;\n          data.emergencyAlerts.alerts = data.emergencyAlerts.these.are.alerts;\n          return data;\n        }\n      });\n    }\n    catch (e) {\n      console.error(e);\n    }\n  });\n\n})(window,document,jQuery);\n","export default (function (window,document,$,undefined) {\r\n  let $footer = $('.js-footer'),\r\n      visibleThreshold = 250,\r\n      staticThreshold = 50;\r\n\r\n  $(\".js-back2top\").each(function() {\r\n    let $el = $(this);\r\n\r\n    $el.on('click',function(e) {\r\n      e.preventDefault();\r\n      try {\r\n        $(\"html, body\").stop(true,true).animate({scrollTop:0}, '750');\r\n      } \r\n      catch(e) {\r\n        $('body').scrollTop(0);\r\n      }\r\n      // Bring keyboard focus back to top as well.\r\n      $(\"#main-content\").focus();\r\n      return false;\r\n    });\r\n\r\n    $(window).on('scroll', function() {\r\n      // if we've exceeded the threshold of scrolling\r\n      // from the top, show control\r\n      let scrollTop = $(window).scrollTop();\r\n\r\n      if (scrollTop > visibleThreshold) {\r\n          $el.removeClass('is-hidden');\r\n      } else {\r\n          $el.addClass('is-hidden');\r\n      }\r\n    });\r\n  });\r\n\r\n})(window,document,jQuery);","export default (function (window,document,$,undefined) {\r\n  $('.js-clickable').each(function(){\r\n    // if the this is clicked\r\n    $(this).click(function(event){\r\n      event.preventDefault();\r\n\r\n      var $el = $(this).find('.js-clickable-link').first();\r\n      // find the destination\r\n      var dest = $el.attr(\"href\");\r\n      // if the target attribute exists\r\n      if(\"_blank\" === $el.attr(\"target\")) {\r\n        // launch new tab/window\r\n        window.open(dest);\r\n      } else {\r\n        // otherwise redirect to a new page\r\n        window.location = dest;\r\n      }\r\n    });\r\n  });\r\n})(window,document,jQuery);","// ****** basic custom select that uses mobile select keyboard ******\r\nlet dropdownMenu = document.querySelectorAll(\".js-dropdown\");\r\n\r\nif(null !== dropdownMenu){\r\n\r\n  let length = dropdownMenu.length;\r\n\r\n  for (let i = 0; i < length; i++ ) {\r\n    let parentEl = dropdownMenu[i],\r\n        selectEl = parentEl.querySelector(\".js-dropdown-select\"),\r\n        link = parentEl.querySelector(\".js-dropdown-link\")\r\n\r\n    if(null === selectEl || null === link) {\r\n      break;\r\n    }\r\n\r\n    selectEl.onchange = function() {\r\n      let elem = (typeof this.selectedIndex === \"undefined\" ? window.event.srcElement : this);\r\n      link.innerText = elem.text || elem.options[elem.selectedIndex].text;\r\n    }\r\n  }\r\n}\r\n","import cookie   from \"../helpers/cookies.js\";\r\n\r\nexport default (function (window,document,$,undefined) {\r\n  // Emergency Alerts start close on page load\r\n  // the default behavior is to expand the alerts\r\n  // Emergency Alerts should stay closed if the cookie is set to false\r\n\r\n  /* ********* NOTE:\r\n    This component is dependent on the\r\n    accordion.js component runing before it.\r\n  ********* */\r\n\r\n  $('.js-emergency-alerts').each(function(){\r\n      init.apply(this);\r\n  });\r\n\r\n  $(document).on('ma:AjaxPattern:Render', function(e,data){\r\n    let $context = data.el;\r\n    if ($context.find('.js-emergency-alerts').length) {\r\n      $context.find('.js-emergency-alerts').each(function(){\r\n        init.apply(this);\r\n      })\r\n    }\r\n  });\r\n\r\n  /**\r\n   * Initialize the emergency alert.\r\n   */\r\n  function init() {\r\n    let open = true,\r\n        id = $(this).data('id'),\r\n        cookieName = 'emergency-alerts' + id,\r\n        cookieValue = cookie.getCookie(cookieName),\r\n        $button = $(this).find('.js-accordion-link');\r\n\r\n    $button.on('click', function() {\r\n      // clicking this link also triggers the accordion click\r\n      // toggle the current state\r\n      open = !open;\r\n      // update open/close state cookie\r\n      // leave off third argument to make it expire on session\r\n      cookie.setCookie(cookieName,open);\r\n    });\r\n\r\n    // if the user has closed the alerts on a previous page\r\n    if(typeof(cookieValue) !== 'undefined' && cookieValue === 'false') {\r\n      open = false;\r\n      // set the state of aria-expanded\r\n      $button.attr('aria-expanded', open);\r\n    }\r\n\r\n    // Emergency Alerts loads closed so expand it.\r\n    if(open) {\r\n      open = false; // clicking the link swaps the value\r\n      $button.first().trigger('click');\r\n    }\r\n  }\r\n})(window,document,jQuery);\r\n","export default (function (window,document,$,undefined) {\n  $('.js-event-filters').each(function(){\n    let $el = $(this);\n\n    // When google map libraries are loaded, initialize places.autocomplete on the location input, if it exists.\n    $(document).on('ma:LibrariesLoaded:GoogleMaps', function() {\n      let $locationFilterParent = $('.js-event-filter-by-location', $el);\n      let $locationFilter = $locationFilterParent.find('input');\n      if ($locationFilter.length) {\n        // Create the google places autocomplete object and associate it with the zip code text input.\n        let locationInput = document.getElementById($locationFilter.attr('id'));\n        let swLat = $locationFilterParent.data('maPlaceBoundsSwLat');\n        let swLng = $locationFilterParent.data('maPlaceBoundsSwLng');\n        let neLat = $locationFilterParent.data('maPlaceBoundsNeLat');\n        let neLng = $locationFilterParent.data('maPlaceBoundsNeLng');\n\n        let defaultBounds = new google.maps.LatLngBounds(new google.maps.LatLng(swLat,swLng), new google.maps.LatLng(neLat,neLng));\n\n        // See options: https://developers.google.com/maps/documentation/javascript/places-autocomplete#add_autocomplete\n        let options = {\n          bounds: defaultBounds,\n          strictBounds: true,\n          types: ['geocode'],\n          componentRestrictions: {country: 'us'},\n          placeIdOnly: true\n        };\n        ma.autocomplete = new google.maps.places.Autocomplete(locationInput, options);\n      }\n    });\n\n    // Listen for new data from another component interaction (i.e. results heading), update form.\n    $el.on('ma:FormFilter:DataUpdated', function(e, data){\n      renderForm({clearedFilter: data.clearedFilter, $form: $el});\n    });\n\n    // Handle global form submission.\n    $el.submit(function(e){\n      e.preventDefault();\n      // Update master data with the various filter values.\n      let formData = getFormData({$form: $(this)});\n\n      // Trigger location listing filter event with current filter values.\n      $el.trigger('ma:EventFilter:FormSubmitted', [{formData: formData}]);\n    });\n\n  });\n\n  function renderForm(args) {\n    let clearedFilter = args.clearedFilter;\n    // The clear all button was pressed.\n    if (clearedFilter === \"all\") {\n      clearForm(args);\n    }\n    // Single filter button was pressed.\n    else {\n      clearDeactivatedFilter(args);\n    }\n  }\n\n  function getFormData(args) {\n    let $form = $(args.$form),\n      $location = $form.find('.js-event-filter-by-location'),\n      $tags = $form.find('.js-filter-by-tags'),\n      $dateStart = $form.find('.js-filter-by-date-range__start'),\n      $dateEnd = $form.find('.js-filter-by-date-range__end'),\n      formData = [];\n\n    // Get location\n    if ($location.find('input').length) {\n      let place = $location.find('input').val();\n      if (place) {\n        formData.push({\n          type: 'location',\n          text: place,\n          value: place\n        });\n      }\n    }\n\n    let dateRange = '',\n        startDate = '',\n        endDate = '',\n        useToday = false;\n\n    // Get start date.\n    if ($dateStart.find('input').length) {\n      startDate = $dateStart.find('input').val();\n      if (startDate) {\n        dateRange += startDate;\n      }\n      else {\n        startDate = moment().format('M/DD/YYYY');\n        useToday = true;\n      }\n    }\n\n    // Get end date.\n    if ($dateEnd.find('input').length) {\n      endDate = $dateEnd.find('input').val();\n      if (endDate) {\n        if (startDate && !useToday) {\n          dateRange += ' - ' + endDate;\n        }\n        else {\n          dateRange = 'Today - ' + endDate;\n        }\n      }\n    }\n\n    if (dateRange) {\n      formData.push({\n        type: 'dateRange',\n        text: dateRange,\n        value: dateRange,\n        start: startDate,\n        end: endDate,\n      });\n    }\n\n    // Get checkboxes/tags.\n    $tags.find('input:checked').each(function() {\n      formData.push({\n        'type': 'tag',\n        'text': $(this).next(\"label\").text(),\n        'value': $(this).val()\n\n      });\n    });\n\n    return formData;\n  }\n\n  function clearDeactivatedFilter(args) {\n    let $form = $(args.$form),\n      $place = $form.find('.js-event-filter-by-location'),\n      $dateStart = $form.find('.js-filter-by-date-range__start'),\n      $dateEnd = $form.find('.js-filter-by-date-range__end'),\n      $tags = $form.find('.js-filter-by-tags'),\n      clearedFilter = args.clearedFilter;\n\n    // If the cleared filter button was for a location filter.\n    if (clearedFilter.type === 'location') {\n      $place.find('input').val(\"\");\n      return;\n    }\n    // Clear dates text inputs.\n    if (clearedFilter.type === 'dateRange') {\n      $dateStart.find('input').val(\"\");\n      $dateEnd.find('input').val(\"\");\n      return;\n    }\n    // If the cleared filter button was for a tag filter.\n    if (clearedFilter.type === 'tag') {\n      $tags.find('input[type=checkbox][value=' + clearedFilter.value + ']').prop('checked', false);\n    }\n  }\n\n  function clearForm(args) {\n    let $form = $(args.$form),\n      $place = $('.js-event-filter-by-location', $form).find('input'),\n      $dateStart = $('.js-filter-by-date-range__start', $form).find('input'),\n      $dateEnd = $('.js-filter-by-date-range__end', $form).find('input');\n\n    // Clear location text input.\n    if ($place.length) {\n      $place.val(\"\");\n    }\n\n    // Clear start date text input.\n    if ($dateStart.length) {\n      $dateStart.val(\"\");\n    }\n\n    // Clear end date text input.\n    if ($dateEnd.length) {\n      $dateEnd.val(\"\");\n    }\n\n    // Check for tags and uncheck all checked tags inputs.\n    if (typeof $tags != \"undefined\") {\n      $tags.find('input:checked').prop('checked', false);\n    }\n  }\n\n})(window,document,jQuery);\n","import listings from \"../helpers/listing.js\";\n\nexport default (function (window,document,$,undefined) {\n  let container = '.js-event-listing-interactive',\n      parent = '.js-event-listing-items',\n      row = '.js-event-listing-item';\n\n  $('.js-event-listing-interactive').each(function(i) {\n    let $el = $(this),\n        $resultsHeading = $el.find('.js-results-heading'),\n        $pagination = $el.find('.js-pagination'),\n        $eventFilter = $el.find('.js-event-filters');\n\n    // Get the location listing component data (this could be replaced with an api)\n    const rawData = ma.eventListingInteractive[i]; // Data object created in @organisms/by-author/event-listing-interactive.twig\n\n    let masterData = []; // master data structure to preserve state\n\n    masterData = populateMasterDataSource(rawData); // to preserve state\n\n    // Handle location listings form interaction (triggered by locationFilters.js).\n    $eventFilter.on('ma:EventFilter:FormSubmitted', function (e, formValues) {\n      // transformData() returns a jQuery deferred object which allows us to wait for any asynchronous js execution to return before executing the .done(callback).\n      // @see: https://api.jquery.com/deferred.done/\n      transformData(masterData, formValues).done(function (transformation) {\n        masterData = transformation.data; // preserve state\n        // Update the results heading based on the current items state.\n        transformation.data.resultsHeading = listings.transformResultsHeading({data: transformation.data});\n        // Update pagination data structure, reset to first page\n        transformation.data.pagination = listings.transformPaginationData({data: transformation.data});\n        // Render the listing page.\n        listings.renderListingPage({data: transformation.data});\n        // Trigger child components render with updated data\n        updateChildComponents(transformation);\n      });\n    });\n\n\n    // Handle active filter/tag button interactions (triggered by resultsHeading.js).\n    $resultsHeading.on('ma:ResultsHeading:ActiveTagClicked', function (e, clearedFilter) {\n      // transformData() returns a jQuery deferred object which allows us to wait for any asynchronous js execution to return before executing the .done(callback).\n      // @see: https://api.jquery.com/deferred.done/\n      transformData(masterData, clearedFilter).done(function (transformation) {\n        masterData = transformation.data; // preserve state\n        transformation.clearedFilter = clearedFilter;\n\n        masterData = transformation.data; // preserve state\n        // Update the results heading based on the current items state.\n        transformation.data.resultsHeading = listings.transformResultsHeading({data: transformation.data});\n        // Update pagination data structure, reset to first page\n        transformation.data.pagination = listings.transformPaginationData({data: transformation.data});\n        // Render the listing page.\n        listings.renderListingPage({data: transformation.data});\n        // Trigger child components render with updated data\n        updateChildComponents(transformation);\n      });\n    });\n\n    // Handle pagination click events\n    function handlePagination (e, target) {\n      \"use strict\";\n      let nextPage = parseInt(target, 10);\n\n      masterData.pagination = listings.transformPaginationData({ data: masterData, targetPage: nextPage });\n      masterData.resultsHeading = listings.transformResultsHeading({ data: masterData, page: nextPage });\n      listings.renderListingPage({ data: masterData, page: nextPage });\n\n      // Trigger child components render with updated data\n      updateChildComponents({ data: masterData });\n    }\n    $pagination.on('ma:Pagination:Pagination', handlePagination);\n    let defaultPage = 1;\n    let params = new URLSearchParams(window.location.search);\n    if (history.state) {\n      defaultPage = history.state.page;\n    }\n    if (params) {\n      defaultPage = params.get(\"page\");\n    }\n    handlePagination(null, defaultPage);\n\n\n    // Trigger events to update child components with new data.\n    function updateChildComponents(args) {\n      $resultsHeading.trigger('ma:ResultsHeading:DataUpdated', [args.data.resultsHeading]);\n\n      $pagination.trigger('ma:Pagination:DataUpdated', [args.data.pagination]);\n      if (args.clearedFilter) {\n        $eventFilter.trigger('ma:FormFilter:DataUpdated', [args.clearedFilter]);\n      }\n    }\n\n    /**\n     * Returns a master data structure with page level / listing item level data and markup, to reflect component state.\n     *\n     * @param listing\n     *   The listing data structure to use as a source\n     * @returns {Array}\n     *   An array with the following structure:\n     *    [\n     *      maxItems: the max number of items to show per listing \"page\" if provided, defaults to all\n     *      totalPages: the number of pages of items that should render, given the current filters\n     *      resultsHeading: the data structure necessary to render a resultsHeading component\n     *      items: an array of listing items [\n     *        isActive: whether or not the listing should be shown, given current filters state\n     *        page: the page that the listing, if active, will appear on, given the current sort order\n     *        data: the data structure for the eventTeaser component\n     *        markup: the compiled eventTeaser markup\n     *        start: the momentjs object for the start timestamp\n     *      ]\n     *      pagination: the data structure necessary to render a pagination component,\n     *      selectors: the necessary $selectors for rendering the listing\n     *    ]\n     */\n    function populateMasterDataSource(listing) {\n      // Populate master data structure\n      let masterData = [];\n\n      // Ensure eventListing.events.items is an array (the twig template json_encode()'s a php array)\n      let listArray = [];\n      $.map(listing.eventListing.events, function(val, index) {\n        listArray[index] = val;\n      });\n\n      listing.eventListing.events = listArray;\n\n      // Ensure eventListing.pagination.pages is an array (the twig template json_encode()'s a php array)\n      let pages = [];\n      $.map(listing.pagination.pages, function(val, index) { pages[index] = val; });\n      listing.pagination.pages = pages;\n\n      // Get the listing events, generate markup for each\n      let masterListing = listing.eventListing.events,\n\n      // Pass in listing and template name.\n      masterListingMarkup = listings.transformListing(masterListing, 'eventListingRow');\n\n      // The max number of items per page, if designated in eventListing data structure, else all\n      masterData.maxItems = listing.maxItems ? listing.maxItems : masterListing.length;\n\n      // The initial results heading data structure\n      masterData.resultsHeading = listing.resultsHeading;\n\n      // Create items with listing and markup.\n      masterData.items = getMasterListingWithMarkup(masterListing, masterListingMarkup, masterData.maxItems);\n\n      // The initial pagination data structure;\n      masterData.pagination = listing.pagination;\n\n      // The total number of pages, given the number of items and the maxItems variable\n      masterData.totalPages = Math.ceil(masterData.items.length / masterData.maxItems);\n\n      // Set the selector properties necessary to render\n      masterData.selectors = {};\n      masterData.selectors.container = container;\n      masterData.selectors.parent = parent;\n      masterData.selectors.row = row;\n\n      return masterData;\n    }\n\n    /**\n     * Creates the master data structure items array\n     *\n     * @param listing\n     *   The eventListing data structure\n     * @param markup\n     *   The generated array of item markup\n     * @param max\n     *   The maximum number of items per page\n     * @returns {Array}\n     *  An array of listing items with the following structure:\n     *  [\n     *      isActive: whether or not the listing should be shown, given current filters state\n     *      page: the page that the listing, if active, will appear on, given the current sort order\n     *      data: the data structure for the eventListing component\n     *      markup: the compiled event markup\n     *      start: a momentjs object for this event's start timestamp\n     *   ]\n     */\n    function getMasterListingWithMarkup(listing, markup, max) {\n      let items = [];\n      listing.forEach(function (item, index) {\n        // determine if there is an end date to this event\n        let endDate = listing[index].date.endDay.length;\n\n        items[index] = {\n          isActive: true, // @todo consider checking for this in case of server side preprocessing of state\n          page: Math.ceil((index+1) / max),\n          markup: markup[index],\n          data: listing[index],\n          start: listings.makeMoment({data: listing[index].date, type: 'start'}),\n          end: (endDate) ? listings.makeMoment({data: listing[index].date, type: 'end'}) : endDate\n        };\n      });\n      return items;\n    }\n\n  });\n\n  /**\n   * The main data transformation wrapper, returns an instance of masterData which reflects the component state.\n   *\n   * @param data\n   *  An instance of masterData to start from.\n   * @param transformation\n   *  An object representing the change in state (locationFilter form data, resultsHeading tag interaction, etc.)\n   *\n   * @returns {{data: *, place: *}}\n   *  An object with the current state masterData instance and an array of their related sorted markers to send to map.\n   */\n  function transformData(data, transformation) {\n    // This data transformation potentially involves asynchronous google geocoding.\n    // This jQuery deferered object allows us to wait for a return before moving on inside of the parent function (which invokes this function).\n    // @see https://api.jquery.com/jquery.deferred/\n    let promise = $.Deferred();\n    let transformReturn = {};\n\n    // First filter the data based on component state, then sort alphabetically by default.\n    let filteredData = listings.filterListingData(data, transformation),\n        tags = filteredData.resultsHeading.tags,\n        sortedData = listings.sortDataByDate(filteredData),\n        place = '';\n\n    // Sort data by location, if that filter is present.\n    if (listings.hasFilter(tags, 'location')) {\n      place = listings.getFilterValues(tags, 'location')[0]; // returns array\n      // If place argument was selected from the locationFilter autocomplete (initiated on the zipcode text input).\n      let autocompletePlace = ma.autocomplete.getPlace();\n      // Geocode the address, then sort the markers and instance of locationListing masterData.\n      ma.geocoder = ma.geocoder ? ma.geocoder : new google.maps.Geocoder();\n      if (typeof autocompletePlace !== \"undefined\" && autocompletePlace.hasOwnProperty('place_id')) {\n        // This is an asynchronous function\n        listings.geocodePlaceId(autocompletePlace.place_id, function(result) {\n          transformReturn.data = sortDataAroundPlace(result, filteredData);\n          transformReturn.geocode = result;\n          // Return the data sorted by location and the geocoded place object\n          promise.resolve(transformReturn);\n        });\n      }\n      // If place argument was populated from locationFilter (zipcode text input) but not from Place autocomplete.\n      else {\n        // This is an asynchronous function\n        listings.geocodeAddressString(place, function(result) {\n          transformReturn.data = sortDataAroundPlace(result, filteredData);\n          transformReturn.geocode = result;\n          // Return the data sorted by location and the geocoded place object\n          promise.resolve(transformReturn);\n        });\n      }\n    }\n    else {\n      // Return the data sorted by alphabet and the empty place object\n      promise.resolve({data: sortedData, place: place});\n    }\n\n    return promise;\n  }\n\n  /**\n   * Returns instance of location listing masterData, sorted proximity to place.\n   *\n   * @param place\n   *   The geocode information by which to sort.\n   * @param data\n   *   The instance of location listing masterData.\n   * @returns {*}\n   *   Sorted instance of location listing masterData.\n   */\n  function sortDataAroundPlace(place, data) {\n    let lat = place.geometry.location.lat(),\n        lng = place.geometry.location.lng();\n\n    // Get all existing marker distance from place, assign as marker property.\n    for (let key in data.items) {\n      if (data.items.hasOwnProperty(key)) {\n        data.items[key].distance = listings.calculateDistance(data.items[key].data.position.lat, data.items[key].data.position.lng, lat, lng, \"K\");\n      }\n    }\n\n    // Sort existing markers by closest to the place.\n    data.items.sort(function (a, b) {\n      return a.distance - b.distance;\n    });\n\n    // Update each location listing item's page number based on new marker sort order.\n    let paginated = listings.paginateItems(data.items, data.maxItems);\n    data.items = paginated.items;\n    data.totalPages = paginated.totalPages;\n\n    // Return the newly sorted instance of location listing masterData.\n    return data;\n  }\n\n})(window,document,jQuery);","import checkMobile from \"../helpers/cssControlCode.js\";\r\n\r\nexport default (function (window,document,$,undefined) {\r\n\r\n  $('.js-footnote').each(function(){\r\n    let $el = $(this),\r\n        $link = $el.find(\".js-footnote-link\"),\r\n        $messageLink = $link.clone(),\r\n        $rtelink = null,\r\n        isMobile = checkMobile($el);\r\n\r\n    if ($link.attr('href') === \"#\") {\r\n      return;\r\n    } else {\r\n      $rtelink = $($link.attr('href'));\r\n    }\r\n\r\n    $messageLink.text('');\r\n\r\n    $el.find(\".js-footnote-message p:last-child\").append($messageLink);\r\n\r\n    $(window).resize(function() {\r\n      isMobile = checkMobile($el);\r\n    });\r\n\r\n    $el.on('click','.js-footnote-link', function(e) {\r\n      e.preventDefault();\r\n\r\n      let target = $(this).attr('href');\r\n      let position = getPosition($(target).parent());\r\n      \r\n      scrollTo(position.top, target);\r\n    });\r\n\r\n    $rtelink.click(function(e) {\r\n      e.preventDefault();\r\n\r\n      let target = $(this).attr('href');\r\n      let position = getPosition($(target));\r\n      \r\n      scrollTo(position.top, target);\r\n    });\r\n\r\n    function getPosition($target) {\r\n      let pos = $target.offset() || 0;\r\n\r\n      if(isMobile) {\r\n        let headerHeight = $('.js-sticky-header').height() || 0;\r\n        let navHeight = $(\".js-scroll-anchors\").height() || 0;\r\n\r\n        pos.top = pos.top - headerHeight - navHeight;\r\n      }\r\n\r\n      return pos;\r\n    }\r\n\r\n    function scrollTo(position, focus) {\r\n      $(\"html,body\").stop(true,true).animate({scrollTop:position}, '750', function(){\r\n        if(focus) {\r\n          $(focus).focus();\r\n        }\r\n      });\r\n    }\r\n  });\r\n})(window,document,jQuery);\r\n","export default (function (window,document,$,undefined) {\r\n\r\n  $('textarea[maxlength]').each(function(){\r\n    const $el = $(this);\r\n    const maxlength = $el.attr('maxlength');\r\n\r\n    let remaining = maxlength - $el.val().length;\r\n    let message = `${remaining}/${maxlength}`;\r\n\r\n    $el.wrap('<div class=\"ma__textarea__wrapper\"></div>');\r\n\r\n    $el.parent().attr('data-char-left',message);\r\n\r\n    $el.on('keyup mouseup blur', function(){\r\n      remaining = maxlength - $el.val().length;\r\n      message = `${remaining}/${maxlength}`;\r\n      $el.parent().attr('data-char-left',message);\r\n    });\r\n  });\r\n\r\n  // number restricted input based on it's pattern (this must run prior to type=\"number\")\r\n  $('input[type=\"text\"][pattern=\"[0-9]*\"]').on('keydown', function(e){\r\n    // Allow: delte(46), backspace(8), tab(9), escape(27), enter(13) and space(32))\r\n    if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 32]) !== -1 ||\r\n         // Allow: Ctrl/cmd+A\r\n        (e.keyCode == 65 && (e.ctrlKey === true || e.metaKey === true)) ||\r\n         // Allow: Ctrl/cmd+C\r\n        (e.keyCode == 67 && (e.ctrlKey === true || e.metaKey === true)) ||\r\n         // Allow: Ctrl/cmd+X\r\n        (e.keyCode == 88 && (e.ctrlKey === true || e.metaKey === true)) ||\r\n         // Allow: home, end, left, right\r\n        (e.keyCode >= 35 && e.keyCode <= 39)) {\r\n             // let it happen, don't do anything\r\n             return;\r\n    }\r\n    // Ensure that it is a number and stop the keypress\r\n    if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {\r\n        e.preventDefault();\r\n    }\r\n  });\r\n\r\n  // number input type\r\n  $('input[type=\"number\"], .js-input-number').each(function(){\r\n    const $el = $(this);\r\n    const $plus = $('<button type=\"button\" aria-label=\"increase value\" class=\"ma__input-number__plus\"></button>');\r\n    const $minus = $('<button type=\"button\" aria-label=\"decrease value\" class=\"ma__input-number__minus\"></button>');\r\n\r\n    let value = $el.val();\r\n\r\n    // if the input is not an html input and key restrictions\r\n    if($el.attr('type') !== \"number\") {\r\n      $el.on('keydown', function(e){\r\n        // Allow: delte(46), backspace(8), tab(9), escape(27), enter(13) and .(110 & 190))\r\n        if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 190]) !== -1 ||\r\n             // Allow: Ctrl/cmd+A\r\n            (e.keyCode == 65 && (e.ctrlKey === true || e.metaKey === true)) ||\r\n             // Allow: Ctrl/cmd+C\r\n            (e.keyCode == 67 && (e.ctrlKey === true || e.metaKey === true)) ||\r\n             // Allow: Ctrl/cmd+X\r\n            (e.keyCode == 88 && (e.ctrlKey === true || e.metaKey === true)) ||\r\n             // Allow: home, end, left, right\r\n            (e.keyCode >= 35 && e.keyCode <= 39)) {\r\n                 // let it happen, don't do anything\r\n                 return;\r\n        }\r\n        // Ensure that it is a number and stop the keypress\r\n        if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {\r\n            e.preventDefault();\r\n        }\r\n      });\r\n    }\r\n\r\n    $plus.on('click', function(){\r\n      let value = parseInt($el.val().trim(),10);\r\n\r\n      if(value !== value) {\r\n        value = 0;\r\n      }\r\n\r\n      $el.val(value + 1);\r\n    });\r\n\r\n    $minus.on('click', function(){\r\n      let value = parseInt($el.val(),10);\r\n      \r\n      if(value !== value) {\r\n        value = 0;\r\n      }\r\n           \r\n      $el.val(value - 1);\r\n    });\r\n\r\n    $el.wrap('<div class=\"ma__input-number\"></div>');\r\n\r\n    $el.parent().append($plus,$minus);\r\n  });\r\n\r\n\r\n})(window,document,jQuery);\r\n","export default (function (window,document,$,undefined) {\r\n\r\n  $('form').each(function(){\r\n    let $form = $(this),\r\n        requiredFields = [],\r\n        $errorList = $form.find('.js-error-list');\r\n\r\n    // find all required fields\r\n    $('.js-is-required').each(function(){\r\n      let $field = $(this),\r\n          type = $field.data('type'),\r\n          value = $field.val(),\r\n          valid = validate(value,type);\r\n\r\n      requiredFields.push({type,valid,$el:$field});\r\n\r\n      $(this).data('index',requiredFields.length);\r\n    });\r\n\r\n    // if there aren't any required fields, don't do anything\r\n    if(requiredFields.length === 0) {\r\n      return;\r\n    }\r\n\r\n    // $form.on('submit', function(e){\r\n    //   e.preventDefault();\r\n    // });\r\n\r\n    $form.find('button[type=\"submit\"], input[type=\"submit\"]').on('click',function(e){\r\n      let submitForm = true;\r\n\r\n      // validate each required field\r\n      requiredFields.forEach(function(item) {\r\n        let value = item.$el.val();\r\n\r\n        item.valid = validate(value,item.type);\r\n\r\n        if(item.valid) {\r\n          clearError(item.$el);\r\n        } else {\r\n          submitForm = false;\r\n          addError(item.$el);\r\n        }\r\n      });\r\n\r\n      if(!submitForm) {\r\n        // prevent the form from submitting\r\n        e.preventDefault();\r\n        // show the form error message \r\n        $form.addClass('has-error');\r\n        // scroll up to the error message\r\n        let position = $form.offset();\r\n        \r\n        // scroll to the top of the form where the list of errors should be\r\n        // using 100px offset to compenstate for possible sticky headers\r\n        $(\"html,body\").stop(true,true).animate({scrollTop:position.top - 100}, '750', function(){\r\n          // bring focus to the item we just scrolled to\r\n          $errorList.focus();\r\n        });\r\n      }\r\n    });\r\n  });\r\n\r\n  // receives the jquery object of the input\r\n  function clearError($el){\r\n    $el.removeClass('has-error');\r\n    $el.prev('.ma__error-msg').removeClass('has-error');\r\n  }\r\n\r\n  // receives the jquery object of the input\r\n  function addError($el) {\r\n    $el.addClass('has-error');\r\n    $el.prev('.ma__error-msg').addClass('has-error');\r\n  }\r\n\r\n  function validate(value,type='text'){\r\n    let valid = false;\r\n\r\n    switch(type) {\r\n      case 'email':\r\n        valid = !!(value.match(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]+/i));\r\n        break;\r\n      default:\r\n        valid = value.length !== 0;\r\n    }\r\n\r\n    return valid;\r\n  }\r\n\r\n})(window,document,jQuery);\r\n","import getTemplate from \"../helpers/getHandlebarTemplate.js\";\r\n\r\nexport default (function (window,document,$,undefined) {\r\n  // Only run this code if there is a google map component on the page.\r\n  if(!$('.js-google-map').length || typeof ma.googleMapData === 'undefined'){\r\n    return;\r\n  }\r\n\r\n  // Initialize global (at component scope) map properties\r\n  let max = false, // Maximum number of map markers per map, can be updated instance\r\n    mapsInitialized = false; // Flag to set to trigger clearInterval(checkForGoogleMaps)\r\n\r\n  /**\r\n   * Test for presence of google maps default library (without geocode, places, etc.) until we find it.\r\n   * Loaded in _meta/_01.foot.twig with static api key\r\n   * @todo set up config to pull in dynamic api key\r\n   */\r\n  let checkForGoogleMaps = setInterval(function() {\r\n    if (window.google && window.google.maps && !mapsInitialized) {\r\n      initMaps();\r\n    }\r\n  }, 100);\r\n\r\n  // Stop checking for google maps library after 2 minutes.\r\n  let stopChecking = setTimeout(function() {\r\n    clearInterval(checkForGoogleMaps);\r\n  }, 2 * 60 * 1000);\r\n\r\n  // Clear out any potential HTML tags in text\r\n  function sanitizeText (potentialHTML) {\r\n    let d = document.createElement(\"div\");\r\n    d.innerHTML = potentialHTML;\r\n    return d.innerText;\r\n  }\r\n\r\n  // Initialize the map\r\n  function initMaps () {\r\n    // Stop checking for google maps library.\r\n    mapsInitialized = true;\r\n    clearInterval(checkForGoogleMaps);\r\n    clearTimeout(stopChecking);\r\n\r\n    $(\".js-google-map\").each(function(i) {\r\n      const $el = $(this);\r\n      max = ma.googleMapData[i].maxItems ? ma.googleMapData[i].maxItems : ma.googleMapData[i].markers.length;\r\n\r\n      // Get the maps data (this could be replaced with an api)\r\n      const rawData = ma.googleMapData[i]; // Data object created in @molecules/google-map.twig\r\n\r\n      // *** Create the Map *** //\r\n      // Map default config.\r\n      const initMapData = {\r\n        scrollwheel: false\r\n      };\r\n      // Create map data by combining the rawData with the defaults.\r\n      const mapData = Object.assign({}, rawData.map, initMapData);\r\n      // Create google map object assigned to this component instance with map data.\r\n      const map = new google.maps.Map(this, mapData);\r\n      // Initialize global markers, map bounds.\r\n      let bounds = new google.maps.LatLngBounds();\r\n      // Initialize all markers\r\n      let markers = initMarkers(map, rawData.markers);\r\n      // Add up to max markers to the map, zoom map to fit all bounds\r\n      addMarkersToMap(markers, map, bounds);\r\n\r\n      // Trigger map initialized event, broadcast master markers.\r\n      $el.trigger('ma:GoogleMap:MapInitialized', [markers]);\r\n\r\n      // Add keyboard navigation only after the map is rendered (becoming idle).\r\n      google.maps.event.addListenerOnce(map, 'idle', function() {\r\n        let $mapItems = $(\".js-google-map\").find(\r\n          'div[title=\"Show street map\"],' +\r\n          'div[title=\"Show street map with terrain\"],' +\r\n          'div[title=\"Show satellite imagery\"],' +\r\n          'div[title=\"Zoom in to show 45 degree view\"],' +\r\n          'div[title=\"Show imagery with street names\"],' +\r\n          'div[title=\"Pan up\"],' +\r\n          'div[title=\"Pan down\"],' +\r\n          'div[title=\"Pan left\"],' +\r\n          'div[title=\"Pan right\"],' +\r\n          'div[title=\"Return to the last result\"],' +\r\n          'div[title=\"Zoom in\"],' +\r\n          'div[title=\"Zoom out\"],' +\r\n          'img[title=\"Rotate map 90 degrees\"],' +\r\n          '.gmnoprint area'\r\n        );\r\n        $mapItems.each(function(i, o){\r\n          $(o).attr({\r\n            role: 'button',\r\n            tabindex: '0',\r\n            'aria-label': o.title\r\n          }).bind('keydown', function(ev){\r\n            // If enter is pressed on one of these elements, trigger a click of the element.\r\n            if (ev.which == 13){\r\n              ev.preventDefault();\r\n              $(o).trigger('click');\r\n            }\r\n          });\r\n        });\r\n      });\r\n\r\n      // Listen for map recenter event.\r\n      $el.on(\"ma:GoogleMap:MapRecenter\", function (event, markerIndex) {\r\n        if (typeof markers[markerIndex] === \"undefined\") {\r\n          return false;\r\n        }\r\n        let marker = markers[markerIndex];\r\n        // Close all open infoWindows.\r\n        for (let i in markers) {\r\n          if (markers[i].open) {\r\n            markers[i].hideInfo();\r\n          }\r\n        }\r\n        // Show the infoWindow for this marker.\r\n        marker.showInfo();\r\n      });\r\n\r\n      // Listen for map marker bounce event.\r\n      $el.on(\"ma:GoogleMap:MarkerBounce\", function( event, markerIndex ) {\r\n        if(typeof markers[markerIndex] === \"undefined\") {\r\n          return false;\r\n        }\r\n        let marker = markers[markerIndex];\r\n        // Make the marker bounce three times.\r\n        marker.bounce();\r\n      });\r\n\r\n      // Listen for data change event to update markers by filters.\r\n      $el.on(\"ma:GoogleMap:MarkersUpdated\", function (e, args) {\r\n        // Update map based on pre-sorted markers order\r\n        markers = updateMapByMarkers({\r\n          dataMarkers: args.markers,\r\n          map: map,\r\n          markers: markers,\r\n          place: args.place ? args.place : false\r\n        });\r\n\r\n        // Hide all info windows.\r\n        for (let i in markers) {\r\n          if(markers[i].open) {\r\n            markers[i].hideInfo();\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Returns the array of initialized current map markers.\r\n   *\r\n   * @param map\r\n   *  The current map object.\r\n   *\r\n   * @param markers\r\n   *  The markers to be initialized.\r\n   *\r\n   * @return {Array}\r\n   */\r\n  function initMarkers(map, markers) {\r\n    let initializedMarkers = [];\r\n    markers.forEach(function(data) {\r\n      let markerData = {\r\n        position: new google.maps.LatLng({\r\n          lat: data.position.lat,\r\n          lng: data.position.lng\r\n        }),\r\n        label: data.label,\r\n        infoWindow: data.infoWindow,\r\n        title: 'Marker: ' + sanitizeText(data.infoWindow.name)\r\n      };\r\n      let marker =  new google.maps.Marker(markerData);\r\n      let infoData = infoTransform(markerData.infoWindow);\r\n      let compiledTemplate = getTemplate('googleMapInfo');\r\n      let template = compiledTemplate(infoData);\r\n      let infoWindow = new google.maps.InfoWindow({\r\n        content: template\r\n      });\r\n      let markerBouncing = null;\r\n\r\n      marker.addListener('click', function(){\r\n        // hide all info windows\r\n        for (let i in initializedMarkers) {\r\n          if(initializedMarkers[i].open) {\r\n            initializedMarkers[i].hideInfo();\r\n          }\r\n        }\r\n\r\n        // show this info window\r\n        marker.showInfo();\r\n      });\r\n\r\n      marker.showInfo = () => {\r\n        infoWindow.open(map, marker);\r\n        marker.open = true;\r\n      };\r\n\r\n      marker.hideInfo = () => {\r\n        infoWindow.close(map, marker);\r\n        marker.open = false;\r\n      };\r\n\r\n      marker.bounce = () => {\r\n        clearTimeout(markerBouncing);\r\n        marker.setAnimation(null);\r\n        marker.setAnimation(google.maps.Animation.BOUNCE);\r\n        markerBouncing = setTimeout(() => {\r\n          marker.setAnimation(null);\r\n        }, 1500);\r\n      };\r\n\r\n      initializedMarkers.push(marker);\r\n    });\r\n\r\n    return initializedMarkers;\r\n  }\r\n\r\n  /**\r\n   * Return formatted marker infowindow data.\r\n   *\r\n   * @param data\r\n   *   Infowindow data object:\r\n   *   \"infoWindow\": {\r\n   *      \"name\": \"Attleboro District Court\",\r\n   *      \"phone\": \"15082225900\",\r\n   *      \"fax\": \"15082233706\",\r\n   *      \"email\": \"courts@state.ma.us\",\r\n   *      \"address\": \"88 North Main Street\\nAttleboro, MA 02703\"\r\n   *   }\r\n   *\r\n   * @returns {*}\r\n   *   Object with passed data and new infoData property.\r\n   */\r\n  function infoTransform(data) {\r\n    let infoData = {\r\n      phoneFormatted: formatPhone(data.phone),\r\n      faxFormatted: formatPhone(data.fax)\r\n    };\r\n    return Object.assign({},data,infoData);\r\n  }\r\n\r\n  /**\r\n   * Return phone number data formatted for map marker.\r\n   *\r\n   * @param phone\r\n   *   \"15082225900\",\r\n   * @returns {string}\r\n   *    (508) 222-5900\r\n   */\r\n  function formatPhone(phone) {\r\n    let phoneTemp = phone[0] === '1' ? phone.substring(1) : phone;\r\n    return phoneTemp.replace(/(\\d{3})(\\d{3})(\\d{4})/, '($1) $2-$3');\r\n  }\r\n\r\n  /**\r\n   * Location listing specific map helper functions\r\n   */\r\n\r\n\r\n  /**\r\n   * Renders a new map, with markers  reference to passed marker order and length.\r\n   *\r\n   * @param args\r\n   *  arguments object:\r\n   *    {\r\n   *      dataMarkers: args.markers, // sorted array of markers by witch to sort and filter master markers\r\n   *      map: map, // initialized map instance\r\n   *      markers: markers, // master list of current map markers\r\n   *      place: args.place, // optional location filter place input\r\n\r\n   *    }\r\n   */\r\n  function updateMapByMarkers(args) {\r\n    removeMarkersFromMap(args.markers);\r\n\r\n    // Reset bounds to remove previous search locations.\r\n    let bounds = new google.maps.LatLngBounds();\r\n    if (args.place && ma.autocomplete.getPlace()) {\r\n      // Ensure the map includes the provided location based on the place value.\r\n      bounds.extend(args.place.geometry.location);\r\n    }\r\n\r\n    // Add the new markers to the map and set new bounds based on filtered markers.\r\n    addMarkersToMap(args.dataMarkers, args.map, bounds);\r\n\r\n    // If there is only one marker, zoom out to provide some context.\r\n    if (args.dataMarkers.length === 1) {\r\n      args.map.setZoom(16);\r\n    }\r\n\r\n    return args.dataMarkers;\r\n  }\r\n\r\n  /**\r\n   * Removes passed marker objects from a given map.\r\n   *\r\n   * @param markers\r\n   *   Array of map marker objects.\r\n   */\r\n  function removeMarkersFromMap(markers) {\r\n    for(let i = 0; i < markers.length; i++){\r\n      markers[i].setMap(null);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds markers to a given map and sets bounds based on those markers.\r\n   *\r\n   * @param markers\r\n   *   Initialized map marker objects to be added.\r\n   * @param map\r\n   *   Initialized map object.\r\n   * @param bounds\r\n   *   Initialized map bounds object.\r\n   */\r\n  function addMarkersToMap(markers, map, bounds) {\r\n    // Set max number of markers to whichever is smaller: max or the number of markers sent.\r\n    let maxItems = markers.length < max ? markers.length : max;\r\n\r\n    markers.forEach(function(marker, index) {\r\n      if (index < maxItems) {\r\n        marker.setMap(map);\r\n        // Extend the bounds to include each marker's position.\r\n        bounds.extend(marker.position);\r\n      }\r\n    });\r\n\r\n    // Google Maps default behavior with a single marker when calling\r\n    // fitBounds() is to maximize zoom. This can be undesirable behavior.\r\n    // If only a single marker, let mapData define center and zoom.\r\n    if (markers.length > 1) {\r\n      // Make the map zoom to fit the bounds, showing all locations.\r\n      map.fitBounds(bounds);\r\n    }\r\n  }\r\n\r\n})(window,document,jQuery);\r\n","export default (function (window,document,$,undefined) {\n  \"use strict\";\n\n  $('.js-header-tag-link').each(function(index) {\n\n    let $el = $(this),\n        $showHideButton = $('.js-header-tag-button', $el),\n        $dynamicItems = $('a:nth-child(n+4)', $el),\n        id = $el.attr('id') || 'headerTags' + (index + 1),\n        open = $el.hasClass('is-open');\n\n      // Set the id attribute (respects default if set).\n      $el.attr('id', id);\n\n      if ($dynamicItems.length) {\n        // Show our see button if we have more than three items.\n        $showHideButton.attr('aria-expanded',open).attr('aria-controls', id);\n        $showHideButton.show();\n      }\n\n      $showHideButton.on('click', function(e) {\n        e.preventDefault();\n        $el.toggleClass('is-open');\n\n        if ($el.hasClass('is-open')) {\n          $showHideButton.attr('aria-expanded', 'true');\n          $dynamicItems.show();\n        }\n        else {\n          $showHideButton.attr('aria-expanded', 'false');\n          $dynamicItems.hide();\n        }\n      });\n  });\n\n  $('.ma__relationship-indicators--terms').each(function() {\n    let $tagWrapper = $(this);\n    let $button = $tagWrapper.find('.js-relationship-indicator-button');\n    let $buttonCounter = $button.find('.tag-count');\n    let $hiddenTag = $tagWrapper.find('.ma__relationship-indicators--term:hidden');\n    let tagCount = $hiddenTag.length;\n    let $tagState = $button.find('.tag-state');\n\n    // If hidden  tags exist, show button.\n    if (tagCount) {\n      $button.toggle();\n    }\n\n    // Use hidden tags to populate button label.\n    $buttonCounter.text(tagCount);\n\n    $button.on('click', function() {\n      let $tagStateText = $tagState.text();\n\n      // Open hidden tags.\n      $tagWrapper.parent().toggleClass('tags-open');\n      $button.toggleClass('is-open');\n      $hiddenTag.toggle();\n\n      // Change button text.\n      $tagState.text($tagStateText === 'fewer' ? 'more' : 'fewer');\n    });\n\n    $(window).resize(function () {\n      // Remove all the screen width specific styles.\n      $buttonCounter.removeAttr('style');\n      $hiddenTag.removeAttr('style');\n\n      setTimeout(function(){\n        let windowWidth = $(window).width();\n        \n        // recount the hidden tags.\n        $hiddenTag = $tagWrapper.find('.ma__relationship-indicators--term:hidden');\n        tagCount = $hiddenTag.length;\n\n        // Update button text.\n        $buttonCounter.text(tagCount);\n        $tagState.text('more');\n        \n        // Reset the button visibility.\n        if(tagCount >= 1 && windowWidth < 910) {\n          $button.show();\n        } \n        else if (tagCount == 0) {\n          $button.hide();\n        }\n        \n      }, 500);\n\n    });\n\n  });\n\n})(window,document,jQuery);\n","import cookies from \"../helpers/cookies.js\";\r\n\r\nexport default (function (window,document,$,undefined) {\r\n\r\n  $('.js-header-alert').each(function(){\r\n    init.apply(this);\r\n  });\r\n\r\n  $(document).on('ma:AjaxPattern:Render', function(e,data){\r\n    let $context = data.el;\r\n    if ($context.find('.js-header-alert').length) {\r\n      $context.find('.js-header-alert').each(function(){\r\n        init.apply(this);\r\n      })\r\n    }\r\n  });\r\n\r\n  function init(){\r\n    let $el = $(this),\r\n        $link = $el.find('.js-header-alert-link'),\r\n        id = $el.data('id'),\r\n        cookieName = \"Alert\" + id,\r\n        cookieExpires = 365,\r\n        cookieValue = cookies.getCookie(cookieName);\r\n\r\n    // show alert if cookie doesn't exist\r\n    if(cookieValue !== \"hide\") {\r\n      $el.fadeIn().fadeOut('fast').fadeIn('slow');\r\n    }\r\n\r\n    // hide the alert\r\n    $link.on('click',function(){\r\n      cookies.setCookie(cookieName,\"hide\",cookieExpires);\r\n      $el.stop(true,true).fadeOut();\r\n    })\r\n  }\r\n})(window,document,jQuery);\r\n\r\n","export default (function (window,document,$,undefined) {\n\n  const sidebarHeight = $('.sidebar').outerHeight( true ) + 100;\n  // Set height of sidebar plus 100 pixels so full width images\n  // don't sit too tight under under the sidebar content.\n  let debounceTimer;\n\n  function mediaWidth() {\n    // Define wrapper width for use.\n    var wrapperWidth = $('.main-content').width();\n\n    $('.ma__figure--full, .ma__iframe--full').each(function() {\n      var $thisMedia = $(this);\n\n      // Get position of image relative to container.\n      var thisPosition = $thisMedia.position().top;\n\n      // If this image is below the sidebar.\n      if (thisPosition > sidebarHeight) {\n\n        // Make the image the full width of the wrapper.\n        $thisMedia.css('width', wrapperWidth);\n      }\n    });\n  }\n\n  $(window).on('load', function() {\n    mediaWidth();\n  });\n\n  $(window).resize(function() {\n    if(typeof debounceTimer === \"number\") {\n      window.clearTimeout(debounceTimer);\n    }\n    debounceTimer = window.setTimeout(function(){\n      mediaWidth();\n    },250);\n  });\n\n})(window,document,jQuery);\n","\nexport default (function (window,document,$,undefined) {\n  let tocContainerClass = '.js-toc-container';\n  let containerClass = '.js-inline-overlay';\n  let contentClass = '.js-inline-overlay-content';\n  let toggleClass = '.js-inline-overlay-toggle';\n  let titleClass  = '.js-inline-overlay-title';\n\n  function initialize () {\n    // Add random ID if no ID present.\n    let contentID = $(contentClass).attr('id');\n    if(!contentID) {\n      let id = `overlay-${Math.floor(Math.random()*100000)}`;\n       $(containerClass).attr('id', id);\n       $(toggleClass).attr('aria-controls, id');\n    }\n  }\n\n  function toggleOverlay() {\n    let $containerEl = $(this).closest(tocContainerClass).find(containerClass);\n    let isOpen = $containerEl.hasClass('is-open');\n    $('body').toggleClass('scroll-disabled', !isOpen);\n    $containerEl.toggleClass('is-open', !isOpen);\n\n    $(`${toggleClass}[aria-expanded=${!isOpen}]`).parents(titleClass).focus();\n  }\n\n  initialize();\n  $(document).on('click', toggleClass, toggleOverlay);\n  // allow esc key to dismiss overlay\n  $(document).keydown(function(e) {\n    // ESCAPE key pressed\n    if (e.keyCode === 27 && $(containerClass).hasClass('is-open')) {\n      toggleOverlay();\n    }\n  });\n\n\n})(window,document,jQuery);\n","export default (function (window,document,$,undefined) {\r\n\r\n  $('.js-keyword-search').each(function(){\r\n    let $el = $(this),\r\n        $form = $el.find('form');\r\n\r\n    $form.on('submit',function(e){\r\n      e.preventDefault();\r\n      $el.addClass('is-dirty')\r\n    });\r\n\r\n    $form.on('reset',function(){\r\n      $el.removeClass('is-dirty')\r\n    });\r\n  });\r\n\r\n})(window,document,jQuery);\r\n","export default (function (window,document,$,undefined) {\n\n  $('.ma__link-list--image-blocks, .ma__link-list--image-links').each(function() {\n\n    const $thisList = $(this).find('.ma__link-list__items'),\n    $thisToggle = $(this).find('.ma__link-list__toggle'),\n    $thisToggleLabel = $thisToggle.find('span'),\n    $listItem = $thisList.children(),\n    listItems = $listItem.length;\n\n    let debounceTimer;\n\n    function showToggle() {\n      let width = $(window).width();\n\n      if ((listItems > 3) && (width < 780) || (listItems > 6) && (width < 1201)) {\n        // Show More button only when there are enough to toggle.\n        $thisToggle.addClass('show-toggle');\n      }\n      else {\n        $thisToggle.removeClass('show-toggle');\n      }\n    }\n    showToggle();\n\n    $thisToggle.on('click', function() {\n\n      let thisToggleText = $thisToggleLabel.text();\n      $thisToggle.toggleClass('toggle-open');\n      $thisToggleLabel.text(thisToggleText === \"less\" ? \"more\" : \"less\");\n\n      $listItem.each(function() {\n        let $item = $(this);\n\n        if ($item.is(':hidden')) {\n          $item.slideDown().addClass('toggle-open');\n        }\n        else if ($item.is(':visible') && $item.hasClass('toggle-open')) {\n          $item.slideUp().removeClass('toggle-open');\n        }\n      });\n    });\n\n    $(window).resize(function () {\n\n      if(typeof debounceTimer === \"number\") {\n        window.clearTimeout(debounceTimer);\n      }\n      debounceTimer = window.setTimeout(function(){\n        showToggle();\n\n        // Remove added attributes at desktop width.\n        if ($(window).width() < 1201) {\n          $thisToggle.removeAttr('style');\n          $listItem.removeAttr('style');\n        }\n      },150);\n    });\n  });\n\n})(window,document,jQuery);","export default (function (window,document,$,undefined) {\n  $('.js-location-filters').each(function() {\n    let $el = $(this);\n\n    let $resultHeading = $('.js-results-heading'),\n      $clearAllButton = '.js-results-heading-clear', // events triggered on parent\n      $filterButton = '.js-results-heading-tag'; // events triggered on parent\n\n    // When google map libraries are loaded, initialize places.autocomplete on the location input, if it exists.\n    $(document).on('ma:LibrariesLoaded:GoogleMaps', function() {\n      let $locationFilterParent = $('.js-filter-by-location', $el);\n      let $locationFilter = $locationFilterParent.find('input');\n      if ($locationFilter.length) {\n        // Create the google places autocomplete object and associate it with the zip code text input.\n        let locationInput = document.getElementById($locationFilter.attr('id'));\n        let swLat = $locationFilterParent.data('maPlaceBoundsSwLat');\n        let swLng = $locationFilterParent.data('maPlaceBoundsSwLng');\n        let neLat = $locationFilterParent.data('maPlaceBoundsNeLat');\n        let neLng = $locationFilterParent.data('maPlaceBoundsNeLng');\n\n        let defaultBounds = new google.maps.LatLngBounds(new google.maps.LatLng(swLat,swLng), new google.maps.LatLng(neLat,neLng));\n\n        // See options: https://developers.google.com/maps/documentation/javascript/places-autocomplete#add_autocomplete\n        let options = {\n          bounds: defaultBounds,\n          strictBounds: true,\n          types: ['geocode'],\n          componentRestrictions: {country: 'us'},\n          placeIdOnly: true\n        };\n        ma.autocomplete = new google.maps.places.Autocomplete(locationInput, options);\n      }\n\n      populateFormData($el, false);\n    });\n\n    // Listen for clear all button click + trigger interaction event on parent.\n    $resultHeading.on('click', $clearAllButton, function () {\n      $resultHeading.trigger('ma:ResultsHeading:ActiveTagClicked', [{clearedFilter: 'all'}]);\n      $el.trigger('ma:FormFilter:DataUpdated', {$form: $el, clearedFilter: 'all'});\n      populateFormData($el, true);\n    });\n\n    // Listen for single filter button click and trigger interaction event on parent.\n    $resultHeading.on('click', $filterButton, function (e) {\n      let clearedFilter = {\n        'type': $(e.target).data('ma-filter-type'),\n        'value': $(e.target).data('ma-filter-value'),\n        'text': $(e.target).text()\n      };\n\n      $resultHeading.trigger('ma:ResultsHeading:ActiveTagClicked', [{clearedFilter: clearedFilter}]);\n      $el.trigger('ma:FormFilter:DataUpdated', {$form: $el, clearedFilter: clearedFilter});\n      populateFormData($el, true);\n    });\n\n    // Listen for new data from another component interaction (i.e. results heading), update form.\n    $el.on('ma:FormFilter:DataUpdated', function(e, data) {\n      renderForm({clearedFilter: data.clearedFilter, $form: $el});\n    });\n\n    // Handle global form submission.\n    $el.submit(function(e) {\n      e.preventDefault();\n\n      // Update master data with the various filter values.\n      populateFormData($el, true);\n    });\n\n  });\n\n  function populateFormData($el, isFormSubmit) {\n    let formData = getFormData({$form: $el});\n\n    if (!isFormSubmit) {\n      let location = getParameterFromUrl('location');\n      let $location = $el.find('.js-filter-by-location');\n\n      // Set the location from the URL.\n      $location.find('input').val(location);\n\n      // Build the form data from the URL params.\n      formData = [];\n\n      // Get location data from URL.\n      if (location) {\n        formData.push({\n          type: 'location',\n          text: location,\n          value: location\n        });\n      }\n\n      let $tags = $el.find('.js-filter-by-tags');\n      let tags = getParameterFromUrl('tags');\n      if (tags) {\n        let splitTags = tags.split(',');\n        splitTags.forEach((tag) => {\n          if (tag) {\n            tag = tag.split(':');\n            formData.push({\n              type: 'tag',\n              text: tag[1],\n              value: tag[0]\n            });\n            $tags.find('input[type=checkbox][value=' + tag[0] + ']').prop('checked', true);\n          }\n        });\n      }\n    }\n\n    pushFilterState(formData, isFormSubmit);\n\n    // Trigger location listing filter event with current filter values.\n    $el.trigger('ma:LocationFilter:FiltersUpdated', [{formData: formData}, isFormSubmit]);\n  }\n\n  function renderForm(args) {\n    let clearedFilter = args.clearedFilter;\n    // The clear all button was pressed.\n    if (clearedFilter === \"all\") {\n      clearForm(args);\n    }\n    // Single filter button was pressed.\n    else {\n      clearDeactivatedFilter(args);\n    }\n  }\n\n  function getParameterFromUrl(param) {\n    let params = new URLSearchParams(window.location.search);\n    return params.get(param);\n  }\n\n  function getFormData(args) {\n    let $form = $(args.$form),\n      $location = $form.find('.js-filter-by-location'),\n      $tags = $form.find('.js-filter-by-tags'),\n      formData = [];\n\n    // Get location\n    if ($location.find('input').length) {\n      let place = $location.find('input').val();\n      if (place) {\n        formData.push({\n          type: 'location',\n          text: place,\n          value: place\n        });\n      }\n    }\n\n    $tags.find('input:checked').each(function() {\n      formData.push({'type': 'tag', 'value': $(this).val(), 'text': $(this).siblings(\"label\").text()});\n    });\n\n    return formData;\n  }\n\n  function clearDeactivatedFilter(args) {\n    let $form = $(args.$form),\n      $place = $form.find('.js-filter-by-location'),\n      $tags = $form.find('.js-filter-by-tags'),\n      clearedFilter = args.clearedFilter;\n\n    // If the cleared filter button was for a location filter.\n    if (clearedFilter.type === 'location') {\n      $place.find('input').val(\"\");\n      return;\n    }\n\n    // If the cleared filter button was for a tag filter.\n    if (clearedFilter.type === 'tag') {\n      $tags.find('input[type=checkbox][value=' + clearedFilter.value + ']').prop('checked', false);\n    }\n  }\n\n  function clearForm(args) {\n    let $form = $(args.$form),\n      $tags = $('.js-filter-by-tags', $form),\n      $place = $('.js-filter-by-location', $form).find('input');\n\n    // Clear location text input.\n    if ($place.length) {\n      $place.val(\"\");\n    }\n    // Uncheck all checked tags inputs.\n    $tags.find('input:checked').prop('checked', false);\n  }\n\n  function pushFilterState(filters, isFormSubmit) {\n    let params = new URLSearchParams(window.location.search);\n    let pageNum = params.get('page');\n\n    if (isFormSubmit) {\n      pageNum = 1;\n      params.set('page', pageNum);\n    }\n\n    params.delete('location');\n    params.delete('tags');\n\n    if (filters.length) {\n      let tagFilters = [];\n      filters.forEach((filter) => {\n        if (filter.type === 'location') {\n          params.set('location', filter.value);\n        }\n        if (filter.type === 'tag') {\n          tagFilters.push(filter.value + ':' + filter.text);\n        }\n      });\n\n      params.set('tags', tagFilters.join(','));\n    }\n\n    history.pushState(\n      { page: pageNum },\n      `${document.title} | page ${pageNum}`, `${window.location.origin}${window.location.pathname}?${params.toString()}`\n    );\n  }\n\n})(window,document,jQuery);\n","import sticky from \"../helpers/sticky.js\";\nimport listings from \"../helpers/listing.js\";\n\nexport default (function (window, document, $) {\n  // Active state classes for location listing rows.\n  let activeClass = \"is-active\",\n    markerActiveClass = \"is-marker-bounce\",\n    // Selectors for event listeners on dynamic content.\n    row = \".js-location-listing-link\",\n    activeLocationListingRow = row + \".\" + activeClass,\n    markerActiveLocationListingRow = row + \".\" + markerActiveClass,\n    // Parent component selectors.\n    container = \".js-location-listing-results\",\n    parent = \".js-image-promos\",\n    mapCol = \".js-location-listing-map\";\n\n  $(\".js-location-listing\").each(function (i) {\n    let $el = $(this),\n      $mapCol = $el.find(\".js-location-listing-map\"),\n      $map = $el.find(\".js-google-map\"),\n      $resultsHeading = $el.find(\".js-results-heading\"),\n      $pagination = $el.find(\".js-pagination\"),\n      $locationFilter = $el.find(\".js-location-filters\");\n\n    sticky.init($mapCol);\n\n    // Get the location listing component data (this could be replaced with an api)\n    const rawData = ma.locationListing[i]; // Data object created in @organisms/by-author/location-listing.twig\n\n    let masterData = []; // master data structure to preserve state\n    // Listen for map initialization, populate master data structure using locationListing, map markers.\n    $map.on(\"ma:GoogleMap:MapInitialized\", function (e, markers) {\n      masterData = populateMasterDataSource(rawData, markers); // to preserve state\n    });\n\n    // Listen for Google Map api library load completion, with geocode, geometry, and places libraries\n    $(document).on(\"ma:LibrariesLoaded:GoogleMaps\", function () {\n      // Set up click handler for location listing rows.\n      $el.on(\"click\", row, function (e) {\n        // If the link has an href, allow the normal link functionality\n        // and exit event handler.\n        if (e.target.href) {\n          e.stopImmediatePropagation();\n          return;\n        }\n\n        let index = $(e.currentTarget).index();\n\n        // Trigger map to recenter on this item based on it's index.\n        $map.trigger(\"ma:GoogleMap:MapRecenter\", index);\n\n        // Mark this link as active.\n        $el.find(activeLocationListingRow).removeClass(activeClass);\n        // In case the event is triggered on a child element.\n        $(e.currentTarget).addClass(activeClass);\n      });\n\n      // Set up hover / focus event for listing rows.\n      $el.on(\"mouseenter focusin\", row, function (e) {\n        // Remove active state from previously selected list item.\n        $el.find(activeLocationListingRow).removeClass(activeClass);\n\n        // Remove \"focus\" class from any \"focused\" location listing row.\n        // (\"focus\" vs focus because hover doesn't bring focus to element.)\n        $el.find(markerActiveLocationListingRow).removeClass(markerActiveClass);\n\n        // Focus moved into listing for first time, so flag with class, recenter + bounce marker.\n        $(e.currentTarget).addClass(markerActiveClass);\n        let index = $(e.currentTarget).index();\n\n        // Trigger map to recenter on this item and make the marker bounce\n        $map.trigger(\"ma:GoogleMap:MarkerBounce\", index);\n      });\n\n      // Remove \"focus\" class from any \"focused\" location listing row.\n      $el.on(\"mouseleave\", row, function (e) {\n        $el.find(markerActiveLocationListingRow).removeClass(markerActiveClass);\n      });\n\n      // Handle location listings form interaction (triggered by locationFilters.js).\n      $locationFilter.on(\"ma:LocationFilter:FiltersUpdated\", function (e, formValues, resetValues) {\n        // Only update things if masterData contains data.\n        if (masterData.items && masterData.items.length > 0) {\n          // transformData() returns a jQuery deferred object which allows us to wait for any asynchronous js execution to return before executing the .done(callback).\n          // @see: https://api.jquery.com/deferred.done/\n          transformData(masterData, formValues).done(function (transformation) {\n            let page = 1;\n            if (!resetValues) {\n              page = parseInt(getPage(), 10);\n            }\n            masterData = transformation.data; // preserve state\n            // Update the results heading based on the current items state.\n            transformation.data.resultsHeading = listings.transformResultsHeading({\n              data: transformation.data,\n              page: page\n            });\n            // Update pagination data structure, reset to first page\n            transformation.data.pagination = listings.transformPaginationData({\n              data: transformation.data,\n              targetPage: page\n            });\n            // Render the listing page.\n            listings.renderListingPage({data: transformation.data, page: page});\n            // Get the associated markers based on the listing items.\n            transformation.markers = getActiveMarkers({data: transformation.data, page: page});\n            // Trigger child components render with updated data\n            updateChildComponents(transformation);\n          });\n        }\n      });\n\n      // Handle active filter/tag button interactions (triggered by resultsHeading.js).\n      $resultsHeading.on(\"ma:ResultsHeading:ActiveTagClicked\", function (e, clearedFilter) {\n        // transformData() returns a jQuery deferred object which allows us to wait for any asynchronous js execution to return before executing the .done(callback).\n        // @see: https://api.jquery.com/deferred.done/\n        transformData(masterData, clearedFilter).done(function (transformation) {\n          masterData = transformation.data; // preserve state\n          transformation.clearedFilter = clearedFilter;\n\n          masterData = transformation.data; // preserve state\n          // Update the results heading based on the current items state.\n          transformation.data.resultsHeading = listings.transformResultsHeading({ data: transformation.data });\n          // Update pagination data structure, reset to first page\n          transformation.data.pagination = listings.transformPaginationData({ data: transformation.data });\n          // Render the listing page.\n          listings.renderListingPage({ data: transformation.data });\n          // Get the associated markers based on the listing items.\n          transformation.markers = getActiveMarkers({ data: transformation.data });\n          // Trigger child components render with updated data\n          updateChildComponents(transformation);\n        });\n      });\n\n      function handlePagination(e, target) {\n        let nextPage = parseInt(target, 10);\n        // If this is happening during page load, e will be null, and focus should not be updated.\n        let focus = !!e;\n\n        masterData.pagination = listings.transformPaginationData({ data: masterData, targetPage: nextPage });\n        masterData.resultsHeading = listings.transformResultsHeading({ data: masterData, page: nextPage });\n        listings.renderListingPage({ data: masterData, page: nextPage, focus });\n\n        let markers = getActiveMarkers({ data: masterData, page: nextPage });\n        // Trigger child components render with updated data\n        updateChildComponents({ data: masterData, markers: markers });\n      }\n\n      function getPage() {\n        let defaultPage = 1;\n        let params = new URLSearchParams(window.location.search);\n        if (history.state) {\n          defaultPage = history.state.page;\n        }\n        if (params) {\n          defaultPage = params.get(\"_page\");\n        }\n        return defaultPage;\n      }\n\n      // Handle pagination event (triggered by pagination.js), render targetPage.\n      $pagination.on(\"ma:Pagination:Pagination\", handlePagination);\n      let defaultPage = getPage();\n\n      handlePagination(null, defaultPage);\n    });\n\n    // Trigger events to update child components with new data.\n    function updateChildComponents(args) {\n      $resultsHeading.trigger(\"ma:ResultsHeading:DataUpdated\", [args.data.resultsHeading]);\n      $map.trigger(\"ma:GoogleMap:MarkersUpdated\", [{ markers: args.markers, place: args.place }]);\n      $pagination.trigger(\"ma:Pagination:DataUpdated\", [args.data.pagination]);\n      if (args.clearedFilter) {\n        $locationFilter.trigger(\"ma:FormFilter:DataUpdated\", [args.clearedFilter]);\n      }\n    }\n  });\n\n  /**\n   * Data initialization.\n   */\n\n  /**\n   * Returns a master data structure with page level / listing item level data and markup, to reflect component state.\n   *\n   * @param listing\n   *   The locationListing data structure to use as a source\n   * @param markers\n   *   The array of map markers created by component google map (googleMaps.js module)\n   * @returns {Array}\n   *   An array with the following structure:\n   *    [\n   *      maxItems: the max number of items to show per listing \"page\" if provided, defaults to all\n   *      totalPages: the number of pages of items that should render, given the current filters\n   *      resultsHeading: the data structure necessary to render a resultsHeading component\n   *      items: an array of listing items [\n   *        isActive: whether or not the listing should be shown, given current filters state\n   *        page: the page that the listing, if active, will appear on, given the current sort order\n   *        promo: the data structure for the imagePromo component\n   *        markup: the compiled imagePromo markup\n   *        marker: the related map marker data structure for the listing item\n   *      ]\n   *      pagination: the data structure necessary to render a pagination component\n   *      selectors: the selectors for the listing, listing items, listing row, and map\n   *    ]\n   */\n  function populateMasterDataSource(listing, markers) {\n    // Populate master data structure\n    let masterData = [];\n\n    // Ensure locationListing.imagePromos.items is an array (the twig template json_encode()'s a php array)\n    let promosArray = [];\n    $.map(listing.imagePromos.items, function (val, index) { promosArray[index] = val; });\n    listing.imagePromos.items = promosArray;\n\n    // Ensure locationListing.pagination.pages is an array (the twig template json_encode()'s a php array)\n    let pages = [];\n    $.map(listing.pagination.pages, function (val, index) { pages[index] = val; });\n    listing.pagination.pages = pages;\n\n\n    let masterListing = listing.imagePromos.items;\n\n    let masterListingMarkup = listings.transformListing(masterListing, \"locationListingRow\");\n    // The max number of items per page, if designated in locationListing data structure, else all\n    masterData.maxItems = listing.maxItems ? listing.maxItems : listing.imagePromos.items.length;\n    // The initial results heading data structure\n    masterData.resultsHeading = listing.resultsHeading;\n    // The array of items and their respective page, in/active status, marker data, imagePromo data, and markup\n    masterData.items = getMasterListingWithMarkupAndMarkers(masterListing, masterListingMarkup, markers, masterData.maxItems);\n    // The initial pagination data structure;\n    masterData.pagination = listing.pagination;\n    // The total number of pages, given the number of items and the maxItems variable\n    masterData.totalPages = Math.ceil(masterData.items.length / masterData.maxItems);\n    // Set the selector properties necessary to render\n    masterData.selectors = {};\n    masterData.selectors.container = container;\n    masterData.selectors.parent = parent;\n    masterData.selectors.row = row;\n    masterData.selectors.map = mapCol;\n\n    return masterData;\n  }\n\n  /**\n   * Creates the master data structure items array\n   *\n   * @param listing\n   *   The locationListing data structure\n   * @param markup\n   *   The generated array of item markup\n   * @param markers\n   *   The associated map markers for each item\n   * @param max\n   *   The maximum number of items per page\n   * @returns {Array}\n   *  An array of listing items with the following structure:\n   *  [\n   *      isActive: whether or not the listing should be shown, given current filters state\n   *      page: the page that the listing, if active, will appear on, given the current sort order\n   *      promo: the data structure for the imagePromo component\n   *      markup: the compiled imagePromo markup\n   *      marker: the related map marker data structure for the listing item\n   *   ]\n   */\n  function getMasterListingWithMarkupAndMarkers(listing, markup, markers, max) {\n    let items = [];\n    markers.forEach(function (item, index) {\n      items[index] = {\n        isActive: true, // @todo consider checking for this in case of server side preprocessing of state\n        page: Math.ceil((index + 1) / max),\n        marker: item,\n        markup: markup[index],\n        data: listing[index]\n      };\n    });\n    return items;\n  }\n\n  /**\n   * Data transformation.\n   */\n\n  /**\n   * The main data transformation wrapper, returns an instance of masterData which reflects the component state.\n   *\n   * @param data\n   *  An instance of masterData to start from.\n   * @param transformation\n   *  An object representing the change in state (locationFilter form data, resultsHeading tag interaction, etc.)\n   *\n   * @returns {{data: *, markers: *}}\n   *  An object with the current state masterData instance and an array of their related sorted markers to send to map.\n   */\n  function transformData(data, transformation) {\n    // This data transformation potentially involves asynchronous google geocoding.\n    // This jQuery deferered object allows us to wait for a return before moving on inside of the parent function (which invokes this function).\n    // @see https://api.jquery.com/jquery.deferred/\n    let promise = $.Deferred();\n    let transformReturn = {};\n\n    // First filter the data based on component state, then sort alphabetically by default.\n    let filteredData = listings.filterListingData(data, transformation),\n      sortedData = listings.sortDataAlphabetically(filteredData),\n      place = \"\";\n\n    // Sort data by location, if that filter is present.\n    if (listings.hasFilter(filteredData.resultsHeading.tags, \"location\")) {\n      place = listings.getFilterValues(filteredData.resultsHeading.tags, \"location\")[0]; // returns array\n      // If place argument was selected from the locationFilter autocomplete (initiated on the zipcode text input).\n      let autocompletePlace = ma.autocomplete.getPlace();\n      // Geocode the address, then sort the markers and instance of locationListing masterData.\n      ma.geocoder = ma.geocoder ? ma.geocoder : new google.maps.Geocoder();\n      if (typeof autocompletePlace !== \"undefined\" && autocompletePlace.hasOwnProperty(\"place_id\")) {\n        // This is an asynchronous function\n        listings.geocodePlaceId(autocompletePlace.place_id, function (result) {\n          transformReturn.data = sortDataAroundPlace(result, filteredData);\n          transformReturn.geocode = result;\n          // Return the data sorted by location and the geocoded place object\n          promise.resolve(transformReturn);\n        });\n      }\n      // If place argument was populated from locationFilter (zipcode text input) but not from Place autocomplete.\n      else {\n        // This is an asynchronous function\n        listings.geocodeAddressString(place, function (result) {\n          transformReturn.data = sortDataAroundPlace(result, filteredData);\n          transformReturn.geocode = result;\n          // Return the data sorted by location and the geocoded place object\n          promise.resolve(transformReturn);\n        });\n      }\n    }\n    else {\n      // Return the data sorted by alphabet and the empty place object\n      promise.resolve({ data: sortedData, place: place });\n    }\n\n    return promise;\n  }\n\n  /**\n   * Returns the markers which correspond to a given \"page\" of location listing data.\n   *\n   * @param args\n   *  An object with the following structure:\n   *    {\n   *      data: instance of filtered, sorted masterData off of which to base markers\n   *      page: the target page of items/markers to render\n   *    }\n   *\n   * @returns\n   *   An array of corresponding map marker objects which should be rendered\n   */\n  function getActiveMarkers(args) {\n    let data = args.data,\n      page = args.page ? args.page : 1; // default to first page if non provided\n\n    // Get just the markers from our active sorted/filtered data listing.\n    return data.items.filter(function (item) {\n      return item.isActive && item.page === page;\n    }).map(function (item) {\n      return item.marker;\n    });\n  }\n\n  /**\n   * Returns instance of location listing masterData, sorted proximity to place.\n   *\n   * @param geocode\n   *   The geocode information by which to sort.\n   * @param data\n   *   The instance of location listing masterData.\n   * @returns {*}\n   *   Sorted instance of location listing masterData.\n   */\n  function sortDataAroundPlace(geocode, data) {\n    // Get all existing marker distance from place, assign as marker property.\n    for (let key in data.items) {\n      if (data.items.hasOwnProperty(key)) {\n        data.items[key].marker.distance = google.maps.geometry.spherical.computeDistanceBetween(geocode.geometry.location, data.items[key].marker.getPosition());\n      }\n    }\n\n    // Sort existing markers by closest to the place.\n    data.items.sort(function (a, b) {\n      return a.marker.distance - b.marker.distance;\n    });\n\n    // Update each location listing item's page number based on new marker sort order.\n    let paginated = listings.paginateItems(data.items, data.maxItems);\n    data.items = paginated.items;\n    data.totalPages = paginated.totalPages;\n    data.place = geocode;\n\n    // Return the newly sorted instance of location listing masterData.\n    return data;\n  }\n}) (window, document, jQuery);\n","export default (function (window,document,$,undefined) {\r\n\r\n  let windowWidth = window.innerWidth;\r\n\r\n  $(window).resize(function(){\r\n    windowWidth = window.innerWidth;\r\n  });\r\n\r\n  $('.js-main-nav').each(function() {\r\n    let openClass = \"is-open\",\r\n        closeClass = \"is-closed\",\r\n        submenuClass = \"show-submenu\",\r\n        $parent = $(this),\r\n        $mainNavToggle = $parent.find('.js-main-nav-toggle'),\r\n        $mainNavItems = $parent.find('.js-main-nav-toggle, .js-main-nav-top-link'),\r\n        breakpoint = 840; // matches CSS breakpoint for Main Nav\r\n\r\n    $mainNavItems.on('keydown', function(e) {\r\n      // Grab all the DOM info we need...\r\n      let $link = $(this),\r\n          $topLevelLinks = $parent.find('.ma__main-nav__top-link'),\r\n          open = $link.hasClass(openClass),\r\n          $openContent = $parent.find('.js-main-nav-content.' + openClass),\r\n          $focusedElement = $(document.activeElement),\r\n          menuFlipped = (windowWidth < breakpoint),\r\n      // relevant if open..\r\n          $topLevelItem = $focusedElement.parents('.ma__main-nav__item'),\r\n          $topLevelLink = $topLevelItem.find('.ma__main-nav__top-link'),\r\n          $dropdownLinks = $link.find('.ma__main-nav__subitem .ma__main-nav__link'),\r\n          dropdownLinksLength = $dropdownLinks.length,\r\n          focusIndexInDropdown = $dropdownLinks.index($focusedElement),\r\n      // Easy access to the key that was pressed.\r\n          keycode = e.keyCode,\r\n          action = {\r\n            'skip': keycode === 9,\r\n            'close': keycode === 27,\r\n            'left': keycode === 37,\r\n            'right': keycode === 39,\r\n            'up': keycode === 38,\r\n            'down': keycode === 40\r\n          };\r\n\r\n      // Default behavior is prevented for all actions except 'skip'.\r\n      if (action.close || action.left || action.right || action.up || action.down) {\r\n        e.preventDefault();\r\n      }\r\n\r\n      // Skip out of the menu and close any currently-open submenus.\r\n      if(action.skip) {\r\n        hide($openContent);\r\n        $link.removeClass(openClass);\r\n        $topLevelLink.attr('aria-expanded','false');\r\n        return;\r\n      }\r\n\r\n      // Navigate into or within a submenu. This is needed on up/down actions\r\n      // (unless the menu is flipped and closed) and when using the right arrow\r\n      // while the menu is flipped and submenu is closed.\r\n      if(((action.up || action.down) && !(menuFlipped && !open))\r\n        || (action.right && menuFlipped && !open)) {\r\n        // Open pull down menu if necessary.\r\n        if (!open) {\r\n          show($topLevelItem.find('.js-main-nav-content'));\r\n          $topLevelLink.attr('aria-expanded', 'true');\r\n          $link.addClass(openClass);\r\n        }\r\n\r\n        // Adjust index of active menu item based on performed action.\r\n        focusIndexInDropdown += (action.up ? -1 : 1);\r\n        // If the menu is flipped, skip the last item in each submenu. Otherwise,\r\n        // skip the first item. This is done by repeating the index adjustment.\r\n        if(menuFlipped) {\r\n          if(focusIndexInDropdown === dropdownLinksLength - 1) {\r\n            focusIndexInDropdown += (action.up ? -1 : 1);\r\n          }\r\n        } else {\r\n          if(focusIndexInDropdown === 0 || focusIndexInDropdown >= dropdownLinksLength) {\r\n            focusIndexInDropdown += (action.up ? -1 : 1);\r\n          }\r\n        }\r\n        // Wrap around if at the end of the submenu.\r\n        focusIndexInDropdown = ((focusIndexInDropdown % dropdownLinksLength) + dropdownLinksLength) % dropdownLinksLength;\r\n        $dropdownLinks[focusIndexInDropdown].focus();\r\n        return;\r\n      }\r\n\r\n      // Close menu and return focus to menubar\r\n      if(action.close || (menuFlipped && action.left)) {\r\n        hide($openContent);\r\n        $link.removeClass(openClass);\r\n        $topLevelLink.focus().attr('aria-expanded','false');\r\n        return;\r\n      }\r\n\r\n      // Navigate between submenus. This is needed for left/right actions in\r\n      // normal layout, or up/down actions in flipped layout (when nav is closed).\r\n      if(((action.left || action.right) && !menuFlipped) ||\r\n         ((action.up || action.down) && menuFlipped && !open)) {\r\n        let index = $topLevelLinks.index($topLevelLink),\r\n            prev = action.left || action.up,\r\n            linkCount = $topLevelLinks.length;\r\n\r\n        // hide content\r\n        // If menubar focus\r\n        //  - Change menubar item\r\n        //\r\n        // If dropdown focus\r\n        //  - Open previous pull down menu and select first item\r\n        hide($openContent);\r\n        $topLevelLink.attr('aria-expanded','false');\r\n        // Get previous item if left arrow, next item if right arrow.\r\n        index += (prev ? -1 : 1);\r\n        // Wrap around if at the end of the set of menus.\r\n        index = ((index % linkCount) + linkCount) % linkCount;\r\n        $topLevelLinks[index].focus();\r\n        return;\r\n      }\r\n\r\n    });\r\n    $mainNavItems.on('mouseenter', function(e) {\r\n      $(this).children('button').attr(\"aria-expanded\",\"true\");\r\n\r\n      if(windowWidth > breakpoint) {\r\n        let $openContent = $(this).find('.js-main-nav-content');\r\n        show($openContent);\r\n      }\r\n    });\r\n    $mainNavItems.on('mouseleave', function(e) {\r\n      $(this).children('button').attr(\"aria-expanded\",\"false\");\r\n\r\n      if(windowWidth > breakpoint) {\r\n        let $openContent = $(this).find('.js-main-nav-content');\r\n        hide($openContent);\r\n      }\r\n    });\r\n    $mainNavToggle.children('button, a').on('click', function(e) {\r\n      let $el = $(this),\r\n          $elParent = $el.parent(),\r\n          $content = $elParent.find('.js-main-nav-content'),\r\n          $openContent = $parent.find('.js-main-nav-content.' + openClass),\r\n          isOpen = $content.hasClass(openClass);\r\n\r\n      // mobile\r\n      if(windowWidth <= breakpoint) {\r\n        e.preventDefault();\r\n        // add open class to this item\r\n        $elParent.addClass(openClass);\r\n        show($content);\r\n        $el.attr('aria-expanded', 'true');\r\n      } else {\r\n        hide($openContent);\r\n        $el.attr('aria-expanded', 'false');\r\n\r\n        if(!isOpen) {\r\n          show($content);\r\n          $el.attr('aria-expanded', 'true');\r\n        }\r\n      }\r\n    });\r\n\r\n    $('.js-close-sub-nav').on('click', function(){\r\n      let $openContent = $parent.find('.js-main-nav-content.' + openClass);\r\n      hide($openContent);\r\n    });\r\n\r\n    // Hide any open submenu content when the sidebar menu is closed\r\n    $('.js-header-menu-button').click(function() {\r\n      let $openContent = $parent.find('.js-main-nav-content.' + openClass);\r\n      hide($openContent);\r\n    });\r\n\r\n    function hide($content) {\r\n      $('body').removeClass(submenuClass);\r\n      $parent.find(\".\" + openClass).removeClass(openClass);\r\n\r\n      if(windowWidth <= breakpoint) {\r\n        $content.addClass(closeClass);\r\n      } else {\r\n        $content\r\n        .stop( true, true )\r\n        .slideUp('fast',function() {\r\n          $content\r\n            .addClass(closeClass)\r\n            .slideDown(0);\r\n        });\r\n      }\r\n    }\r\n\r\n    function show($content) {\r\n      $('body').addClass(submenuClass);\r\n      if(windowWidth <= breakpoint) {\r\n        $content\r\n          .addClass(openClass)\r\n          .removeClass(closeClass);\r\n      } else {\r\n        $content\r\n          .stop( true, true )\r\n          .delay( 200 )\r\n          .slideUp(0,function() {\r\n            $content\r\n              .addClass(openClass)\r\n              .removeClass(closeClass)\r\n              .slideDown('fast');\r\n          });\r\n      }\r\n    }\r\n\r\n\r\n  });\r\n\r\n})(window,document,jQuery);\r\n","// ****** Menu button ******\r\nlet menuButton = document.querySelector(\".js-header-menu-button\");\r\n\r\nif(null !== menuButton){\r\n  menuButton.addEventListener(\"click\", function(event) {\r\n    event.preventDefault();\r\n    document.querySelector(\"body\").classList.toggle(\"show-menu\");\r\n  });\r\n}\r\n\r\n// ****** Main Header Search button on mobile should open the mobile menu  ******\r\nlet searchForm = document.querySelector(\".js-header-search-menu .js-header-search-form\");\r\n\r\nif(null !== searchForm){\r\n  searchForm.addEventListener(\"submit\", function(event) {\r\n    if(window.innerWidth > 620) {\r\n      return;\r\n    }\r\n    event.preventDefault();\r\n    document.querySelector(\"body\").classList.toggle(\"show-menu\");\r\n  });\r\n}\r\n\r\n\r\n","import getTemplate from \"../helpers/getHandlebarTemplate.js\";\r\n\r\nexport default (function (window,document,$,undefined) {\r\n  \r\n  $('.js-org-selector').each(function(i){\r\n    let $el = $(this);\r\n    let data = orgSelector[i];\r\n    let compiledTemplate = getTemplate('orgInfo');\r\n    let $select = $el.find('select').first();\r\n    let $placeholder = $el.find('.js-org-info');\r\n\r\n    //render the template based on the current value\r\n    renderTemplate($select.val());\r\n\r\n    // When the select changes\r\n    $select.change(() => {\r\n      //render the template based on the new value\r\n      renderTemplate($select.val());\r\n    });\r\n\r\n    // Render the template based on value\r\n    function renderTemplate(value) {\r\n      if (typeof(data.organizations[value]) === \"undefined\") {\r\n        $placeholder.html(\"\");\r\n        return false;\r\n      }\r\n\r\n      $placeholder.html(compiledTemplate(data.organizations[value]));\r\n\r\n      return true;\r\n    }\r\n  });\r\n\r\n})(window,document,jQuery);\r\n","export default (function (window,document,$,undefined) {\n\n  $('.ma__organization-navigation').each(function() {\n    // Org Nav Wrapper.\n    const $orgNav = $(this);\n    const $orgNavItems = $orgNav.find('.ma__organization-navigation__items');\n    const $menuWrapper = $orgNav.find('.ma__organization-navigation--inner-wrapper');\n\n    // Page wrapper and fillers. \n    const $pageWrapper = $orgNav.parent().next();\n    let $newsLink = $pageWrapper.find('.ma__press-listing');\n    let $eventsLink = $pageWrapper.find('.ma__event-listing');\n    let $locationsLink = $pageWrapper.find('.ma__mapped-locations');\n    let $relatedOrgs = $pageWrapper.find('.ma__our-organizations');\n\n    const feedbackButton = $('body').find('.ma__fixed-feedback-button');\n\n    // Mobile Menu vars.\n    const $mobileToggle = $orgNav.find('.ma__organization-navigation__mobile-toggle');\n    const mobileBreak = 910;\n\n    // Search Wrapper vars.\n    const $orgNavSearchForm = $orgNav.find('.js-organization-navigation__search');\n    const $orgNavSearchInput = $orgNav.find('#organization-navigation-search');\n    const $searchToggle = $orgNav.find('.ma__organization-navigation__search .js-search-toggle');\n\n    // Subnav buttons. \n    let $menuButton = $orgNav.find('.subnav-toggle');\n\n    // I want to section.\n    let $sectionButton = $orgNav.find('.ma__org-nav-i-want-to-section .ma__comp-heading');\n\n    // Sticky on scroll.\n    if($('.pre-content').length) {\n      const bannerBottom = $('.ma__page-banner').offset().top + $('.ma__page-banner').height();\n      let menuHeight = $orgNav.height();\n      $(window).scroll(function() {\n        const orgWindowTop = $(window).scrollTop();\n        let windowWidth = $(window).width();\n\n        // Active Sticky TOC when on page TOC scrolls past.\n        if (bannerBottom > orgWindowTop) {\n          $('.pre-content').removeAttr('style');\n          $orgNav.removeClass('stuck');\n        } \n        else {\n          $('.pre-content').css('padding-top', menuHeight);\n          $orgNav.addClass('stuck');\n        }\n      });\n    }  \n\n    // Mobile toggle. \n    $mobileToggle.on('click', function() {\n      \n      if(!$orgNav.hasClass('stuck')) {\n        $orgNav.addClass('stuck')\n      }\n\n      $mobileToggle.add($menuWrapper).toggleClass('menu-open');\n      // Close items when closing menu.\n      $('.item-open').removeClass('item-open');\n      // Remove cloned button if present. \n      $('.section-toggle').remove();\n\n      // Lock body scroll on mobile open/close.\n      $('body').toggleClass('scroll-disabled');\n\n      feedbackButton.toggle();\n\n    });\n\n    // Search form swing open/closed.\n    $searchToggle.on('click', function() {\n      $menuWrapper.toggleClass('form-open');\n\n      let $buttonLabel = $searchToggle.find('.search-label');\n      $buttonLabel.text($buttonLabel.text() == \"Close\" ? \"Search this organization\" : \"Close\");\n    });\n\n    $orgNavSearchForm.on('submit', function() {\n      let searchAction = $(this).attr('action') + \"&q=\";\n      let searchParams = $orgNavSearchInput.val();\n      $(this).attr('action', searchAction + searchParams);\n    });\n\n    // Open the dropdowns.\n    $menuButton.each(function() {\n      let $button = $(this);\n      let $buttonParent = $button.parent('.has-subnav'); \n      let $thisMenu = $buttonParent.find('.ma__organization-navigation__subitems');\n\n      $buttonParent.on('mouseenter mouseleave', function() {\n        let windowWidth = $(window).width();\n        let menuHeight = $menuWrapper.outerHeight();\n\n        if(windowWidth > mobileBreak) {\n          $('.section-toggle').remove();\n          $buttonParent.toggleClass('item-open');\n          $thisMenu.css('top', menuHeight);\n        }\n        else {\n          return false;\n        };\n      });\n\n      $button.on('click', function() {\n        let windowWidth = $(window).width();\n\n        if(windowWidth < mobileBreak) {\n          $buttonParent.toggleClass('item-open');\n          let $buttonClone = $button.clone(true);\n\n          // Copy the link as a close button inside the menu section.\n          if (!$('.section-toggle').length) {\n            $buttonClone.addClass('section-toggle').prependTo($thisMenu);\n          }\n        } \n        else {\n          return false;\n        };\n      });\n  \n    });\n\n    $('body').on('click', '.section-toggle', function() {\n      $('.section-toggle').remove();\n    });\n\n    // Mobile view open the \"I want to sections\".\n    $sectionButton.each(function() {\n\n      let $button = $(this);\n      let $seeAll = $button.parent().find('.ma__link-list__see-all');\n        $button.on( 'click', function() {\n          let windowWidth = $(window).width();\n          if (windowWidth < mobileBreak) {\n            $button.toggleClass('item-open');\n            $button.next('.ma__link-list__container').add($seeAll).toggleClass('item-open');\n          }\n        });\n      \n    });\n\n    if($relatedOrgs.length){\n      $relatedOrgs.attr('id', 'organizations');\n      $orgNavItems.append('<li class=\"ma__organization-navigation__item\"><a class=\"internal-link\" href=\"#organizations\">Our organizations</a></li>');\n    }\n\n    if($newsLink.length){\n      $newsLink.attr('id', 'news');\n      $orgNavItems.append('<li class=\"ma__organization-navigation__item\"><a class=\"internal-link\" href=\"#news\">News</a></li>');\n    }\n\n    if($eventsLink.length){\n      $eventsLink.attr('id', 'events');\n      $orgNavItems.append('<li class=\"ma__organization-navigation__item\"><a class=\"internal-link\" href=\"#events\">Events</a></li>');\n    }\n\n    if($locationsLink.length){\n      $locationsLink.attr('id', 'locations');\n      $orgNavItems.append('<li class=\"ma__organization-navigation__item\"><a class=\"internal-link\" href=\"#locations\">Locations</a></li>');\n    }\n\n    $('.ma__organization-navigation__item.mobileLogin').appendTo($orgNavItems);\n  \n    $(\".internal-link\").on('click', function(e) {\n      // Close open menus and reset markup.\n      $('.menu-open').removeClass('menu-open');\n      $('.item-open').removeClass('item-open');\n      $('.form-open').removeClass('form-open');\n      $('.section-toggle').remove();\n\n      e.preventDefault();\n      let location = $(this).attr('href');\n      $('html, body').animate({scrollTop: $(location).offset().top - 120}, 1000);\n\n      if(feedbackButton.is(\":hidden\")) {\n        feedbackButton.show();\n      }\n    });\n\n    $(window).on(\"resize\", function() {\n      let windowWidth = $(window).width();\n      let $contactGroups = $orgNav.find('.ma__org-nav-contact-us .ma__contact-group');\n\n      if (windowWidth > mobileBreak) {\n        // Check if already wrapped.\n        if($('.wrappedGroup').length === 0){\n\n          if(!$('.ma__contact-group__seeAll').length) {\n            // If no 'see all link', wrap address separately.\n            $('.ma__contact-group:first-child').addClass('wrappedGroup');\n            $contactGroups = $contactGroups.not(':first');\n          } \n          else {\n            $contactGroups.slice(0, 2).wrapAll(\"<div class='wrappedGroup' />\");\n            $contactGroups = $contactGroups.slice(2);\n          }\n\n          if($contactGroups.length < 3) {\n            $contactGroups.wrap(\"<div class='wrappedGroup' />\");\n          }\n          else {\n            // Wrap contact groups in sets of 2 for layout.\n            for (let i = 0; i < $contactGroups.length; i+=2) {\n              $contactGroups.slice(i, i+2).wrapAll(\"<div class='wrappedGroup' />\");\n            }\n          }\n        }\n      } \n      else {\n        $('.wrappedGroup').find($contactGroups).unwrap();\n        $('body').removeClass('scroll-disabled');\n      }\n\n    }).resize();\n  });\n}) (window,document,jQuery);\n","import twiggy from '../helpers/twiggy';\n\nexport default (function (window, document, $, undefined) {\n  if ($('.js-pagination').length === 0) {\n    return;\n  }\n\n  // Set up global component config\n  let prevButton = '.js-pagination-prev',\n    nextButton = '.js-pagination-next',\n    pageButton = '.js-pagination-page';\n\n  $('.js-pagination').each(function () {\n    let $el = $(this);\n    let targetPageNumber = 1;\n    let params = new URLSearchParams(window.location.search);\n    if (history.state && history.state.page) {\n      targetPageNumber = history.state.page;\n    } else if (params.has('_page')) {\n      targetPageNumber = params.get('_page');\n    }\n\n    // Listen for previous page button click and trigger pagination event.\n    $el.on('click', prevButton, function () {\n      targetPageNumber = targetPageNumber - 1;\n      pushPaginationState(targetPageNumber);\n      $el.trigger('ma:Pagination:Pagination', [history.state.page]);\n    });\n    // Listen for next button click and trigger pagination event.\n    $el.on('click', nextButton, function () {\n      targetPageNumber = targetPageNumber + 1;\n      pushPaginationState(targetPageNumber);\n      $el.trigger('ma:Pagination:Pagination', [history.state.page]);\n    });\n    // Listen for page number button click and trigger pagination event;\n    $el.on('click', pageButton, function (e) {\n      targetPageNumber = $(e.target).data('page');\n      pushPaginationState(targetPageNumber);\n      $el.trigger('ma:Pagination:Pagination', [history.state.page]);\n    });\n\n    window.onpopstate = function(e) {\n      if (e.state) {\n        if (e.state.page) {\n          $el.trigger(\"ma:Pagination:Pagination\", [e.state.page]);\n        }\n      }\n    };\n\n    // Listen for new data, render new pagination.\n    $el.on('ma:Pagination:DataUpdated', function (e, data) {\n      renderPagination({ data: data, $el: $el });\n    });\n\n    // if we already have a state or a query parameter, initialize things\n    pushPaginationState(targetPageNumber, true);\n  });\n\n  /**\n   * Renders the contents of a specific results pagination component.\n   *\n   * @param args\n   *   The arguments object, can contain the following properties:\n   *      data: data object from which to populate handlebars template variables (required),\n   *      context: the parent component selector\n   */\n  function renderPagination(args) {\n    // Don't attempt to render anything if we don't have new data.\n    if (!args.data) {\n      return;\n    }\n\n    // Render async with Twig.\n    return twiggy('@molecules/pagination.twig')\n      .then(template => {\n        // Truncate the pagination with ellipsis to prevent it from showing\n        // all page numbers if there are a lot.\n        let pagination = truncatePaginationDisplay(args.data);\n        // Render the pagination Twig async.\n        return template.renderAsync({ pagination: pagination });\n      })\n      .then(markup => args.$el.html(markup));\n\n    // Create new markup using handlebars template, helper.\n    let markup = compiledTemplate(args.data);\n    args.$el.html(markup);\n  }\n\n  /**\n   * Returns a truncated version of the pagination structure.\n   *\n   * @param data\n   *   The the pagination data to transform.\n   */\n  function truncatePaginationDisplay(data) {\n    if (!data) {\n      return;\n    }\n\n    let truncatedPagination = data,\n        current = data.currentPage,\n        last = data.totalPages,\n        delta = 1;\n\n    // For the first and last pages, set the delta to 2 so 2 page numbers\n    // within the current page can be shown.\n    if (current === 1 || current === last) {\n      delta = 2;\n    }\n\n    let left = current - delta,\n        right = current + delta + 1,\n        range = [],\n        rangeWithEllipsis = [],\n        l;\n\n    for (let i = 1; i <= last; i++) {\n      if (i == 1 || i == last || i >= left && i < right) {\n        range.push(i);\n      }\n    }\n\n    for (let i of range) {\n      if (l) {\n        if (i - l === 2) {\n          rangeWithEllipsis.push({ text: l + 1, active: false });\n        }\n        else if (i - l !== 1) {\n          rangeWithEllipsis.push({ text: 'spacer', active: false });\n        }\n      }\n\n      let active = false;\n      if (i === current) {\n        active = true;\n      }\n      rangeWithEllipsis.push({ text: i, active: active });\n      l = i;\n    }\n\n    truncatedPagination.pages = rangeWithEllipsis;\n\n    return truncatedPagination;\n  }\n\n  function pushPaginationState(pageNum, replace = false) {\n    let params = new URLSearchParams(window.location.search);\n    params.set('_page', pageNum);\n\n    if (replace) {\n      history.replaceState(\n        { page: pageNum },\n        `${document.title} | page ${pageNum}`, `${window.location.origin}${window.location.pathname}?${params.toString()}`\n      );\n    }\n    else {\n      history.pushState(\n        { page: pageNum },\n        `${document.title} | page ${pageNum}`, `${window.location.origin}${window.location.pathname}?${params.toString()}`\n      );\n    }\n  }\n\n}) (window, document, jQuery);\n","export default (function (window,document,$,undefined) {\r\n  \r\n  $('.js-input-date').each(function(){\r\n    let $el = $(this);\r\n    let restrict = $el.data('restrict');\r\n    let picker = new Pikaday({ \r\n      field: this,\r\n      format: 'MM/DD/YYYY',\r\n    });\r\n\r\n    switch(restrict) {\r\n      case 'max':\r\n        picker.setMaxDate(new Date());\r\n        break;\r\n      case 'min':\r\n        picker.setMinDate(new Date());\r\n        break;\r\n    }\r\n\r\n    $el.attr('type','text');\r\n  });\r\n\r\n})(window,document,jQuery);\r\n","import throttle from \"../helpers/throttle.js\";\n\nexport default (function (window, document, $) {\n\n  // Responsive table HTML structure\n  // <div class=\"ma__table--responsive\">\n  //   <div class=\"ma__table--responsive__wrapper\">\n  //    <table class=\"ma__table\"> ... </table>\n  //   </div>\n  // </div>\n\n  const $window = $(window);\n  let responsiveTables = [];\n  \n\n  function setWidths(rt) {\n    \n    rt.$table\n      .find(\"thead th\")\n      .each(function (i) {\n        rt.$stickyHeader\n          .find(\"th\")\n          .eq(i)\n          .width($(this).width());\n      });\n\n    if (rt.$stickyHeader) {\n      // Set width of sticky table head.\n      rt.$stickyHeader.find(\"table\").width(rt.$table.width());\n      rt.$stickyHeader.width(rt.$stickyHeader.parent().width());\n    }\n  }\n\n  // Initialize or reset the responsive tables. This includes creating a copy\n  // of the header and setting its fixed position properly.\n  function initializeTable(element, reset = false, index = false) {\n    const $element = $(element);\n    let $table = $element.find(\"table\").not(\"table table\");\n    let $thead = $table.find(\"thead\").not(\"table table thead\");\n    const hasThead = $thead.length;\n    const theadHeight = $thead[0].offsetHeight;\n    const isNestedThead = $thead.closest(\"table table\").length;\n    const hasTh = $table.find(\"th\").length;\n    let $stickyHeader = null;\n    const canScroll = $table.width() > $table.parent().width();\n\n    if (hasThead && hasTh && !isNestedThead) {\n      \n      if (!reset) {\n        $thead = $thead.clone();\n        $table.after(\"<div class='sticky-thead'><div class='sticky-thead-wrapper'><table class='ma__table'></table></div></div>\");\n\n        $stickyHeader = $element.find(\".sticky-thead\");\n        $stickyHeader.find(\"table\").append($thead);\n      }\n      else {\n        $stickyHeader = $element.find(\".sticky-thead\");\n      }\n      const tableLeft = $table[0].getBoundingClientRect().x;\n      $stickyHeader\n        .css({\n          \"position\": \"fixed\",\n          \"left\": tableLeft,\n          \"top\": getAdditionalOffset(),\n          \"opacity\": 0,\n          \"height\": theadHeight\n        });\n      $stickyHeader[0].scrollLeft = 0;\n    }\n\n    // Add class, remove margins, reset width and wrap table.\n    $table\n      .addClass(\"sticky-enabled\")\n      .css({\n        margin: 0,\n        width: \"100%\"\n      });\n    \n    $element.toggleClass(\"has-horizontal-scroll\", canScroll);\n    // @todo Update this width to remove the remove the arrows and margin.\n    $element.find('.ma__table__horizontal-nav').width($table.parent().width());\n\n    let rt = {\n        index: index || responsiveTables.length,\n        $root: $element,\n        $table: $table,\n        $stickyHeader: $stickyHeader,\n        theadHeight: theadHeight,\n        headerStuck: false,\n        scrollStuck: false,\n        canScroll\n    };\n    setWidths(rt);\n\n    if (reset) {\n      responsiveTables[index] = rt;\n    }\n    else {\n      responsiveTables.push(rt);\n      rt.$root[0].addEventListener(\"scroll\", handleTableScroll, true);\n    }\n    checkVisibility(rt);\n\n    // Reset scroll.\n    if (rt.canScroll) {\n      const tableWrapper = element.getElementsByClassName(\"ma__table--responsive__wrapper\")[0];\n      tableWrapper.scrollLeft = 0;\n      element.getElementsByClassName(\"ma__scroll-indicator\")[0].scrollLeft = tableWrapper.scrollWidth - tableWrapper.offsetWidth;\n    }\n    \n  }\n  \n  // Certain other components that stick to the top of the page need to be accounted for.\n  // This calculates the additional offset that a table sticky header should drop down.\n  function getAdditionalOffset() {\n    let additionalOffset = 0;\n\n    if (document.documentElement.clientWidth <= 825) {\n      const $jsStickyHeader = $(\".js-sticky-header\");\n      if ($jsStickyHeader) {\n        additionalOffset += $jsStickyHeader.height();\n      }\n    }\n    if ($(\".js-scroll-anchors\")[0] &&\n      document.documentElement.clientWidth <= 765) {\n      additionalOffset += $(\".js-scroll-anchors\").height();\n    }\n    return additionalOffset > 0 ? additionalOffset + \"px\" : 0;\n  }\n\n  function checkVisibility(rt) {\n    const elementTop = rt.$root.offset().top;\n    const windowTop = $window.scrollTop();\n    const windowBottom = windowTop + $window.height();\n    const elementBottom = (elementTop + rt.$root.height()) - rt.theadHeight;\n\n    if (rt.$stickyHeader) {\n      const stuckTop = rt.$stickyHeader.offset().top;\n      if (!rt.headerStuck && elementTop < stuckTop && elementBottom > stuckTop) {\n        responsiveTables[rt.index].headerStuck = true;\n        rt.$stickyHeader.css(\"opacity\", 1);\n      }\n      else if (rt.headerStuck && (elementTop > stuckTop || elementBottom < stuckTop)) {\n        responsiveTables[rt.index].headerStuck = false;\n        rt.$stickyHeader.css(\"opacity\", 0);\n      }\n    }\n\n    if (rt.canScroll) {\n      if (!rt.scrollStuck && windowBottom < elementBottom && elementTop < windowBottom) {\n        responsiveTables[rt.index].scrollStuck = true;\n        rt.$root.addClass(\"stickNav\");\n        const tableLeft = rt.$root[0].getBoundingClientRect().left + $window[\"scrollLeft\"]();\n        rt.$root.find(\".ma__table__horizontal-nav\").css(\"left\", tableLeft);\n      }\n      else if (rt.scrollStuck &&\n        (windowBottom > elementBottom && windowTop < elementBottom ||\n        elementTop > windowBottom || elementBottom < windowTop)) {\n\n        responsiveTables[rt.index].scrollStuck = false;\n        rt.$root.removeClass(\"stickNav\");\n        rt.$root.find(\".ma__table__horizontal-nav\").css(\"left\", \"\");\n      }\n      recalcScrollbar(rt);\n    }\n  }\n\n  function handleScroll() {\n    responsiveTables.forEach((rt) => {\n      checkVisibility(rt);\n    });\n  }\n\n  function handleWindowResize () {\n    responsiveTables.forEach((rt) => {\n      initializeTable(rt.$root[0], true, rt.index);\n    });\n  }\n\n  // Scroller click handler.\n  function handleScrollerClick(e) {\n    const $scrollContainer = $(this).parents(\".js-ma-responsive-table\").find(\".ma__table--responsive__wrapper\");\n    let posX = $(this).position().left;\n    let midpoint = $(e.target).offset().left + $(e.target).width() / 2;\n    let clickpoint = e.pageX - posX;\n\n    if (clickpoint < midpoint ) {\n      // Scroll left.\n      $scrollContainer.animate({\n        scrollLeft: $scrollContainer.scrollLeft() - Math.abs(midpoint - clickpoint)\n      }, 250);\n    }\n    else {\n      // Scroll right.\n      $scrollContainer.animate({\n        scrollLeft: $scrollContainer.scrollLeft() + Math.abs(midpoint - clickpoint)\n      }, 250);\n    }\n  }\n\n  function handleScrollerInteraction(e) {\n    const $scrollContainer = $(this).parents(\".js-ma-responsive-table\").find(\".ma__table--responsive__wrapper\");\n\n    let initialPosition = {\n      x: e.pageX,\n      y: e.pageY\n    };\n\n    function handleMouseUp() {\n      // Remove listeners.\n      $(\"body\")\n        .off(\"mousemove\", handleMouseMove)\n        .off(\"mouseup\", handleMouseUp);\n    }\n\n    function handleMouseMove(e) {\n      let newPosition = {\n        x: e.pageX,\n        y: e.pageY\n      };\n\n      $scrollContainer.scrollLeft($scrollContainer.scrollLeft() + newPosition.x - initialPosition.x);\n    }\n    // Attach to body so you don't get a\n    // disconnected handler if you drag off the bar.\n    $(\"body\")\n      .on(\"mouseup\", handleMouseUp)\n      .on(\"mousemove\", handleMouseMove);\n\n  }\n\n  function scrollbarEventHandlers() {\n    const amountToScroll = 200;\n    const $scrollContainer = $(\".js-ma-responsive-table\").find(\".ma__table--responsive__wrapper\");\n\n    // Scrollbar left arrow.\n    $(\".ma__table__horizontal-nav__left\").click(function() {\n      // On click of left arrow element, animate the movement of the scrollbar\n      // to the left by the integer amount defined in `amountToScroll`.\n      const currentScrollLeft = $scrollContainer.scrollLeft();\n\n      $scrollContainer.animate({\n        scrollLeft: (currentScrollLeft - amountToScroll) < 0 ? 0 : (currentScrollLeft - amountToScroll)\n      }, 250);\n    });\n\n    // Scrollbar right arrow.\n    $(\".ma__table__horizontal-nav__right\").click(function() {\n      // On click of left arrow element, animate the movement of the scrollbar\n      // to the left by the integer amount defined in `amountToScroll`.\n      $scrollContainer.animate({\n        scrollLeft: $scrollContainer.scrollLeft() + amountToScroll\n      }, 250);\n    });\n\n    // Scroll indicator element.\n    $(\".ma__scroll-indicator\").on(\"click\", handleScrollerClick);\n\n    $(\".ma__scroll-indicator__button\")\n      .on(\"mousedown\", handleScrollerInteraction)\n      // Deaden clicking on the scroll button\n      // in order to handle click on parent.\n      .on(\"click\", e => e.stopPropagation());\n\n  }\n\n  function recalcScrollbar(rt) {\n    const containerWidth = rt.$table.parent().width();\n    const tableWidth = rt.$table.width();\n\n    let mobileLoad = $window.width() < 910;\n    let buttonWidth;\n    \n    if (mobileLoad) {\n      // Short button for mobile.\n      buttonWidth = (tableWidth - containerWidth) / 1.25;\n    } else {\n      // Regular button for desktop.\n      buttonWidth = (tableWidth - containerWidth) * 2;\n    }\n    \n    const $scrollbar = rt.$root.find(\".clip-scrollbar\");\n    const $scrollbarIndicator = $scrollbar.find(\".ma__scroll-indicator\");\n    const scrollbarHeight = $scrollbarIndicator[0].clientHeight;\n    \n    $scrollbar.css(\"height\", `${scrollbarHeight}px`);\n    $scrollbar.find(\".ma__scroll-indicator--bar\").css(\"width\", `${tableWidth}px`);\n    $scrollbarIndicator.css(\"width\", `${containerWidth}px`);\n    $scrollbarIndicator.find(\".ma__scroll-indicator__button\").css(\"width\", `${buttonWidth}px`);\n  }\n\n  function handleTableScroll(e) {\n    const scrollAmount = e.target.scrollLeft;\n    // @todo Update this to be a percentage of this number since we have to take out the arrows.\n    const scrollInverse = e.target.scrollWidth - e.target.offsetWidth - scrollAmount;\n    [\"ma__table--responsive__wrapper\", \"ma__scroll-indicator\", \"sticky-thead-wrapper\"].map(scrollable => {\n      if (e.target.className !== scrollable) {\n        if (scrollable === \"ma__scroll-indicator\" || e.target.className === \"ma__scroll-indicator\") {\n          this.getElementsByClassName(scrollable)[0].scrollLeft = scrollInverse;\n        }\n        else {\n          this.getElementsByClassName(scrollable)[0].scrollLeft = scrollAmount;\n        }\n      }\n    });\n  }\n\n  $(\".js-ma-responsive-table\").each((i, el) => initializeTable(el));\n\n  scrollbarEventHandlers();\n\n  $window.on(\"scroll\", handleScroll);\n  $window.on(\"resize\", handleWindowResize);\n\n})(window, document, jQuery);","export default (function (window,document,$,undefined) {\n\n  $('.js-ma-responsive-video').fitVids();\n\n})(window,document,jQuery);","import twiggy from '../helpers/twiggy';\n\nexport default (function (window,document,$,undefined) {\n  // Set up global component config\n  let  clearAllButton = '.js-results-heading-clear', // events triggered on parent\n    filterButton = '.js-results-heading-tag'; // events triggered on parent\n\n  $(\".js-results-heading\").each(function() {\n    const $el = $(this);\n\n    // Listen for clear all button click + trigger interaction event on parent.\n    $el.on('click', clearAllButton, function () {\n      $el.trigger('ma:ResultsHeading:ActiveTagClicked', [{clearedFilter: 'all'}]);\n    });\n\n    // Listen for single filter button click and trigger interaction event on parent.\n    $el.on('click', filterButton, function (e) {\n      let clearedFilter = {\n        'type': $(e.target).data('ma-filter-type'),\n        'value': $(e.target).data('ma-filter-value'),\n        'text': $(e.target).text()\n      };\n\n      $el.trigger('ma:ResultsHeading:ActiveTagClicked', [{clearedFilter: clearedFilter}]);\n    });\n\n    // Listen for new results heading data, render new results heading.\n    $el.on('ma:ResultsHeading:DataUpdated', function (e, data) {\n      renderResultsHeading({data: data, $el: $el});\n    });\n  });\n\n  /**\n   * Renders the contents of a specific results heading component.\n   *\n   * @param args\n   *   The arguments object, can contain the following properties:\n   *      data: data object from which to populate handlebars template variables (required),\n   *      context: the parent component selector\n   */\n  function renderResultsHeading(args) {\n    // Don't attempt to render anything if we don't have new data.\n    if (!args.data) {\n      return;\n    }\n    // Asynchronously render via TwigJS.\n    twiggy('@molecules/results-heading.twig')\n        .then(t => t.renderAsync({resultsHeading: args.data}))\n        .then(markup => args.$el.html($(markup).children()))\n  }\n\n})(window,document,jQuery);\n","import slugify from \"../helpers/slugify.js\";\r\nexport default (function (window, document, $) {\r\n\r\n  $('.js-ma-rich-text').each(function(index){\r\n    let $el = $(this),\r\n      richTextIndex = index;\r\n\r\n    const $table = $el.find(\"table\").not(\"table table\");\r\n    $table.each(function() {\r\n      const $this = $(this);\r\n      // If this table does not have the `ma__table` class.\r\n      if (!$this.hasClass('ma__table') && !$this.closest('.ma__table--responsive').length) {\r\n        $this\r\n          .addClass('ma__table')\r\n          .wrap('<div class=\"ma__table--responsive js-ma-responsive-table\"><div class=\"ma__table--responsive__wrapper\"></div></div>');\r\n      }\r\n      // At this point there is a `.ma__table` class,\r\n      // but does this table already posses a responsive table structure.\r\n      else if(!$this.closest('.ma__table--responsive').length) {\r\n        $this\r\n          .wrap('<div class=\"ma__table--responsive js-ma-responsive-table\"><div class=\"ma__table--responsive__wrapper\"></div></div>');\r\n      }\r\n\r\n      const $tableNav = $('<nav class=\"ma__table__horizontal-nav\"><button class=\"ma__table__horizontal-nav__left\" aria-controls=\"{{tableID}}\"><span class=\"visually-hidden\">Scroll left</span></button><div class=\"clip-scrollbar\"><div class=\"ma__scroll-indicator\"><div class=\"ma__scroll-indicator--bar\" aria-controls=\"{{tableID}}\" role=\"scrollbar\" aria-orientation=\"horizontal\"><div class=\"ma__scroll-indicator__button\"></div></div></div></div><button class=\"ma__table__horizontal-nav__right\" aria-controls=\"{{tableID}}\"><span class=\"visually-hidden\">Scroll right</span></button></nav>');\r\n      $this.closest('.ma__table--responsive').prepend($tableNav);\r\n    });\r\n\r\n    // Provide css hooks to indent each child heading and its nested contents if js hook is present.\r\n    if ($el.hasClass('js-ma-outline-indent')) {\r\n      $el.find(':header').each(function(index,heading){\r\n        if ($(heading).prop(\"tagName\") !== 'H2') {\r\n          $(heading).addClass(\"ma__rich-text__indent\");\r\n        }\r\n        $(heading).nextUntil(':header')\r\n          .addClass(\"ma__rich-text__indent\")\r\n          .attr('data-ma-heading-parent', $(heading).prop('tagName'));\r\n      });\r\n    }\r\n\r\n    // Insert anchor tags prior to all child headings if js hook is present.\r\n    if ($el.hasClass('js-ma-insert-heading-anchors')) {\r\n      // Get all of the content headings.\r\n      let $headings = $el.find(\":header\");\r\n      $headings.each(function (index, heading) {\r\n        // For H3+\r\n        if ($(heading).prop(\"tagName\") !== 'H2') {\r\n          // Create an id based on the heading text.\r\n          let id = slugify($(heading).text());\r\n          // Insert an anchor tag before the heading.\r\n          $(heading).before(\"<a name='\" + id + \"-\" + richTextIndex + \"-\" + index + \"'></a>\");\r\n        }\r\n      });\r\n    }\r\n  });\r\n})(window, document, jQuery);\r\n","import checkMobile from \"../helpers/cssControlCode.js\";\r\n\r\nexport default (function (window,document,$,undefined) {\r\n\r\n  $(\".js-scroll-anchors\").each(function() {\r\n    let $el = $(this),\r\n        $elParent = $el.parent().css('position') === 'relative' ? $el.parent() : $el.parent().offsetParent(),\r\n        $titleLink = $el.find('.is-title'),\r\n        $links = $el.find('.js-scroll-anchors-link'),\r\n        elHeight,\r\n        headerBuffer = 0,\r\n        lowerLimit,\r\n        upperLimit,\r\n        debounceTimer,\r\n        activeClass = \"is-active\",\r\n        activeAnchorIndex = 0,\r\n        anchors = [],\r\n        numAnchors = 0,\r\n        isMobile = false,\r\n        linkScrolling = false;\r\n\r\n    setVariables();\r\n\r\n    // default assumption as to where the screen will load\r\n    $el.attr('data-sticky','top');\r\n\r\n    // update variables one more time to catch any post page load changes\r\n    window.setTimeout(function(){\r\n      setVariables();\r\n    },1000);\r\n\r\n    $links.on('click',function(e) {\r\n      e.preventDefault();\r\n\r\n      let $link = $(this);\r\n\r\n      // is the menu closed on mobile\r\n      if(!$el.hasClass('is-open') && isMobile) {\r\n        // just show the menu\r\n        $el.addClass('is-open');\r\n        return;\r\n      }\r\n\r\n      activeAnchorIndex = $(this).data('index');\r\n      // find the location of the desired link and scroll the page\r\n      let position = anchors[activeAnchorIndex].position;\r\n      // close the menu\r\n      $el.removeClass('is-open');\r\n      // prevent the scroll event from updating active links\r\n      linkScrolling = true;\r\n\r\n      $(\"html,body\").stop(true,true).animate({scrollTop:position}, '750', function(){\r\n        linkScrolling = false;\r\n        // Get the link hash target so we can bring focus to it\r\n        let hash = anchors[activeAnchorIndex].hash;\r\n        // bring focus to the item we just scrolled to\r\n        $(hash).focus();\r\n        // timing issue with window.scroll event firing.\r\n        setTimeout(function(){\r\n          // set this link as active.\r\n          $el.find('.' + activeClass).removeClass(activeClass);\r\n          $link.addClass(activeClass);\r\n        },30);\r\n      });\r\n    });\r\n\r\n    // if the content contains accordions,\r\n    // readjust settings when there state changes.\r\n    $('.js-accordion-link').on('click',function() {\r\n      if(typeof debounceTimer === \"number\") {\r\n        window.clearTimeout(debounceTimer);\r\n      }\r\n      debounceTimer = window.setTimeout(function(){\r\n        setVariables();\r\n        setPosition();\r\n        activateLink();\r\n      },400);\r\n    })\r\n\r\n    $el.find(\".js-scroll-anchors-toggle\").on('click',function() {\r\n      $el.toggleClass('is-open');\r\n    });\r\n\r\n    // make the links sticky\r\n    $(window).resize(function() {\r\n      if(typeof debounceTimer === \"number\") {\r\n        window.clearTimeout(debounceTimer);\r\n      }\r\n      debounceTimer = window.setTimeout(function(){\r\n        setVariables();\r\n        setPosition();\r\n        activateLink();\r\n      },300);\r\n    });\r\n\r\n    $(window).scroll(function () {\r\n      setPosition();\r\n\r\n      if(!linkScrolling){\r\n        activateLink();\r\n      }\r\n    });\r\n\r\n    function setVariables() {\r\n      let topOffset = 0;\r\n\r\n      headerBuffer = 0;\r\n      elHeight = $el.outerHeight(true);\r\n      upperLimit = $elParent.offset().top;\r\n      isMobile = checkMobile($el);\r\n\r\n      if($elParent[0].hasAttribute(\"style\") && !isMobile) {\r\n        $elParent.removeAttr('style');\r\n      }\r\n\r\n      if(isMobile) {\r\n        headerBuffer = $('.js-sticky-header').height() || 0;\r\n        upperLimit -= headerBuffer;\r\n        topOffset = elHeight;\r\n\r\n        mobileTitleOn();\r\n      }\r\n      else {\r\n        mobileTitleOff();\r\n      }\r\n      \r\n      lowerLimit = upperLimit + $elParent.outerHeight(true) - $el.height();\r\n\r\n      // locate the position of all of the anchor targets\r\n      anchors = new Array;\r\n      $links.each(function(i,e){\r\n        let $el = $(this),\r\n          $link = $el.is('a') ? $el : $el.find('a'),\r\n          hash = $link[0].hash,\r\n          position = $(hash).offset() ? $(hash).offset().top - headerBuffer - topOffset : upperLimit;\r\n\r\n        anchors[i] = { hash, position };\r\n\r\n        $el.data('index',i);\r\n      });\r\n\r\n      // record the number of anchors for performance\r\n      numAnchors = anchors.length;\r\n    }\r\n\r\n    function setPosition() {\r\n      let windowTop = $(window).scrollTop(),\r\n          attr = $el.attr('data-sticky'),\r\n          top = attr !== 'top' && windowTop <= upperLimit,\r\n          middle = attr !== 'middle' && windowTop < lowerLimit && windowTop > upperLimit,\r\n          bottom = attr !== 'bottom' && windowTop >= lowerLimit;\r\n\r\n      if($elParent[0].hasAttribute(\"style\") && !isMobile) {\r\n        $elParent.removeAttr('style');\r\n      }\r\n\r\n      if(!$elParent[0].hasAttribute(\"style\") && isMobile && attr === 'middle') {\r\n        $elParent.css({'paddingTop':elHeight});\r\n      }\r\n\r\n      if(top) {\r\n        $el.attr('data-sticky','top');\r\n\r\n        if(isMobile){\r\n          $elParent.removeAttr('style');\r\n\r\n          mobileTitleOn();\r\n        }\r\n      }\r\n      else if (middle) {\r\n        $el.attr('data-sticky','middle');\r\n\r\n        if(isMobile){\r\n          $elParent.css({'paddingTop':elHeight});\r\n\r\n         mobileTitleOff();\r\n        }\r\n      }\r\n      else if (bottom) {\r\n        $el.attr('data-sticky','bottom');\r\n\r\n        if(isMobile){\r\n          $elParent.removeAttr('style');\r\n        }\r\n      }\r\n    }\r\n\r\n    function activateLink() {\r\n      // do we have more than one anchor\r\n      if(numAnchors < 2 || linkScrolling) {\r\n        return;\r\n      }\r\n\r\n      // get the current scroll position and trigger change when new link is 10% down the page\r\n      let windowTop = $(window).scrollTop() + (window.innerHeight/9),\r\n          currentAnchor = activeAnchorIndex;\r\n         \r\n\r\n      // is there a prev target\r\n      // and\r\n      // is the current scroll position above the current target\r\n      if(currentAnchor > 0 && windowTop < anchors[activeAnchorIndex].position) {\r\n        // make the prev link active\r\n        --activeAnchorIndex;\r\n      }\r\n\r\n      // is there a next target\r\n      // and\r\n      // is the current scroll position below the next target\r\n      else if(currentAnchor < numAnchors-1 && windowTop > anchors[activeAnchorIndex+1].position) {\r\n        // make the next link active\r\n        ++activeAnchorIndex;\r\n      }\r\n\r\n      if (currentAnchor !== activeAnchorIndex) {\r\n        // move the active flag\r\n        $el.find('.' + activeClass).removeClass(activeClass);\r\n        $links.eq(activeAnchorIndex).addClass(activeClass);\r\n      }\r\n    }\r\n\r\n    function mobileTitleOn() {\r\n      if($titleLink.length) {\r\n        $titleLink.addClass(activeClass);\r\n        $links.removeClass(activeClass);\r\n      }\r\n    }\r\n    \r\n    function mobileTitleOff() {\r\n      if($titleLink.length) {\r\n        $titleLink.removeClass(activeClass);\r\n        $links.first().addClass(activeClass);\r\n      }\r\n    }\r\n  });\r\n})(window,document,jQuery);\r\n","export default (function (window,document,$,undefined) {\n\n  $('.pre-content .ma__sticky-toc').each(function() {\n    const $toc = $('.ma__sticky-toc'),\n          $tocContent = $('.ma__sticky-toc__links'),\n          $tocSections = $('.ma__information-details .page-content, .ma__stacked-row-section__container .ma__stacked-row-section__title').find('h2'),\n          lastHeading = $tocSections.last().text(),\n          tocSectionCount = $tocSections.length,\n          $tocColumn = $('.ma__sticky-toc__column'),\n          $mobileToggle = $('.ma__sticky-toc__toggle-link'),\n          $tocToggle = $('.stickyTOC-open'),\n          $tocFooter = $('.ma__sticky-toc__footer'),\n          $stickyToc = $('.ma__sticky-toc__current-section'),\n          minSectionsToShow = $toc.data('min-to-show');\n\n    // // Remove wrapper if not enough links.\n    if (minSectionsToShow && (tocSectionCount < minSectionsToShow) || !minSectionsToShow && tocSectionCount < 3 ) {\n      $toc.remove();\n    }\n    else {\n      // To set an overflow rule for jumpy IE wrapping\n      $('html').addClass('stickyTOC');\n    }\n    // Show expander when more than 10 links.\n    if (tocSectionCount <= 10) {\n      if ($(window).width() > 480 ) {\n        $('.ma__sticky-toc__footer').toggle();\n      }\n    }\n\n    // Use headers to fill TOC.\n    $tocSections.each(function() {\n      let $section = $(this);\n      let sectionId = $section.attr('id');\n      let sectionTitle = $section.text();\n      if (!sectionId) {\n        sectionId = sectionTitle.replace(/\\s+/g, '-').toLowerCase();\n        $section.attr('id', sectionId);\n      }\n      let $tocLink = '<div class=\"ma__sticky-toc__link\"><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" aria-hidden=\\\"true\\\" width=\\\"35\\\" height=\\\"35\\\" viewBox=\\\"0 0 35 35\\\"><path class=\\\"st0\\\" d=\\\"M17.5 35C7.8 35 0 27.2 0 17.5 0 7.8 7.8 0 17.5 0 27.2 0 35 7.8 35 17.5 35 27.2 27.2 35 17.5 35zM16 9l-3 2.9 5.1 5.1L13 22.1l3 2.9 8-8L16 9z\\\"/></svg><a href=\"#'+sectionId+'\" >'+sectionTitle+'</a></div>';\n      let dest = '<span class=\"sticky-toc-jump-target\" id=\"' + sectionId + '\"></span>';\n\n      $section.removeAttr('id');\n      $section.parent().prepend(dest);\n      $('.ma__sticky-toc__column').append($tocLink);\n    });\n\n    // Toggle mobile TOC open.\n    $mobileToggle.on('click', function() {\n      $tocContent.toggleClass('is-open');\n    });\n\n    $tocFooter.on('click', function() {\n      let $button = $(this).find('button');\n      let $buttonText = $button.text();\n\n      // Toggle hidden links open.\n      $tocContent.toggleClass('open');\n      $button.toggleClass('open');\n\n      // Toggle button text.\n      $button.text($buttonText === \"show less\" ? \"show more\" : \"show less\");\n    });\n\n    $(window).resize(function () {\n      // Reset menu for each form factor on resize.\n      $('.ma__sticky-toc__link').removeAttr('style');\n      $tocContent.removeClass('open');\n      $tocFooter.find('button').removeClass('open').text('Show More');\n    });\n\n    // Set title bar to 'Related since the scroll never makes it that far'\n    $('body').on('click', '.ma__sticky-toc__link a[text=\"' + lastHeading + '\"]', function() {\n      $('.ma__sticky-toc__current-section').text(lastHeading);\n    });\n\n    $(window).scroll(function () {\n      const windowTop = $(window).scrollTop();\n      const windowBottom = window.innerHeight;\n      const docHeight = $(document).height();\n      const stickyNavActive  = $toc.offset().top + $toc.outerHeight() - 20;\n\n      // Active Sticky TOC when on page TOC scrolls past.\n      if (stickyNavActive > windowTop) {\n        $toc.removeClass('stuck');\n      } else {\n        $toc.addClass('stuck');\n\n        if (windowTop + windowBottom === docHeight) {\n          $stickyToc.text(lastHeading);\n        }\n        else {\n          // Identify the section to show for the heading.\n          const active = $tocSections.filter((index, section) => {\n            const $target = $(section).siblings('.sticky-toc-jump-target');\n            const top = $target.offset().top;\n            // Works with Firefox.\n            return top - windowTop < 20;\n          });\n          $stickyToc.text($(active.last()).text());\n        }\n      }\n    });\n    // Back to top button\n    $(\".stickyTOC-top\").on('click',function(e) {\n      e.preventDefault();\n      try {\n        $(\"html, body\").stop(true,true).animate({scrollTop:0}, '750');\n      }\n      catch(e) {\n        $('body').scrollTop(0);\n      }\n      // Bring keyboard focus back to top as well.\n      $(\"#main-content\").focus();\n      return false;\n    });\n\n    function menuToggle() {\n      $('.ma__sticky-toc__stuck-menu').toggleClass('sticky-nav-open');\n      $('.ma__sticky-toc__overlay').toggle();\n      $('.ma__floating-action').toggle();\n    }\n\n    $tocToggle.on('click', function() {\n      // Append sticky menu when first called\n      if ($('.ma__sticky-toc__stuck-menu').length == 0) {\n        $tocColumn.clone(true).addClass('ma__sticky-toc__stuck-menu').appendTo('#main-content');\n\n        // wait a beat so the slide in can work on first click\n        setTimeout(function(){\n          menuToggle();\n        }, 100);\n      }\n      else {\n        menuToggle();\n      }\n\n    });\n\n    // Close button\n    $('.secondary-label-close').on('click', function() {\n      menuToggle();\n    });\n\n    // Close sticky menu on click off, include tools buttons\n    $('body').on('click', function(event) {\n      if(!$(event.target).closest('.ma__sticky-toc__stuck-menu').length && !$(event.target).closest('.ma__sticky-toc__tools').length) {\n        console.log(\"click\");\n        if($('.ma__sticky-toc__stuck-menu').hasClass('sticky-nav-open')) {\n          menuToggle();\n        }\n      }\n    });\n\n    // close menu when link clicked\n    $('body').on('click', '.ma__sticky-toc__stuck-menu a', function() {\n      menuToggle();\n    });\n  });\n})(window,document,jQuery);\n","export default (function (window, document, $, undefined) {\n\n    let $toggle, $root, $sections;\n    let hiddenClass = 'is-initially-hidden';\n\n    function bindVars () {\n        $root = $('.js-teaser-listing-group');\n        $toggle = $root.find('.js-teaser-listing-group-toggle');\n        $sections = $root.find('.ma__teaser-listing');\n    }\n\n    function markForAccordion () {\n        let totalShown = $root.data('totalVisible');\n        let teaserItems = $root.find('.ma__general-teaser');\n\n        // Hide the toggle if the number of items is less than or equal to the number shown.\n        if (teaserItems.length <= totalShown) {\n          $toggle.hide();\n        }\n\n        // set excess items to be hidden\n        teaserItems.slice(totalShown, teaserItems.length).each((i, el) => {\n            // Items can be siblings or within an <li>, add class to the <li> if present\n            if ($(el).parent().prop('tagName') === \"LI\") {\n                $(el).parent().addClass(hiddenClass);\n            } else {\n                $(el).addClass(hiddenClass);\n            }\n        });\n\n        $sections.each( (i, el) => {\n            let $section = $(el);\n            let totalTeaserItems = $section.find('.ma__general-teaser');\n            let hiddenItems = $section.find('.'+hiddenClass);\n            // If the total number of teasers and total number of hidden things are the same, hide the whole section.\n            if (totalTeaserItems.length === hiddenItems.length) {\n                $section.addClass(hiddenClass);\n            }\n        });\n\n\n    }\n\n    function handleToggle () {\n        $toggle.click(() => {\n            $root.toggleClass('is-open');\n        });\n    }\n\n\n\n    $(document).ready( () => {\n        bindVars();\n        markForAccordion();\n        handleToggle();\n    });\n\n})(window, document, jQuery);\n","export default (function (window,document,$,undefined) {\n\n  $('.ma__featured-item .ma__featured-item__title span').each(function() {\n    const $this = $(this);\n    const $thisParent = $this.parent();\n    const $thisWrapper = $thisParent.closest('.ma__featured-item');\n    let thisTitle = $this.text();\n\n    // Links are truncated to 60 characters\n    // The wrappers only accommodate 50 with ellipses and the icon\n    if (thisTitle.length > 50) {\n      // Add a class for styling.\n      $thisParent.addClass('truncated');\n      // Add the full title to the aria label to keep value\n      $thisWrapper.attr('aria-label', thisTitle);\n\n      // Truncate title at last full word before 50th character\n      var truncatedTitle = thisTitle.substring(0, 50);\n      truncatedTitle = truncatedTitle.substr(0, Math.min(truncatedTitle.length, truncatedTitle.lastIndexOf(\" \")));\n      thisTitle = truncatedTitle;\n    }\n    $this.text(thisTitle);\n  });\n\n})(window,document,jQuery);\n","export default (function (window,document,$,undefined) {\r\n\r\n  $('.js-util-nav').each(function() {\r\n    let openClass = \"is-open\",\r\n        closeClass = \"is-closed\",\r\n        submenuClass = \"show-utilmenu\",\r\n        $parent = $(this),\r\n        waitForIt = null;\r\n\r\n    $('.js-close-sub-nav').on('click', function(){\r\n      let $openContent = $parent.find('.js-util-nav-content.' + openClass);\r\n      hide($openContent);\r\n    });\r\n\r\n    $parent.find('.js-util-nav-toggle > a').on('click', function(e) {\r\n      e.preventdefault;\r\n\r\n      let open = $(this).hasClass(openClass),\r\n        $content = $(this).next('.js-util-nav-content'),\r\n        $openContent = $parent.find('.js-util-nav-content.' + openClass);\r\n\r\n      // hide other content\r\n      hide($openContent);\r\n\r\n      if(open) {\r\n        return;\r\n      }\r\n      // add open class to this item\r\n      $(this).addClass(openClass);\r\n      // add open class to the correct content based on index\r\n      $content.attr(\"aria-hidden\",\"false\");\r\n\r\n      setTimeout(function(){\r\n        $content\r\n          .removeClass(closeClass)\r\n          .addClass(openClass);\r\n        $('body').addClass(submenuClass)\r\n      }, .1);\r\n    });\r\n\r\n    $parent.find('.js-close-util-nav').on('click', function(e){\r\n      e.preventDefault;\r\n\r\n      hide( $(this).closest('.js-util-nav-content') );\r\n    });\r\n\r\n    $('.js-header-menu-button, .js-close-sub-nav').on('click', function(){\r\n      let $openContent = $parent.find('.js-util-nav-content.' + openClass);\r\n      hide($openContent);\r\n    });\r\n\r\n    function hide($content) {\r\n      $('body').removeClass(submenuClass)\r\n      $parent.find(\".\" + openClass).removeClass(openClass);\r\n      $content\r\n        .removeClass(openClass)\r\n        .addClass(closeClass);\r\n\r\n      if(waitForIt) {\r\n        clearTimeout(waitForIt);\r\n      }\r\n      waitForIt = setTimeout(function(){\r\n        $content.attr(\"aria-hidden\",\"true\");\r\n      }, 1000);\r\n    }\r\n\r\n  });\r\n\r\n})(window,document,jQuery);\r\n"]}